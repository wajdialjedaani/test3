<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Interactive Quiz - Test Your Knowledge</title>
    <style>
        /* CSS Reset and Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Enhanced Focus Styles for AAA Compliance */
        :focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px white;
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.001ms !important;
                scroll-behavior: auto !important;
            }
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            color: #0f172a;
            background-color: #f8fafc;
            padding: 0;
            margin: 0;
            min-height: 100vh;
        }

        /* Visual Presentation Requirements for AAA */
        p, li {
            line-height: 1.8; /* At least 1.5 times font size */
            max-width: 80ch; /* No more than 80 characters per line */
            margin-bottom: 1.8em; /* Paragraph spacing at least 1.5 times line spacing */
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #2563eb;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        /* Main Content */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Quiz Container */
        .quiz-container {
            background-color: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            position: relative;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .progress-bar {
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1e40af);
            width: 0%;
            transition: width 0.5s ease-in-out;
        }

        /* Question Styles */
        .question-container {
            margin-bottom: 2rem;
        }

        .question {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #1e293b;
        }

        /* Options Styles */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option {
            position: relative;
        }

        .option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .option label {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .option label::before {
            content: "";
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 12px;
            border: 2px solid #64748b;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .option input[type="radio"]:checked + label {
            border-color: #2563eb;
            background-color: #eff6ff;
        }

        .option input[type="radio"]:checked + label::before {
            background-color: #2563eb;
            border-color: #2563eb;
            box-shadow: inset 0 0 0 4px white;
        }

        .option input[type="radio"]:focus + label {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        /* Buttons */
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        button {
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
            min-height: 44px;
            min-width: 44px; /* AAA target size requirement */
        }

        button:hover {
            background-color: #1d4ed8;
        }

        button:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        button:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }

        button.secondary {
            background-color: #64748b;
        }

        button.secondary:hover {
            background-color: #475569;
        }

        /* Feedback Styles */
        .feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 8px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background-color: #dcfce7;
            color: #166534;
            border: 2px solid #16a34a;
        }

        .feedback.incorrect {
            background-color: #fee2e2;
            color: #991b1b;
            border: 2px solid #dc2626;
        }

        .feedback-icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 8px;
            vertical-align: middle;
        }

        /* Results Section */
        .results-container {
            text-align: center;
            display: none;
        }

        .results-score {
            font-size: 3rem;
            font-weight: bold;
            color: #2563eb;
            margin: 1rem 0;
        }

        .results-message {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }

        .results-summary {
            margin: 2rem 0;
            text-align: left;
        }

        .summary-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 8px;
            background-color: #f8fafc;
        }

        .summary-item.correct {
            border-left: 4px solid #16a34a;
        }

        .summary-item.incorrect {
            border-left: 4px solid #dc2626;
        }

        .summary-question {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .summary-answer {
            color: #64748b;
        }

        .summary-answer.user-answer {
            margin-bottom: 0.5rem;
        }

        .summary-answer.correct-answer {
            color: #16a34a;
            font-weight: bold;
        }

        /* Footer Styles */
        footer {
            background-color: #1e293b;
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0;
        }

        .footer-links a {
            color: #93c5fd;
            text-decoration: none;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        /* High Contrast Mode */
        @media (prefers-contrast: more) {
            body {
                background-color: white;
                color: black;
            }
            
            header {
                background: black;
                color: white;
            }
            
            .quiz-container {
                border: 2px solid black;
            }
            
            button {
                background-color: black;
                color: white;
                border: 2px solid black;
            }
            
            .option label {
                border: 2px solid black;
            }
            
            .option input[type="radio"]:checked + label {
                background-color: black;
                color: white;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            main {
                padding: 1rem;
            }
            
            .quiz-container {
                padding: 1.5rem;
            }
            
            .button-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            button {
                width: 100%;
            }
            
            h1 {
                font-size: 2rem;
            }
        }

        /* Animation for Correct/Incorrect Feedback */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-feedback {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Loading Indicator */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid #e2e8f0;
            border-radius: 50%;
            border-top-color: #2563eb;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Settings Panel */
        .settings-container {
            margin-bottom: 2rem;
            background-color: #f1f5f9;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .settings-title {
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .settings-options {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .settings-option {
            display: flex;
            align-items: center;
        }

        .settings-option label {
            margin-left: 0.5rem;
        }

        /* Help Panel */
        .help-container {
            background-color: #eff6ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #2563eb;
        }

        .help-title {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-weight: bold;
            color: #1e40af;
        }

        .help-title svg {
            margin-right: 0.5rem;
        }

        .help-content {
            color: #1e3a8a;
        }

        /* Timer */
        .timer-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .timer-icon {
            margin-right: 0.5rem;
        }

        .timer-text {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header>
        <h1>Interactive Knowledge Quiz</h1>
        <p>Test your knowledge with our accessible quiz experience</p>
    </header>
    
    <main id="main-content">
        <div class="help-container" id="help-panel" aria-labelledby="help-title">
            <div class="help-title" id="help-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
                How to Use This Quiz
            </div>
            <div class="help-content">
                <p>This quiz contains multiple-choice questions. Select one answer for each question and click "Submit Answer" to proceed. You'll receive immediate feedback on your answer. At the end, you'll see your final score and a summary of all questions.</p>
                <p>You can use keyboard navigation (Tab key) to move between options and buttons. Press Space or Enter to select an option or activate a button.</p>
            </div>
        </div>
        
        <div class="settings-container" aria-labelledby="settings-title">
            <h2 id="settings-title" class="settings-title">Quiz Settings</h2>
            <div class="settings-options">
                <div class="settings-option">
                    <input type="checkbox" id="show-timer" name="show-timer" aria-describedby="timer-description">
                    <label for="show-timer">Show Timer</label>
                    <span id="timer-description" class="visually-hidden">(Shows a countdown timer for each question)</span>
                </div>
                <div class="settings-option">
                    <input type="checkbox" id="high-contrast" name="high-contrast" aria-describedby="contrast-description">
                    <label for="high-contrast">High Contrast Mode</label>
                    <span id="contrast-description" class="visually-hidden">(Increases color contrast for better visibility)</span>
                </div>
                <div class="settings-option">
                    <input type="checkbox" id="reduce-motion" name="reduce-motion" aria-describedby="motion-description">
                    <label for="reduce-motion">Reduce Animations</label>
                    <span id="motion-description" class="visually-hidden">(Minimizes animations throughout the quiz)</span>
                </div>
            </div>
        </div>
        
        <div class="quiz-container" aria-live="polite">
            <div class="timer-container" id="timer-display" style="display: none;">
                <span class="timer-icon" aria-hidden="true">⏱️</span>
                <span class="timer-text">Time remaining: <span id="timer-count">30</span> seconds</span>
            </div>
            
            <div class="progress-container" aria-labelledby="progress-label">
                <div class="progress-label">
                    <span id="progress-label">Quiz Progress</span>
                    <span id="progress-text">Question 1 of 5</span>
                </div>
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="question-section">
                <div class="question-container">
                    <h2 id="current-question" class="question">Loading question...</h2>
                </div>
                
                <form id="quiz-form">
                    <fieldset class="options-container">
                        <legend class="visually-hidden">Select one answer:</legend>
                        <!-- Options will be dynamically inserted here -->
                    </fieldset>
                </form>
                
                <div id="feedback" class="feedback" role="alert" aria-live="assertive"></div>
                
                <div class="button-container">
                    <button type="button" id="prev-button" class="secondary" disabled aria-label="Go to previous question">Previous</button>
                    <button type="button" id="submit-button" aria-label="Submit your answer">Submit Answer</button>
                    <button type="button" id="next-button" disabled aria-label="Go to next question">Next</button>
                </div>
            </div>
            
            <div id="loading" class="loading" aria-live="polite">
                <div class="loading-spinner" aria-hidden="true"></div>
                <p>Loading quiz questions...</p>
            </div>
            
            <div id="results-section" class="results-container" aria-live="polite">
                <h2>Quiz Results</h2>
                <p>You've completed the quiz! Here's how you did:</p>
                <div class="results-score">
                    <span id="score">0</span>/<span id="total">5</span>
                </div>
                <p class="results-message" id="results-message">Great job!</p>
                
                <h3>Summary of Your Answers</h3>
                <div id="results-summary" class="results-summary">
                    <!-- Summary will be dynamically inserted here -->
                </div>
                
                <button type="button" id="restart-button" aria-label="Restart the quiz">Restart Quiz</button>
            </div>
        </div>
    </main>
    
    <footer>
        <p>© 2023 Interactive Knowledge Quiz. All rights reserved.</p>
        <div class="footer-links">
            <a href="#" aria-label="View accessibility statement">Accessibility</a>
            <a href="#" aria-label="Contact us for support">Contact</a>
            <a href="#" aria-label="View privacy policy">Privacy Policy</a>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Quiz data
            const quizData = [
                {
                    question: "Which planet is known as the Red Planet?",
                    options: ["Venus", "Mars", "Jupiter", "Saturn"],
                    correctAnswer: 1,
                    explanation: "Mars is known as the Red Planet due to its reddish appearance, which is caused by iron oxide (rust) on its surface."
                },
                {
                    question: "What is the largest ocean on Earth?",
                    options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
                    correctAnswer: 3,
                    explanation: "The Pacific Ocean is the largest and deepest ocean on Earth, covering more than 30% of the Earth's surface."
                },
                {
                    question: "Which element has the chemical symbol 'O'?",
                    options: ["Gold", "Oxygen", "Osmium", "Oganesson"],
                    correctAnswer: 1,
                    explanation: "Oxygen has the chemical symbol 'O' on the periodic table. It's essential for human respiration."
                },
                {
                    question: "What is the capital city of Japan?",
                    options: ["Seoul", "Beijing", "Tokyo", "Bangkok"],
                    correctAnswer: 2,
                    explanation: "Tokyo is the capital and most populous city of Japan. It's a major global economic and cultural center."
                },
                {
                    question: "Which famous scientist developed the theory of relativity?",
                    options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Nikola Tesla"],
                    correctAnswer: 1,
                    explanation: "Albert Einstein developed the theory of relativity, which revolutionized our understanding of space, time, and gravity."
                }
            ];
            
            // Quiz state
            let currentQuestion = 0;
            let score = 0;
            let userAnswers = [];
            let answered = false;
            let timerInterval;
            let timeLeft = 30;
            
            // DOM elements
            const questionSection = document.getElementById('question-section');
            const resultsSection = document.getElementById('results-section');
            const loadingSection = document.getElementById('loading');
            const currentQuestionEl = document.getElementById('current-question');
            const optionsContainer = document.querySelector('.options-container');
            const feedbackEl = document.getElementById('feedback');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const submitButton = document.getElementById('submit-button');
            const restartButton = document.getElementById('restart-button');
            const progressText = document.getElementById('progress-text');
            const progressFill = document.querySelector('.progress-fill');
            const progressBar = document.querySelector('.progress-bar');
            const scoreEl = document.getElementById('score');
            const totalEl = document.getElementById('total');
            const resultsMessage = document.getElementById('results-message');
            const resultsSummary = document.getElementById('results-summary');
            const showTimerCheckbox = document.getElementById('show-timer');
            const timerDisplay = document.getElementById('timer-display');
            const timerCount = document.getElementById('timer-count');
            const highContrastCheckbox = document.getElementById('high-contrast');
            const reduceMotionCheckbox = document.getElementById('reduce-motion');
            
            // Initialize the quiz
            function initQuiz() {
                // Show loading state
                questionSection.style.display = 'none';
                resultsSection.style.display = 'none';
                loadingSection.style.display = 'block';
                
                // Simulate loading time
                setTimeout(() => {
                    loadingSection.style.display = 'none';
                    questionSection.style.display = 'block';
                    
                    // Reset quiz state
                    currentQuestion = 0;
                    score = 0;
                    userAnswers = Array(quizData.length).fill(null);
                    
                    // Load first question
                    loadQuestion();
                    updateProgress();
                    
                    // Set up event listeners
                    submitButton.addEventListener('click', submitAnswer);
                    nextButton.addEventListener('click', nextQuestion);
                    prevButton.addEventListener('click', prevQuestion);
                    restartButton.addEventListener('click', restartQuiz);
                    
                    // Settings event listeners
                    showTimerCheckbox.addEventListener('change', toggleTimer);
                    highContrastCheckbox.addEventListener('change', toggleHighContrast);
                    reduceMotionCheckbox.addEventListener('change', toggleReduceMotion);
                    
                    // Check for user preferences
                    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                        reduceMotionCheckbox.checked = true;
                        document.body.classList.add('reduce-motion');
                    }
                    
                    if (window.matchMedia('(prefers-contrast: more)').matches) {
                        highContrastCheckbox.checked = true;
                        document.body.classList.add('high-contrast');
                    }
                }, 1500);
            }
            
            // Load question data
            function loadQuestion() {
                const question = quizData[currentQuestion];
                currentQuestionEl.textContent = question.question;
                
                // Clear previous options
                optionsContainer.innerHTML = '';
                
                // Add new options
                question.options.forEach((option, index) => {
                    const optionId = `option-${index}`;
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.id = optionId;
                    input.name = 'quiz-option';
                    input.value = index;
                    
                    if (userAnswers[currentQuestion] === index) {
                        input.checked = true;
                    }
                    
                    const label = document.createElement('label');
                    label.htmlFor = optionId;
                    label.textContent = option;
                    
                    optionDiv.appendChild(input);
                    optionDiv.appendChild(label);
                    optionsContainer.appendChild(optionDiv);
                });
                
                // Reset feedback
                feedbackEl.style.display = 'none';
                feedbackEl.className = 'feedback';
                feedbackEl.innerHTML = '';
                
                // Update button states
                prevButton.disabled = currentQuestion === 0;
                nextButton.disabled = true;
                submitButton.disabled = userAnswers[currentQuestion] !== null && answered;
                
                // Reset answered state
                answered = userAnswers[currentQuestion] !== null;
                
                if (answered) {
                    showFeedback();
                }
                
                // Reset and start timer if enabled
                if (showTimerCheckbox.checked) {
                    resetTimer();
                }
            }
            
            // Submit answer
            function submitAnswer() {
                const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
                
                if (!selectedOption) {
                    // Alert user to select an option
                    feedbackEl.textContent = 'Please select an answer before submitting.';
                    feedbackEl.className = 'feedback incorrect';
                    feedbackEl.style.display = 'block';
                    
                    // Use animation if animations are not reduced
                    if (!reduceMotionCheckbox.checked) {
                        feedbackEl.classList.add('animate-feedback');
                    }
                    
                    return;
                }
                
                const answer = parseInt(selectedOption.value);
                userAnswers[currentQuestion] = answer;
                
                // Check if answer is correct
                const correctAnswer = quizData[currentQuestion].correctAnswer;
                if (answer === correctAnswer) {
                    score++;
                }
                
                // Show feedback
                showFeedback();
                
                // Update button states
                nextButton.disabled = false;
                submitButton.disabled = true;
                
                // Stop timer if running
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                // Mark as answered
                answered = true;
            }
            
            // Show feedback for current question
            function showFeedback() {
                const question = quizData[currentQuestion];
                const userAnswer = userAnswers[currentQuestion];
                const correctAnswer = question.correctAnswer;
                const isCorrect = userAnswer === correctAnswer;
                
                feedbackEl.innerHTML = '';
                
                // Create feedback icon
                const icon = document.createElement('span');
                icon.className = 'feedback-icon';
                icon.setAttribute('aria-hidden', 'true');
                
                // Create feedback text
                const text = document.createElement('span');
                
                if (isCorrect) {
                    feedbackEl.className = 'feedback correct';
                    icon.textContent = '✓';
                    text.textContent = 'Correct! ' + question.explanation;
                } else {
                    feedbackEl.className = 'feedback incorrect';
                    icon.textContent = '✗';
                    text.textContent = 'Incorrect. The correct answer is ' + 
                        question.options[correctAnswer] + '. ' + question.explanation;
                }
                
                feedbackEl.appendChild(icon);
                feedbackEl.appendChild(text);
                feedbackEl.style.display = 'block';
                
                // Use animation if animations are not reduced
                if (!reduceMotionCheckbox.checked) {
                    feedbackEl.classList.add('animate-feedback');
                }
            }
            
            // Go to next question
            function nextQuestion() {
                if (currentQuestion < quizData.length - 1) {
                    currentQuestion++;
                    loadQuestion();
                    updateProgress();
                } else {
                    showResults();
                }
            }
            
            // Go to previous question
            function prevQuestion() {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    loadQuestion();
                    updateProgress();
                }
            }
            
            // Update progress indicator
            function updateProgress() {
                const progress = ((currentQuestion + 1) / quizData.length) * 100;
                progressText.textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;
                progressFill.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
            }
            
            // Show quiz results
            function showResults() {
                questionSection.style.display = 'none';
                resultsSection.style.display = 'block';
                
                scoreEl.textContent = score;
                totalEl.textContent = quizData.length;
                
                // Set results message based on score
                const percentage = (score / quizData.length) * 100;
                if (percentage >= 80) {
                    resultsMessage.textContent = 'Excellent! You have a great understanding of the topics.';
                } else if (percentage >= 60) {
                    resultsMessage.textContent = 'Good job! You have a solid grasp of most topics.';
                } else if (percentage >= 40) {
                    resultsMessage.textContent = 'Not bad! You're on the right track, but there's room for improvement.';
                } else {
                    resultsMessage.textContent = 'Keep studying! You'll do better next time.';
                }
                
                // Generate summary
                resultsSummary.innerHTML = '';
                quizData.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    const correctAnswer = question.correctAnswer;
                    const isCorrect = userAnswer === correctAnswer;
                    
                    const summaryItem = document.createElement('div');
                    summaryItem.className = isCorrect ? 'summary-item correct' : 'summary-item incorrect';
                    
                    const questionText = document.createElement('div');
                    questionText.className = 'summary-question';
                    questionText.textContent = `${index + 1}. ${question.question}`;
                    
                    const userAnswerText = document.createElement('div');
                    userAnswerText.className = 'summary-answer user-answer';
                    userAnswerText.textContent = `Your answer: ${question.options[userAnswer]}`;
                    
                    summaryItem.appendChild(questionText);
                    summaryItem.appendChild(userAnswerText);
                    
                    if (!isCorrect) {
                        const correctAnswerText = document.createElement('div');
                        correctAnswerText.className = 'summary-answer correct-answer';
                        correctAnswerText.textContent = `Correct answer: ${question.options[correctAnswer]}`;
                        summaryItem.appendChild(correctAnswerText);
                    }
                    
                    resultsSummary.appendChild(summaryItem);
                });
            }
            
            // Restart the quiz
            function restartQuiz() {
                resultsSection.style.display = 'none';
                initQuiz();
            }
            
            // Timer functions
            function startTimer() {
                timeLeft = 30;
                timerCount.textContent = timeLeft;
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timerCount.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        
                        // Auto-submit if not answered
                        if (!answered) {
                            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
                            if (selectedOption) {
                                submitAnswer();
                            } else {
                                // Mark as unanswered
                                userAnswers[currentQuestion] = null;
                                nextQuestion();
                            }
                        }
                    }
                }, 1000);
            }
            
            function resetTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                if (showTimerCheckbox.checked) {
                    timerDisplay.style.display = 'flex';
                    startTimer();
                }
            }
            
            // Toggle timer display
            function toggleTimer() {
                if (showTimerCheckbox.checked) {
                    timerDisplay.style.display = 'flex';
                    resetTimer();
                } else {
                    timerDisplay.style.display = 'none';
                    if (timerInterval) {
                        clearInterval(timerInterval);
                    }
                }
            }
            
            // Toggle high contrast mode
            function toggleHighContrast() {
                if (highContrastCheckbox.checked) {
                    document.body.classList.add('high-contrast');
                } else {
                    document.body.classList.remove('high-contrast');
                }
            }
            
            // Toggle reduced motion
            function toggleReduceMotion() {
                if (reduceMotionCheckbox.checked) {
                    document.body.classList.add('reduce-motion');
                } else {
                    document.body.classList.remove('reduce-motion');
                }
            }
            
            // Add visually-hidden class for screen reader text
            const style = document.createElement('style');
            style.textContent = `
                .visually-hidden {
                    position: absolute;
                    width: 1px;
                    height: 1px;
                    padding: 0;
                    margin: -1px;
                    overflow: hidden;
                    clip: rect(0, 0, 0, 0);
                    white-space: nowrap;
                    border: 0;
                }
            `;
            document.head.appendChild(style);
            
            // Initialize the quiz
            initQuiz();
        });
    </script>
</body>
</html>