<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Accessible Interactive User Registration Form with Real-Time Validation</title>
<style>
  /* Color Palette with 7:1 contrast minimum for text on background */
  :root {
    --color-bg: #1a1a2e;
    --color-bg-alt: #16213e;
    --color-primary: #e94560;
    --color-primary-dark: #b32a43;
    --color-primary-light: #f27a92;
    --color-success: #32a852;
    --color-error: #d93025;
    --color-warning: #f9a825;
    --color-text: #f0f0f0;
    --color-text-alt: #cfcfcf;
    --color-focus-outline: #ffd500;
    --font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }

  /* Reset and base */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: var(--font-family);
    background: linear-gradient(135deg, var(--color-bg) 0%, var(--color-bg-alt) 100%);
    color: var(--color-text);
    line-height: 1.6;
    min-height: 100vh;
    padding: 0 1rem 3rem;
  }

  a:focus, button:focus, input:focus, select:focus, textarea:focus {
    outline: 3px solid var(--color-focus-outline);
    outline-offset: 2px;
  }

  /* Skip link */
  #skip-link {
    position: absolute;
    top: -40px;
    left: 1rem;
    background: var(--color-primary);
    color: var(--color-bg);
    padding: 0.5rem 1rem;
    z-index: 100;
    border-radius: 0 0 4px 4px;
    font-weight: 700;
    text-decoration: none;
    transition: top 0.3s ease;
  }
  #skip-link:focus {
    top: 1rem;
  }

  header, footer, main, nav, section {
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  header {
    padding: 1.5rem 0 1rem;
    text-align: center;
  }
  header h1 {
    font-size: 2rem;
    margin: 0;
    color: var(--color-primary-light);
  }
  header p {
    margin: 0.25rem 0 0;
    font-size: 1rem;
    color: var(--color-text-alt);
  }

  main {
    background-color: var(--color-bg-alt);
    border-radius: 8px;
    padding: 2rem 2rem 3rem;
    margin-top: 2rem;
    box-shadow:
      0 0 8px rgba(0,0,0,0.7),
      inset 0 0 20px rgba(255,255,255,0.05);
  }

  h2 {
    font-size: 1.5rem;
    color: var(--color-primary-light);
    margin-top: 0;
    margin-bottom: 1rem;
  }

  form {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  fieldset {
    border: 2px solid var(--color-primary);
    border-radius: 8px;
    padding: 1rem 1.5rem 1.5rem;
    background: linear-gradient(135deg, #2e2e48 0%, #1a1a2e 100%);
  }

  legend {
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--color-primary-light);
    padding: 0 0.5rem;
  }

  label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--color-text);
  }

  /* Required field indicator */
  .required-indicator {
    color: var(--color-error);
    margin-left: 0.25rem;
  }

  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="tel"] {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 2px solid var(--color-text-alt);
    border-radius: 6px;
    background-color: #252544;
    color: var(--color-text);
    transition: border-color 0.3s ease;
  }
  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="tel"]:focus {
    border-color: var(--color-primary);
    background-color: #2c2c5a;
  }

  /* Error state */
  input[aria-invalid="true"] {
    border-color: var(--color-error);
    background-color: #3f1f1d;
  }

  /* Help text */
  .help-text {
    font-size: 0.875rem;
    color: var(--color-text-alt);
    margin-top: 0.25rem;
  }

  /* Error messages */
  .error-message {
    color: var(--color-error);
    font-weight: 700;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  /* Success messages */
  .success-message {
    color: var(--color-success);
    font-weight: 700;
    font-size: 0.9rem;
    margin-top: 0.25rem;
  }

  /* Submit button */
  button[type="submit"] {
    background-color: var(--color-primary);
    color: var(--color-bg);
    font-weight: 700;
    font-size: 1.125rem;
    padding: 0.75rem 2rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    min-width: 44px;
    min-height: 44px;
    transition: background-color 0.3s ease;
    align-self: start;
  }
  button[type="submit"]:hover,
  button[type="submit"]:focus {
    background-color: var(--color-primary-dark);
  }
  button[type="submit"]:disabled {
    background-color: #7a3a4f;
    cursor: not-allowed;
  }

  /* Submission indicator */
  #submission-status {
    margin-top: 1rem;
    font-weight: 700;
    font-size: 1rem;
    color: var(--color-primary-light);
  }

  /* Responsive */
  @media (min-width: 600px) {
    form {
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }
    fieldset {
      grid-column: span 2;
    }
    #submission-status {
      grid-column: span 2;
    }
  }

  /* Focus visible enhancement */
  :focus-visible {
    outline-offset: 3px;
  }

  /* Vibrant icons for error/success states */
  .input-status-icon {
    display: inline-block;
    width: 1rem;
    height: 1rem;
    vertical-align: middle;
    margin-left: 0.3rem;
    stroke-width: 2;
  }
  .input-status-icon.error {
    stroke: var(--color-error);
  }
  .input-status-icon.success {
    stroke: var(--color-success);
  }

  /* User-selectable foreground/background colors (simple toggle) */
  #color-toggle {
    margin: 1rem auto 2rem;
    display: flex;
    justify-content: center;
    gap: 1rem;
  }
  #color-toggle button {
    background-color: var(--color-primary);
    color: var(--color-bg);
    border: none;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-weight: 600;
    cursor: pointer;
    min-width: 44px;
    min-height: 44px;
    transition: background-color 0.3s ease;
  }
  #color-toggle button:focus {
    outline: 3px solid var(--color-focus-outline);
    outline-offset: 2px;
  }
  #color-toggle button[aria-pressed="true"] {
    background-color: var(--color-primary-light);
    color: var(--color-bg-alt);
  }

  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      transition: none !important;
      animation-duration: 0s !important;
      animation-iteration-count: 1 !important;
    }
  }
</style>
</head>
<body>
<a href="#main-content" id="skip-link">Skip to main content</a>

<header role="banner">
  <h1>User Registration Form</h1>
  <p>Accessible, interactive form with real-time validation and submission feedback</p>
</header>

<nav aria-label="Primary site navigation" role="navigation">
  <ul style="display:flex; justify-content:center; gap:1.5rem; list-style:none; padding:0; margin:0 0 2rem;">
    <li><a href="#form-section" style="color: var(--color-primary-light); text-decoration: underline;">Registration Form</a></li>
    <li><a href="#help-section" style="color: var(--color-primary-light); text-decoration: underline;">Help & Instructions</a></li>
  </ul>
</nav>

<main id="main-content" tabindex="-1" role="main">
  <section id="form-section" aria-labelledby="form-section-heading">
    <h2 id="form-section-heading">Register Your Account</h2>
    <form id="registration-form" novalidate aria-describedby="form-instructions" autocomplete="off" aria-live="polite" aria-atomic="true" aria-relevant="additions removals">
      <p id="form-instructions" class="help-text">
        Please fill out all required fields (<strong><span aria-hidden="true">*</span></strong>) with valid information. Real-time validation will guide you.
      </p>

      <fieldset>
        <legend>Personal Information</legend>

        <div>
          <label for="name-input">Full Name <span class="required-indicator" aria-hidden="true">*</span></label>
          <input 
            type="text" 
            id="name-input" 
            name="name" 
            required 
            aria-required="true" 
            aria-describedby="name-help name-error" 
            aria-invalid="false" 
            autocomplete="name" 
            minlength="2" 
            maxlength="100" 
            pattern="^[a-zA-ZÀ-ÿ ,.'-]+$" 
            inputmode="text"
            placeholder="e.g., Jane Doe"
          />
          <p id="name-help" class="help-text">Enter your full name. Letters, spaces, apostrophes, and hyphens allowed.</p>
          <p id="name-error" class="error-message" aria-live="assertive" aria-atomic="true"></p>
        </div>

        <div>
          <label for="email-input">Email Address <span class="required-indicator" aria-hidden="true">*</span></label>
          <input 
            type="email" 
            id="email-input" 
            name="email" 
            required 
            aria-required="true" 
            aria-describedby="email-help email-error" 
            aria-invalid="false" 
            autocomplete="email" 
            placeholder="e.g., jane@example.com"
          />
          <p id="email-help" class="help-text">Enter a valid email address (e.g., user@example.com).</p>
          <p id="email-error" class="error-message" aria-live="assertive" aria-atomic="true"></p>
        </div>

        <div>
          <label for="password-input">Password <span class="required-indicator" aria-hidden="true">*</span></label>
          <input 
            type="password" 
            id="password-input" 
            name="password" 
            required 
            aria-required="true" 
            aria-describedby="password-help password-error" 
            aria-invalid="false" 
            autocomplete="new-password" 
            minlength="8" 
            maxlength="64" 
            placeholder="At least 8 characters, incl. uppercase, number, special"
            aria-describedby="password-help password-error"
          />
          <p id="password-help" class="help-text">
            Must be 8–64 characters, include uppercase, lowercase, number, and special character.
          </p>
          <p id="password-error" class="error-message" aria-live="assertive" aria-atomic="true"></p>
        </div>

        <div>
          <label for="phone-input">Phone Number <span class="required-indicator" aria-hidden="true">*</span></label>
          <input 
            type="tel" 
            id="phone-input" 
            name="phone" 
            required 
            aria-required="true" 
            aria-describedby="phone-help phone-error" 
            aria-invalid="false" 
            autocomplete="tel" 
            pattern="^\+?[0-9\s\-().]{7,20}$" 
            placeholder="e.g., +1 (555) 123-4567"
            inputmode="tel"
          />
          <p id="phone-help" class="help-text">
            Enter a valid phone number including country code if applicable.
          </p>
          <p id="phone-error" class="error-message" aria-live="assertive" aria-atomic="true"></p>
        </div>
      </fieldset>

      <button type="submit" id="submit-button" aria-live="polite" aria-atomic="true" disabled>
        Register
      </button>

      <div id="submission-status" role="status" aria-live="polite" aria-atomic="true" tabindex="-1"></div>
    </form>
  </section>

  <section id="help-section" aria-labelledby="help-section-heading" style="margin-top:3rem;">
    <h2 id="help-section-heading">Help & Instructions</h2>
    <article>
      <h3>About the Form</h3>
      <p>This form collects your personal information to create an account. All fields marked with <strong><span aria-hidden="true">*</span></strong> are required.</p>
      <p>Real-time validation ensures you enter valid data before submission. Error messages appear below each field if input is invalid, with guidance on how to fix the issue.</p>
    </article>
    <article>
      <h3>Field Requirements</h3>
      <ul>
        <li><strong>Full Name:</strong> Only letters, spaces, apostrophes, commas, periods, and hyphens allowed.</li>
        <li><strong>Email Address:</strong> Must be a valid email format.</li>
        <li><strong>Password:</strong> Minimum 8 characters; must include uppercase, lowercase, number, and special character.</li>
        <li><strong>Phone Number:</strong> Can include digits, spaces, parentheses, dashes, and optional leading + for country code.</li>
      </ul>
    </article>
    <article>
      <h3>Accessibility Features</h3>
      <ul>
        <li>Labels are explicitly associated with inputs for screen reader users.</li>
        <li>Error messages are linked and announced via ARIA live regions.</li>
        <li>Keyboard accessible with visible focus outlines.</li>
        <li>Skip link allows quick navigation to main content.</li>
        <li>Color contrast exceeds AAA standards for readability.</li>
        <li>Context-sensitive help is provided for each field.</li>
      </ul>
    </article>
  </section>
</main>

<footer role="contentinfo" style="text-align:center; margin-top:4rem; color: var(--color-text-alt); font-size: 0.9rem;">
  <p>© 2024 Accessible Web Forms Inc. All rights reserved.</p>
</footer>

<script>
(() => {
  'use strict';

  // Form and elements references
  const form = document.getElementById('registration-form');
  const submitButton = document.getElementById('submit-button');
  const submissionStatus = document.getElementById('submission-status');

  // Input fields
  const inputs = {
    name: form.elements['name'],
    email: form.elements['email'],
    password: form.elements['password'],
    phone: form.elements['phone'],
  };

  // Error message elements
  const errors = {
    name: document.getElementById('name-error'),
    email: document.getElementById('email-error'),
    password: document.getElementById('password-error'),
    phone: document.getElementById('phone-error'),
  };

  // Help text elements (for aria-describedby)
  const helps = {
    name: document.getElementById('name-help'),
    email: document.getElementById('email-help'),
    password: document.getElementById('password-help'),
    phone: document.getElementById('phone-help'),
  };

  // Validation regex and rules
  const validationRules = {
    name: {
      regex: /^[a-zA-ZÀ-ÿ ,.'-]{2,100}$/,
      error: "Name must be 2-100 characters, letters, spaces, apostrophes, commas, periods, or hyphens only.",
    },
    email: {
      // Use HTML5 email type validation, but also a regex for extra robustness
      regex: /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/,
      error: "Please enter a valid email address.",
    },
    password: {
      // Minimum 8 characters, at least one uppercase, one lowercase, one number, one special char
      regex: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=\[{\]};:'",<.>/?\\|`~]).{8,64}$/,
      error: "Password must be 8-64 characters and include uppercase, lowercase, number, and special character.",
    },
    phone: {
      // Allows +, digits, spaces, parentheses, dashes; length 7-20 chars
      regex: /^\+?[0-9\s\-().]{7,20}$/,
      error: "Phone number must be 7-20 digits and may include +, spaces, parentheses, and dashes.",
    },
  };

  // Validate a single input field
  function validateField(fieldName) {
    const input = inputs[fieldName];
    const errorEl = errors[fieldName];
    const helpEl = helps[fieldName];
    const value = input.value.trim();

    // If empty and required, invalid
    if (input.required && value === '') {
      input.setAttribute('aria-invalid', 'true');
      errorEl.textContent = `This field is required.`;
      return false;
    }

    // Validate pattern
    if (value !== '' && !validationRules[fieldName].regex.test(value)) {
      input.setAttribute('aria-invalid', 'true');
      errorEl.textContent = validationRules[fieldName].error;
      return false;
    }

    // Valid input
    input.setAttribute('aria-invalid', 'false');
    errorEl.textContent = '';
    return true;
  }

  // Check all fields and update submit button state
  function validateForm() {
    let allValid = true;
    for (const field in inputs) {
      if (!validateField(field)) {
        allValid = false;
      }
    }
    submitButton.disabled = !allValid;
    return allValid;
  }

  // Real-time validation handlers
  for (const field in inputs) {
    const input = inputs[field];
    input.addEventListener('input', () => {
      validateField(field);
      validateForm();
    });

    // Additional blur validation for accessibility
    input.addEventListener('blur', () => {
      validateField(field);
      validateForm();
    });
  }

  // Form submission handler
  form.addEventListener('submit', event => {
    event.preventDefault();

    // Final validation check before submission
    if (!validateForm()) {
      submissionStatus.textContent = '';
      // Focus first invalid input
      for (const field in inputs) {
        if (inputs[field].getAttribute('aria-invalid') === 'true') {
          inputs[field].focus();
          break;
        }
      }
      return;
    }

    // Disable form inputs and button during "submission"
    submitButton.disabled = true;
    for (const field in inputs) {
      inputs[field].disabled = true;
    }
    submissionStatus.textContent = 'Submitting your registration...';
    submissionStatus.setAttribute('aria-live', 'polite');
    submissionStatus.focus();

    // Simulate async submission (e.g., server call)
    setTimeout(() => {
      submissionStatus.textContent = 'Registration successful! Thank you for registering.';
      submissionStatus.style.color = 'var(--color-success)';
      // Reset form after success
      form.reset();
      for (const field in inputs) {
        inputs[field].disabled = false;
        inputs[field].setAttribute('aria-invalid', 'false');
      }
      submitButton.disabled = true;
      // Move focus back to the first input for new entry
      inputs.name.focus();
    }, 1800);
  });

  // Initial validation on page load to disable submit button
  validateForm();

  // Accessibility: Announce submission status changes
  // Already managed by aria-live on #submission-status

  // Keyboard accessibility enhancements:
  // All inputs and buttons are naturally keyboard accessible.
  // Skip link is provided and visible on focus.

})();
</script>
</body>
</html>