<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessible Task Manager SPA â€“ Personal Dashboard & Task Management (WCAG 2.2 AAA)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Color palette: vibrant, high-contrast, user-selectable -->
  <style>
    :root {
      --color-bg: #fff;
      --color-fg: #10133e;
      --color-accent: #0e76a8;
      --color-accent2: #d72660;
      --color-accent3: #ffd447;
      --color-success: #138a36;
      --color-error: #d72660;
      --color-info: #0e76a8;
      --color-focus: #ffd447;
      --color-focus-outline: #10133e;
      --color-border: #10133e;
      --color-shadow: #ffd447;
      --color-link: #0e76a8;
      --color-nav: #f0f4f8;
      --color-nav-active: #ffd447;
      --color-nav-text: #10133e;
      --color-disabled: #b0b3c6;
      --font-size-base: 1.125rem;
      --font-size-lg: 1.375rem;
      --font-size-xl: 1.75rem;
      --font-size-sm: 1rem;
      --line-height: 1.7;
      --line-spacing: 1.5;
      --para-spacing: 2.25rem;
      --max-line-chars: 80ch;
      --border-radius: 0.5rem;
      --focus-outline-width: 3px;
      --focus-outline-style: solid;
      --focus-outline-color: var(--color-focus);
      --focus-outline-shadow: 0 0 0 3px var(--color-shadow);
      --transition-fast: 0.12s;
      --transition: 0.25s;
      --target-size: 44px;
    }

    html {
      background: linear-gradient(120deg, #fff 0%, #e6f0ff 100%);
      color: var(--color-fg);
      font-size: 18px;
      line-height: var(--line-height);
      font-family: 'Segoe UI', Arial, sans-serif;
      max-width: 100vw;
      min-height: 100vh;
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      padding: 0;
      background: none;
      color: var(--color-fg);
      font-size: var(--font-size-base);
      min-height: 100vh;
      max-width: 100vw;
      overflow-x: hidden;
    }

    /* Skip link */
    .skip-link {
      position: absolute;
      left: 0;
      top: 0;
      z-index: 999;
      background: var(--color-accent);
      color: #fff;
      padding: 0.75em 1.25em;
      font-weight: bold;
      border-radius: var(--border-radius);
      transform: translateY(-120%);
      transition: transform 0.2s;
      outline: none;
      text-decoration: none;
      min-width: 44px;
      min-height: 44px;
    }
    .skip-link:focus, .skip-link:active {
      transform: translateY(0);
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
    }

    /* Layout */
    #app-root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header, footer {
      background: var(--color-accent);
      color: #fff;
      padding: 1.5rem 1rem;
      text-align: center;
      letter-spacing: 0.02em;
    }
    header {
      border-bottom: 5px solid var(--color-accent2);
    }
    main {
      flex: 1 1 auto;
      padding: 2rem 1rem 2rem 1rem;
      max-width: 52rem;
      margin: 0 auto;
      background: var(--color-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 10px 0 rgba(16,19,62,0.10);
      margin-top: 2rem;
      margin-bottom: 2rem;
    }
    footer {
      border-top: 5px solid var(--color-accent3);
      font-size: var(--font-size-sm);
    }

    /* Navigation */
    nav[aria-label] {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      background: var(--color-nav);
      padding: 1rem 0;
      font-size: var(--font-size-lg);
      border-bottom: 2px solid var(--color-border);
    }
    nav[aria-label] ul {
      display: flex;
      gap: 2rem;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    nav[aria-label] li {
      display: flex;
      align-items: center;
      min-width: var(--target-size);
      min-height: var(--target-size);
    }
    nav[aria-label] a, nav[aria-label] button {
      color: var(--color-nav-text);
      background: none;
      border: none;
      font: inherit;
      text-decoration: none;
      padding: 0.75em 1.25em;
      border-radius: var(--border-radius);
      min-width: var(--target-size);
      min-height: var(--target-size);
      transition: background var(--transition-fast), color var(--transition-fast);
      cursor: pointer;
      position: relative;
      outline: none;
    }
    nav[aria-label] a[aria-current="page"], nav[aria-label] button[aria-current="page"] {
      background: var(--color-nav-active);
      color: var(--color-fg);
      font-weight: bold;
      box-shadow: 0 0 0 3px var(--color-shadow);
    }
    nav[aria-label] a:focus, nav[aria-label] button:focus {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
      z-index: 10;
    }
    nav[aria-label] a:active, nav[aria-label] button:active {
      background: var(--color-accent2);
      color: #fff;
    }
    nav[aria-label] .menu-dropdown {
      position: relative;
      display: inline-block;
    }
    nav[aria-label] .dropdown-list {
      display: none;
      position: absolute;
      top: 110%;
      left: 0;
      background: var(--color-nav);
      border: 2px solid var(--color-border);
      border-radius: var(--border-radius);
      box-shadow: 0 4px 16px 0 rgba(16,19,62,0.13);
      min-width: 180px;
      z-index: 99;
      padding: 0.5em 0;
    }
    nav[aria-label] .menu-dropdown[aria-expanded="true"] .dropdown-list {
      display: block;
    }
    nav[aria-label] .dropdown-list li {
      min-width: var(--target-size);
      min-height: var(--target-size);
      padding: 0;
    }
    nav[aria-label] .dropdown-list a {
      width: 100%;
      text-align: left;
      display: block;
      padding: 0.75em 1.25em;
      background: none;
      color: var(--color-nav-text);
      border-radius: 0;
    }
    nav[aria-label] .dropdown-list a:focus {
      background: var(--color-nav-active);
      color: var(--color-fg);
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
    }

    /* Breadcrumbs */
    nav[aria-label="Breadcrumb"] {
      margin: 1.5rem 0 1rem 0;
      font-size: var(--font-size-sm);
      background: none;
      padding: 0;
    }
    nav[aria-label="Breadcrumb"] ol {
      list-style: none;
      display: flex;
      gap: 0.5em;
      padding: 0;
      margin: 0;
      flex-wrap: wrap;
    }
    nav[aria-label="Breadcrumb"] li:not(:last-child)::after {
      content: 'â€º';
      margin: 0 0.5em;
      color: var(--color-accent2);
    }
    nav[aria-label="Breadcrumb"] a {
      color: var(--color-link);
      text-decoration: underline;
      font-weight: 500;
      outline: none;
      min-width: var(--target-size);
      min-height: var(--target-size);
    }
    nav[aria-label="Breadcrumb"] a:focus {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
      background: var(--color-nav-active);
      color: var(--color-fg);
    }
    nav[aria-label="Breadcrumb"] li[aria-current="page"] {
      font-weight: bold;
      color: var(--color-fg);
      text-decoration: none;
    }

    /* Dashboard Layout */
    .dashboard-layout {
      display: flex;
      flex-direction: row;
      gap: 2.5rem;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    .dashboard-main {
      flex: 2 1 350px;
      min-width: 320px;
      max-width: 700px;
    }
    .dashboard-sidebar {
      flex: 1 1 200px;
      min-width: 200px;
      max-width: 300px;
      background: linear-gradient(135deg, #ffd447 0%, #ffeab6 100%);
      border-radius: var(--border-radius);
      box-shadow: 0 1px 8px 0 rgba(215,38,96,0.10);
      padding: 1.25rem 1rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      color: #10133e;
    }

    /* Cards */
    .card {
      background: linear-gradient(120deg, #fff 60%, #f0f4f8 100%);
      border: 2px solid var(--color-border);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 10px 0 rgba(16,19,62,0.10);
      margin-bottom: 2rem;
      padding: 1.5rem 1.25rem;
      max-width: 100%;
      color: var(--color-fg);
    }

    /* Task List/Table */
    .task-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: none;
      margin-bottom: 1.5rem;
      font-size: var(--font-size-base);
    }
    .task-table th, .task-table td {
      text-align: left;
      padding: 0.75em 0.5em;
      border-bottom: 1px solid var(--color-border);
      vertical-align: middle;
      max-width: 200px;
      word-break: break-word;
    }
    .task-table th {
      background: var(--color-accent3);
      color: var(--color-fg);
      font-weight: bold;
      border-top: 2px solid var(--color-border);
    }
    .task-table tr:focus-within, .task-table tr.selected {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
      background: #fffbe6;
    }
    .task-table tr.completed td {
      color: var(--color-success);
      text-decoration: line-through;
    }
    .task-table td .status-indicator {
      display: inline-block;
      width: 1.25em;
      height: 1.25em;
      border-radius: 50%;
      margin-right: 0.5em;
      border: 2px solid var(--color-border);
      vertical-align: middle;
      background: var(--color-success);
    }
    .task-table td .status-indicator.incomplete {
      background: var(--color-error);
    }
    .task-table td .status-indicator.in-progress {
      background: var(--color-accent2);
    }
    .task-table td .status-indicator.completed {
      background: var(--color-success);
    }

    /* Buttons */
    .btn, button, input[type="submit"], input[type="button"] {
      font: inherit;
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75em 1.25em;
      min-width: var(--target-size);
      min-height: var(--target-size);
      cursor: pointer;
      background: var(--color-accent);
      color: #fff;
      font-weight: bold;
      transition: background var(--transition), color var(--transition);
      outline: none;
      margin-right: 0.5em;
      margin-bottom: 0.5em;
      box-shadow: 0 1px 3px 0 rgba(16,19,62,0.09);
    }
    .btn:focus, button:focus, input[type="submit"]:focus, input[type="button"]:focus {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
      background: var(--color-focus);
      color: var(--color-fg);
    }
    .btn[aria-disabled="true"], button[aria-disabled="true"], input[disabled] {
      background: var(--color-disabled);
      color: #fff;
      cursor: not-allowed;
    }
    .btn-secondary {
      background: var(--color-accent2);
      color: #fff;
    }
    .btn-secondary:focus {
      background: var(--color-focus);
      color: var(--color-fg);
    }
    .btn-outline {
      background: #fff;
      color: var(--color-accent);
      border: 2px solid var(--color-accent);
    }
    .btn-outline:focus {
      background: var(--color-focus);
      color: var(--color-fg);
    }
    .btn-success {
      background: var(--color-success);
      color: #fff;
    }
    .btn-success:focus {
      background: var(--color-focus);
      color: var(--color-fg);
    }
    .btn-danger {
      background: var(--color-error);
      color: #fff;
    }
    .btn-danger:focus {
      background: var(--color-focus);
      color: var(--color-fg);
    }

    /* Forms */
    form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      max-width: 500px;
      margin: 0 auto;
    }
    fieldset {
      border: 2px solid var(--color-accent3);
      border-radius: var(--border-radius);
      padding: 1.5rem 1.25rem;
      margin-bottom: 2rem;
      background: #fffbe6;
      min-width: 0;
    }
    legend {
      font-size: var(--font-size-lg);
      font-weight: bold;
      color: var(--color-accent2);
      padding: 0 0.5em;
      margin-bottom: 1rem;
      letter-spacing: 0.02em;
    }
    label {
      font-weight: 500;
      margin-bottom: 0.25em;
      display: inline-block;
      color: var(--color-fg);
      font-size: var(--font-size-base);
    }
    input, select, textarea {
      font: inherit;
      padding: 0.75em 1em;
      border-radius: var(--border-radius);
      border: 2px solid var(--color-border);
      min-width: var(--target-size);
      min-height: var(--target-size);
      background: #fff;
      color: var(--color-fg);
      margin-bottom: 0.25em;
      outline: none;
      transition: border var(--transition), box-shadow var(--transition);
      width: 100%;
      box-sizing: border-box;
      font-size: var(--font-size-base);
      line-height: var(--line-height);
    }
    input:focus, select:focus, textarea:focus {
      border: 2px solid var(--color-focus);
      box-shadow: var(--focus-outline-shadow);
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      background: #fffbe6;
    }
    input[aria-invalid="true"], textarea[aria-invalid="true"], select[aria-invalid="true"] {
      border: 2px solid var(--color-error);
      background: #fff0f3;
    }
    .required-indicator {
      color: var(--color-error);
      font-weight: bold;
      margin-left: 0.25em;
      font-size: var(--font-size-base);
      vertical-align: super;
    }
    .form-help {
      color: var(--color-accent2);
      font-size: var(--font-size-sm);
      margin-top: 0.25em;
      margin-bottom: 0.5em;
      display: block;
    }
    .form-error {
      color: var(--color-error);
      font-size: var(--font-size-sm);
      margin-top: 0.25em;
      margin-bottom: 0.5em;
      display: block;
      font-weight: bold;
    }
    .form-success {
      color: var(--color-success);
      font-size: var(--font-size-sm);
      margin-top: 0.25em;
      margin-bottom: 0.5em;
      display: block;
      font-weight: bold;
    }
    .form-group {
      margin-bottom: 1.25rem;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(16,19,62,0.7);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity var(--transition);
    }
    .modal {
      background: #fff;
      color: var(--color-fg);
      border-radius: var(--border-radius);
      box-shadow: 0 8px 32px 0 rgba(16,19,62,0.18);
      max-width: 450px;
      width: 90vw;
      padding: 2.25rem 2rem 2rem 2rem;
      position: relative;
      outline: none;
      font-size: var(--font-size-base);
    }
    .modal-close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: var(--color-error);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: var(--target-size);
      height: var(--target-size);
      font-size: var(--font-size-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background var(--transition);
      outline: none;
    }
    .modal-close-btn:focus {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color);
      box-shadow: var(--focus-outline-shadow);
      background: var(--color-focus);
      color: var(--color-fg);
    }

    /* Status messages */
    [role="status"], [role="alert"] {
      margin: 1rem 0;
      font-size: var(--font-size-base);
      padding: 1rem 1.25rem;
      border-radius: var(--border-radius);
      background: #fffbe6;
      color: var(--color-fg);
      border: 2px solid var(--color-accent3);
      font-weight: 500;
    }
    [role="alert"] {
      background: #fff0f3;
      color: var(--color-error);
      border: 2px solid var(--color-error);
    }

    /* Search */
    .search-bar {
      display: flex;
      align-items: center;
      gap: 0.75em;
      margin-bottom: 1.25em;
    }
    .search-bar input[type="search"] {
      flex: 1 1 120px;
      min-width: 120px;
      font-size: var(--font-size-base);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .dashboard-layout {
        flex-direction: column;
        gap: 2rem;
      }
      .dashboard-sidebar {
        max-width: 100%;
        margin: 0;
      }
      main {
        margin-top: 1rem;
        margin-bottom: 1rem;
      }
    }
    @media (max-width: 600px) {
      nav[aria-label] ul {
        flex-direction: column;
        gap: 1rem;
      }
      main {
        padding: 1rem 0.25rem;
      }
      .dashboard-layout {
        gap: 1rem;
      }
    }

    /* Enhanced focus indicators */
    :focus-visible {
      outline: var(--focus-outline-width) var(--focus-outline-style) var(--focus-outline-color) !important;
      box-shadow: var(--focus-outline-shadow) !important;
    }

    /* Color/contrast user preferences */
    .user-theme-dark {
      --color-bg: #10133e;
      --color-fg: #fff;
      --color-accent: #0e76a8;
      --color-accent2: #d72660;
      --color-accent3: #ffd447;
      --color-success: #44d980;
      --color-error: #ff5b5b;
      --color-info: #3ec6e0;
      --color-focus: #ffd447;
      --color-focus-outline: #fff;
      --color-border: #ffd447;
      --color-shadow: #ffd447;
      --color-link: #ffd447;
      --color-nav: #23255b;
      --color-nav-active: #ffd447;
      --color-nav-text: #fff;
      --color-disabled: #6d6d7c;
      background: linear-gradient(120deg, #23255b 0%, #10133e 100%);
    }
    .user-theme-high-contrast {
      --color-bg: #fff;
      --color-fg: #000;
      --color-accent: #000;
      --color-accent2: #0057b7;
      --color-accent3: #ffd600;
      --color-success: #138a36;
      --color-error: #d72660;
      --color-info: #0057b7;
      --color-focus: #ffd600;
      --color-focus-outline: #000;
      --color-border: #000;
      --color-shadow: #ffd600;
      --color-link: #0057b7;
      --color-nav: #f7f7f7;
      --color-nav-active: #ffd600;
      --color-nav-text: #000;
      --color-disabled: #b0b3c6;
      background: #fff;
    }

    /* Line spacing, paragraph spacing, max line length */
    p, li, label, input, textarea, select {
      line-height: var(--line-spacing);
      max-width: var(--max-line-chars);
    }
    p {
      margin-bottom: var(--para-spacing);
    }
    ul, ol {
      margin-bottom: var(--para-spacing);
    }
    /* Prevent text justification */
    p, li, label, input, textarea, select, h1, h2, h3, h4, h5, h6 {
      text-align: left;
      text-justify: none;
    }

    /* Animation: prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        transition: none !important;
        animation-duration: 0.001s !important;
        animation-iteration-count: 1 !important;
      }
    }
  </style>
  <!-- React and Babel for SPA functionality (inlined for single-file, no external dependencies) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div id="app-root"></div>
  <script type="text/babel">

    /*********************************
     * Accessibility Utility Functions
     *********************************/

    // Focus trap for modals (no keyboard trap elsewhere)
    function useFocusTrap(ref, isActive) {
      React.useEffect(() => {
        if (!isActive || !ref.current) return;
        const node = ref.current;
        const focusable = node.querySelectorAll(
          'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'
        );
        if (focusable.length === 0) return;
        const first = focusable[0];
        const last = focusable[focusable.length - 1];

        function handleKey(e) {
          if (e.key === 'Tab') {
            if (e.shiftKey) {
              if (document.activeElement === first) {
                e.preventDefault();
                last.focus();
              }
            } else {
              if (document.activeElement === last) {
                e.preventDefault();
                first.focus();
              }
            }
          }
        }
        node.addEventListener('keydown', handleKey);
        // Focus first focusable element
        first.focus();
        return () => node.removeEventListener('keydown', handleKey);
      }, [isActive, ref]);
    }

    // Unique ID generator for ARIA, etc.
    let uniqueIdCounter = 0;
    function uniqueId(prefix = 'id') {
      uniqueIdCounter += 1;
      return `${prefix}-${uniqueIdCounter}`;
    }

    // Enhanced focus management for menu/keyboard navigation
    function useEnhancedFocus(ref, isActive) {
      React.useEffect(() => {
        if (isActive && ref.current) {
          ref.current.focus();
        }
      }, [isActive, ref]);
    }

    // Context for user theme (foreground/background color selection)
    const ThemeContext = React.createContext();

    /*********************************
     * Modal Dialog (Accessible)
     *********************************/
    function Modal({ isOpen, onClose, title, children, labelledById, describedById }) {
      const modalRef = React.useRef(null);
      useFocusTrap(modalRef, isOpen);

      React.useEffect(() => {
        function onEsc(e) {
          if (isOpen && e.key === 'Escape') {
            onClose();
          }
        }
        if (isOpen) {
          document.body.style.overflow = 'hidden';
          window.addEventListener('keydown', onEsc);
        }
        return () => {
          document.body.style.overflow = '';
          window.removeEventListener('keydown', onEsc);
        };
      }, [isOpen, onClose]);

      if (!isOpen) return null;
      return (
        <div
          className="modal-backdrop"
          role="dialog"
          aria-modal="true"
          aria-labelledby={labelledById}
          aria-describedby={describedById}
          tabIndex="-1"
        >
          <div className="modal" ref={modalRef}>
            <button
              className="modal-close-btn"
              aria-label="Close dialog"
              onClick={onClose}
              autoFocus
              type="button"
            >
              <span aria-hidden="true">Ã—</span>
            </button>
            {children}
          </div>
        </div>
      );
    }

    /*********************************
     * Accessible Dropdown Menu
     *********************************/
    function DropdownMenu({ label, children, id, menuId, active, setActive, buttonRef }) {
      const menuRef = React.useRef(null);

      // Keyboard navigation for menu
      React.useEffect(() => {
        if (!active) return;
        function handleKey(e) {
          if (e.key === 'Escape') {
            setActive(false);
            buttonRef.current && buttonRef.current.focus();
          }
        }
        document.addEventListener('keydown', handleKey);
        return () => document.removeEventListener('keydown', handleKey);
      }, [active, setActive, buttonRef]);

      // Dismiss on outside click
      React.useEffect(() => {
        if (!active) return;
        function handleClick(e) {
          if (
            menuRef.current &&
            !menuRef.current.contains(e.target) &&
            buttonRef.current &&
            !buttonRef.current.contains(e.target)
          ) {
            setActive(false);
          }
        }
        document.addEventListener('mousedown', handleClick);
        return () => document.removeEventListener('mousedown', handleClick);
      }, [active, setActive, buttonRef]);

      return (
        <div
          className="menu-dropdown"
          aria-haspopup="true"
          aria-expanded={active}
        >
          <button
            ref={buttonRef}
            aria-controls={menuId}
            aria-haspopup="true"
            aria-expanded={active}
            aria-label={label}
            type="button"
            onClick={() => setActive((prev) => !prev)}
            onKeyDown={(e) => {
              if (e.key === 'ArrowDown' || e.key === 'Enter' || e.key === ' ') {
                setActive(true);
                setTimeout(() => {
                  if (menuRef.current) {
                    const firstItem = menuRef.current.querySelector('a,button');
                    if (firstItem) firstItem.focus();
                  }
                }, 10);
              }
            }}
          >
            {label}
            <span aria-hidden="true" style={{marginLeft: '0.5em'}}>â–¼</span>
          </button>
          <ul
            className="dropdown-list"
            id={menuId}
            role="menu"
            ref={menuRef}
            tabIndex="-1"
            aria-label={label}
          >
            {children}
          </ul>
        </div>
      );
    }

    /*********************************
     * Accessible Breadcrumbs
     *********************************/
    function Breadcrumbs({ items }) {
      return (
        <nav aria-label="Breadcrumb">
          <ol>
            {items.map((item, i) =>
              <li key={item.label} aria-current={i === items.length - 1 ? "page" : undefined}>
                {i === items.length - 1 ? (
                  item.label
                ) : (
                  <a href={item.href} onClick={item.onClick}>{item.label}</a>
                )}
              </li>
            )}
          </ol>
        </nav>
      );
    }

    /*********************************
     * Color/Contrast User Preferences
     *********************************/
    function ThemeSelector() {
      const { theme, setTheme } = React.useContext(ThemeContext);
      return (
        <fieldset aria-labelledby="theme-selector-legend" style={{marginBottom: '1rem'}}>
          <legend id="theme-selector-legend">Color and Contrast Settings</legend>
          <div role="group" aria-label="Select foreground and background color scheme">
            <label>
              <input
                type="radio"
                name="theme"
                value="default"
                checked={theme === 'default'}
                onChange={() => setTheme('default')}
                aria-checked={theme === 'default'}
                style={{marginRight: '0.5em'}}
              />
              Default (Vibrant)
            </label>
            <label style={{marginLeft: '1.5em'}}>
              <input
                type="radio"
                name="theme"
                value="dark"
                checked={theme === 'dark'}
                onChange={() => setTheme('dark')}
                aria-checked={theme === 'dark'}
                style={{marginRight: '0.5em'}}
              />
              Dark
            </label>
            <label style={{marginLeft: '1.5em'}}>
              <input
                type="radio"
                name="theme"
                value="high-contrast"
                checked={theme === 'high-contrast'}
                onChange={() => setTheme('high-contrast')}
                aria-checked={theme === 'high-contrast'}
                style={{marginRight: '0.5em'}}
              />
              High Contrast
            </label>
          </div>
          <span className="form-help" id="theme-selector-help">
            You can select your preferred foreground and background color scheme for improved readability and comfort.
          </span>
        </fieldset>
      );
    }

    /*********************************
     * Accessible Authentication Form
     *********************************/
    function LoginForm({ onLogin, error, loading, help }) {
      // Simulated accessible authentication with copy/paste, show password, and help
      const [email, setEmail] = React.useState('');
      const [password, setPassword] = React.useState('');
      const [showPassword, setShowPassword] = React.useState(false);
      const [formError, setFormError] = React.useState('');
      const [touched, setTouched] = React.useState({email: false, password: false});
      const emailInputId = React.useRef(uniqueId('email')).current;
      const passwordInputId = React.useRef(uniqueId('password')).current;
      const errorId = React.useRef(uniqueId('login-error')).current;
      const helpId = React.useRef(uniqueId('login-help')).current;

      function validate() {
        if (!email.trim()) {
          setFormError('Email address is required.');
          return false;
        }
        if (!/\S+@\S+\.\S+/.test(email)) {
          setFormError('Please enter a valid email address.');
          return false;
        }
        if (!password) {
          setFormError('Password is required.');
          return false;
        }
        setFormError('');
        return true;
      }

      function handleSubmit(e) {
        e.preventDefault();
        setTouched({email: true, password: true});
        if (validate()) {
          onLogin(email, password);
        }
      }

      return (
        <form aria-labelledby="login-form-legend" onSubmit={handleSubmit} noValidate>
          <fieldset>
            <legend id="login-form-legend">Sign In</legend>
            <div className="form-group">
              <label htmlFor={emailInputId}>
                Email address
                <span className="required-indicator" aria-hidden="true">*</span>
              </label>
              <input
                id={emailInputId}
                type="email"
                autoComplete="email"
                required
                aria-required="true"
                aria-invalid={formError && touched.email ? "true" : "false"}
                aria-describedby={helpId + ' ' + (formError ? errorId : '')}
                value={email}
                onChange={e => setEmail(e.target.value)}
                onBlur={() => setTouched(t => ({...t, email: true}))}
                minLength={5}
                maxLength={60}
              />
              <span id={helpId} className="form-help">
                Enter your registered email address. <a href="#help-auth" tabIndex="0">Need help?</a>
              </span>
              {formError && touched.email && (
                <span className="form-error" id={errorId} role="alert">
                  {formError}
                </span>
              )}
            </div>
            <div className="form-group">
              <label htmlFor={passwordInputId}>
                Password
                <span className="required-indicator" aria-hidden="true">*</span>
              </label>
              <input
                id={passwordInputId}
                type={showPassword ? "text" : "password"}
                autoComplete="current-password"
                required
                aria-required="true"
                aria-invalid={formError && touched.password ? "true" : "false"}
                aria-describedby={helpId + ' ' + (formError ? errorId : '')}
                value={password}
                onChange={e => setPassword(e.target.value)}
                onBlur={() => setTouched(t => ({...t, password: true}))}
                minLength={4}
                maxLength={32}
              />
              <div>
                <label>
                  <input
                    type="checkbox"
                    checked={showPassword}
                    onChange={() => setShowPassword(p => !p)}
                    aria-checked={showPassword}
                    style={{marginRight: '0.5em'}}
                  />
                  Show password
                </label>
              </div>
              <span className="form-help" id={helpId + '-password'}>
                Password can be pasted or revealed for assistance. <a href="#help-auth" tabIndex="0">Need help?</a>
              </span>
              {formError && touched.password && (
                <span className="form-error" id={errorId + '-password'} role="alert">
                  {formError}
                </span>
              )}
            </div>
            <button type="submit" className="btn btn-success" disabled={loading} aria-disabled={loading}>
              {loading ? 'Signing inâ€¦' : 'Sign in'}
            </button>
            {error && (
              <span className="form-error" role="alert" aria-live="assertive">
                {error}
              </span>
            )}
            {help && (
              <span className="form-help" id="help-auth">
                <strong>Authentication Help:</strong> If you have trouble signing in, you may copy/paste your password or use the "Show password" option. For further assistance, contact support@example.com.
              </span>
            )}
          </fieldset>
        </form>
      );
    }

    /*********************************
     * Accessible Task Table/List
     *********************************/
    function TaskTable({ tasks, onToggleComplete, onEdit, onDelete, filter, search, ariaDescribedBy }) {
      // Filtering and searching
      const filtered = tasks.filter(task => {
        if (filter === 'all') return true;
        if (filter === 'completed') return task.completed;
        if (filter === 'incomplete') return !task.completed;
        if (filter === 'in-progress') return !task.completed && task.inProgress;
        return true;
      }).filter(task => {
        if (!search) return true;
        return task.title.toLowerCase().includes(search.toLowerCase()) ||
          (task.description && task.description.toLowerCase().includes(search.toLowerCase()));
      });

      return (
        <div>
          <table className="task-table" aria-describedby={ariaDescribedBy}>
            <caption className="form-help" id={ariaDescribedBy}>
              Your personal task list. Use the controls to mark as complete, edit, or delete tasks. Status indicators: 
              <span style={{marginLeft: '0.5em'}}><span className="status-indicator incomplete" aria-label="Incomplete"></span>Incomplete</span>
              <span style={{marginLeft: '1em'}}><span className="status-indicator in-progress" aria-label="In Progress"></span>In Progress</span>
              <span style={{marginLeft: '1em'}}><span className="status-indicator completed" aria-label="Completed"></span>Completed</span>
            </caption>
            <thead>
              <tr>
                <th scope="col">Status</th>
                <th scope="col">Task</th>
                <th scope="col">Description</th>
                <th scope="col">Due</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              {filtered.length === 0 ? (
                <tr>
                  <td colSpan="5" style={{textAlign: 'center'}}>
                    <span role="status">No tasks found for your current filter/search.</span>
                  </td>
                </tr>
              ) : filtered.map((task, i) => (
                <tr key={task.id} className={task.completed ? "completed" : ""}>
                  <td>
                    <span
                      className={
                        "status-indicator" +
                        (task.completed
                          ? " completed"
                          : task.inProgress
                          ? " in-progress"
                          : " incomplete")
                      }
                      aria-label={
                        task.completed
                          ? "Completed"
                          : task.inProgress
                          ? "In Progress"
                          : "Incomplete"
                      }
                      title={
                        task.completed
                          ? "Completed"
                          : task.inProgress
                          ? "In Progress"
                          : "Incomplete"
                      }
                    ></span>
                  </td>
                  <td>{task.title}</td>
                  <td>{task.description}</td>
                  <td>
                    {task.dueDate ? (
                      <time dateTime={task.dueDate}>
                        {new Date(task.dueDate).toLocaleDateString()}
                      </time>
                    ) : (
                      <span aria-label="No due date">â€”</span>
                    )}
                  </td>
                  <td>
                    <button
                      className="btn btn-success"
                      aria-label={task.completed ? "Mark as incomplete" : "Mark as complete"}
                      title={task.completed ? "Mark as incomplete" : "Mark as complete"}
                      onClick={() => onToggleComplete(task.id)}
                      style={{marginRight: '0.25em'}}
                    >
                      {task.completed ? (
                        <span aria-hidden="true">â†º</span>
                      ) : (
                        <span aria-hidden="true">âœ“</span>
                      )}
                    </button>
                    <button
                      className="btn btn-outline"
                      aria-label={`Edit task: ${task.title}`}
                      title="Edit"
                      onClick={() => onEdit(task)}
                      style={{marginRight: '0.25em'}}
                    >
                      <span aria-hidden="true">âœŽ</span>
                    </button>
                    <button
                      className="btn btn-danger"
                      aria-label={`Delete task: ${task.title}`}
                      title="Delete"
                      onClick={() => onDelete(task)}
                    >
                      <span aria-hidden="true">ðŸ—‘</span>
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      );
    }

    /*********************************
     * Accessible Add/Edit Task Form
     *********************************/
    function TaskForm({ onSave, onCancel, initial, ariaLabelledBy, ariaDescribedBy }) {
      const [title, setTitle] = React.useState(initial?.title || '');
      const [description, setDescription] = React.useState(initial?.description || '');
      const [dueDate, setDueDate] = React.useState(initial?.dueDate || '');
      const [inProgress, setInProgress] = React.useState(initial?.inProgress || false);
      const [completed, setCompleted] = React.useState(initial?.completed || false);
      const [formError, setFormError] = React.useState('');
      const [touched, setTouched] = React.useState({title: false, description: false});
      const titleId = React.useRef(uniqueId('task-title')).current;
      const descId = React.useRef(uniqueId('task-desc')).current;
      const dueId = React.useRef(uniqueId('task-due')).current;
      const errorId = React.useRef(uniqueId('task-error')).current;

      function validate() {
        if (!title.trim()) {
          setFormError('Task title is required.');
          return false;
        }
        setFormError('');
        return true;
      }

      function handleSubmit(e) {
        e.preventDefault();
        setTouched({title: true, description: true});
        if (validate()) {
          onSave({
            ...initial,
            title: title.trim(),
            description: description.trim(),
            dueDate: dueDate ? dueDate : null,
            inProgress: inProgress && !completed,
            completed,
          });
        }
      }

      return (
        <form aria-labelledby={ariaLabelledBy} aria-describedby={ariaDescribedBy + ' ' + (formError ? errorId : '')} onSubmit={handleSubmit} noValidate>
          <fieldset>
            <legend id={ariaLabelledBy}>{initial ? "Edit Task" : "Add New Task"}</legend>
            <div className="form-group">
              <label htmlFor={titleId}>
                Task title
                <span className="required-indicator" aria-hidden="true">*</span>
              </label>
              <input
                id={titleId}
                type="text"
                required
                aria-required="true"
                autoComplete="off"
                aria-invalid={formError && touched.title ? "true" : "false"}
                aria-describedby={ariaDescribedBy + ' ' + (formError ? errorId : '')}
                value={title}
                onChange={e => setTitle(e.target.value)}
                onBlur={() => setTouched(t => ({...t, title: true}))}
                maxLength={60}
              />
              <span className="form-help" id={ariaDescribedBy}>
                Enter a brief, descriptive title for your task.
              </span>
              {formError && touched.title && (
                <span className="form-error" id={errorId} role="alert">
                  {formError}
                </span>
              )}
            </div>
            <div className="form-group">
              <label htmlFor={descId}>
                Description
              </label>
              <textarea
                id={descId}
                aria-describedby={ariaDescribedBy}
                value={description}
                onChange={e => setDescription(e.target.value)}
                maxLength={250}
                rows={3}
              />
              <span className="form-help">
                (Optional) Add details or steps for your task.
              </span>
            </div>
            <div className="form-group">
              <label htmlFor={dueId}>
                Due date
              </label>
              <input
                id={dueId}
                type="date"
                aria-describedby={ariaDescribedBy}
                value={dueDate || ''}
                onChange={e => setDueDate(e.target.value)}
              />
              <span className="form-help">
                (Optional) Set a due date for your task.
              </span>
            </div>
            <div className="form-group">
              <label>
                <input
                  type="checkbox"
                  checked={inProgress}
                  onChange={e => setInProgress(e.target.checked)}
                  aria-checked={inProgress}
                  disabled={completed}
                  style={{marginRight: '0.5em'}}
                />
                Mark as In Progress
              </label>
              <label style={{marginLeft: '1.5em'}}>
                <input
                  type="checkbox"
                  checked={completed}
                  onChange={e => setCompleted(e.target.checked)}
                  aria-checked={completed}
                  style={{marginRight: '0.5em'}}
                />
                Mark as Completed
              </label>
            </div>
            <div>
              <button type="submit" className="btn btn-success" aria-label={initial ? "Save changes" : "Add task"}>
                {initial ? "Save" : "Add"}
              </button>
              <button type="button" className="btn btn-outline" onClick={onCancel} aria-label="Cancel">
                Cancel
              </button>
            </div>
          </fieldset>
        </form>
      );
    }

    /*********************************
     * Accessible Search Bar
     *********************************/
    function SearchBar({ value, onChange, ariaLabelledBy, ariaDescribedBy }) {
      const inputId = React.useRef(uniqueId('search')).current;
      return (
        <div className="search-bar" role="search">
          <label htmlFor={inputId} id={ariaLabelledBy} style={{fontWeight: 500, marginRight: '0.5em'}}>
            Search tasks
          </label>
          <input
            id={inputId}
            type="search"
            autoComplete="off"
            aria-label="Search tasks"
            aria-describedby={ariaDescribedBy}
            value={value}
            onChange={e => onChange(e.target.value)}
            placeholder="Enter keywords"
            style={{maxWidth: '260px'}}
          />
        </div>
      );
    }

    /*********************************
     * Dashboard Sidebar
     *********************************/
    function DashboardSidebar({ user, stats, onLogout }) {
      return (
        <aside className="dashboard-sidebar" aria-labelledby="sidebar-title">
          <h2 id="sidebar-title" style={{fontSize: '1.2rem', marginTop: 0}}>User Info</h2>
          <dl>
            <dt>Name:</dt>
            <dd>{user.name}</dd>
            <dt>Email:</dt>
            <dd>{user.email}</dd>
          </dl>
          <h3 style={{fontSize: '1.1rem', marginTop: '1.5em'}}>Task Stats</h3>
          <ul>
            <li><span aria-label="Total tasks">{stats.total}</span> total</li>
            <li><span aria-label="Completed tasks">{stats.completed}</span> completed</li>
            <li><span aria-label="In progress tasks">{stats.inProgress}</span> in progress</li>
            <li><span aria-label="Incomplete tasks">{stats.incomplete}</span> incomplete</li>
          </ul>
          <button className="btn btn-danger" onClick={onLogout} aria-label="Sign out">
            Sign out
          </button>
        </aside>
      );
    }

    /*********************************
     * Main App
     *********************************/
    function App() {
      // App state
      const [user, setUser] = React.useState(null);
      const [tasks, setTasks] = React.useState([]);
      const [authError, setAuthError] = React.useState('');
      const [authLoading, setAuthLoading] = React.useState(false);
      const [showHelp, setShowHelp] = React.useState(false);
      const [showAddModal, setShowAddModal] = React.useState(false);
      const [editTask, setEditTask] = React.useState(null);
      const [showDeleteModal, setShowDeleteModal] = React.useState(false);
      const [deleteTask, setDeleteTask] = React.useState(null);
      const [taskFilter, setTaskFilter] = React.useState('all');
      const [search, setSearch] = React.useState('');
      const [statusMsg, setStatusMsg] = React.useState('');
      const [theme, setTheme] = React.useState('default');
      const [showThemeModal, setShowThemeModal] = React.useState(false);

      // Simulated user database (for demo)
      const users = [
        {
          id: 1,
          name: "Alex Lee",
          email: "alex@example.com",
          password: "Password123!", // Not secure, for demo only
        }
      ];

      // Simulated authentication (AAA: allows copy/paste, show/hide, no cognitive test)
      function handleLogin(email, password) {
        setAuthLoading(true);
        setTimeout(() => {
          const found = users.find(
            u => u.email.toLowerCase() === email.toLowerCase() && u.password === password
          );
          if (found) {
            setUser({ id: found.id, name: found.name, email: found.email });
            setAuthError('');
            // Load demo tasks for this user
            setTasks([
              {
                id: 1,
                title: "Read accessibility guidelines",
                description: "Review WCAG 2.2 AAA requirements and checklists.",
                dueDate: new Date(Date.now() + 2 * 86400000).toISOString().slice(0, 10),
                completed: false,
                inProgress: true,
              },
              {
                id: 2,
                title: "Write project proposal",
                description: "Draft a proposal for the new web project.",
                dueDate: new Date(Date.now() + 5 * 86400000).toISOString().slice(0, 10),
                completed: false,
                inProgress: false,
              },
              {
                id: 3,
                title: "Submit timesheet",
                description: "Submit the weekly timesheet to HR.",
                dueDate: new Date(Date.now() - 1 * 86400000).toISOString().slice(0, 10),
                completed: true,
                inProgress: false,
              },
            ]);
          } else {
            setAuthError("Invalid email or password. Please try again.");
          }
          setAuthLoading(false);
        }, 800);
      }

      function handleLogout() {
        setUser(null);
        setTasks([]);
        setAuthError('');
        setStatusMsg('');
      }

      // Task CRUD
      function handleAddTask(task) {
        setTasks(ts => [
          ...ts,
          {
            ...task,
            id: Math.max(0, ...ts.map(t => t.id)) + 1,
          }
        ]);
        setShowAddModal(false);
        setStatusMsg("Task added successfully.");
      }
      function handleEditTask(task) {
        setTasks(ts => ts.map(t => t.id === task.id ? {...t, ...task} : t));
        setEditTask(null);
        setStatusMsg("Task updated successfully.");
      }
      function handleDeleteTask(task) {
        setTasks(ts => ts.filter(t => t.id !== task.id));
        setDeleteTask(null);
        setShowDeleteModal(false);
        setStatusMsg("Task deleted.");
      }
      function handleToggleComplete(id) {
        setTasks(ts => ts.map(t => t.id === id ? {...t, completed: !t.completed, inProgress: false} : t));
        setStatusMsg("Task status updated.");
      }

      // Stats for sidebar
      const stats = React.useMemo(() => {
        const total = tasks.length;
        const completed = tasks.filter(t => t.completed).length;
        const inProgress = tasks.filter(t => t.inProgress && !t.completed).length;
        const incomplete = tasks.filter(t => !t.completed).length;
        return { total, completed, inProgress, incomplete };
      }, [tasks]);

      // Breadcrumbs
      const breadcrumbs = user
        ? [
            { label: "Home", href: "#", onClick: e => {e.preventDefault();} },
            { label: "Dashboard", href: "#", onClick: e => {e.preventDefault();} },
          ]
        : [
            { label: "Home", href: "#", onClick: e => {e.preventDefault();} },
            { label: "Sign In", href: "#", onClick: e => {e.preventDefault();} },
          ];

      // Theme context for user-selectable colors
      React.useEffect(() => {
        document.body.classList.remove('user-theme-dark', 'user-theme-high-contrast');
        if (theme === 'dark') document.body.classList.add('user-theme-dark');
        if (theme === 'high-contrast') document.body.classList.add('user-theme-high-contrast');
      }, [theme]);

      // Focus management for modals
      const addModalLabelId = React.useRef(uniqueId('add-modal-label')).current;
      const addModalDescId = React.useRef(uniqueId('add-modal-desc')).current;
      const editModalLabelId = React.useRef(uniqueId('edit-modal-label')).current;
      const editModalDescId = React.useRef(uniqueId('edit-modal-desc')).current;
      const deleteModalLabelId = React.useRef(uniqueId('delete-modal-label')).current;
      const deleteModalDescId = React.useRef(uniqueId('delete-modal-desc')).current;

      // Enhanced status message ARIA
      React.useEffect(() => {
        if (statusMsg) {
          const timeout = setTimeout(() => setStatusMsg(''), 4000);
          return () => clearTimeout(timeout);
        }
      }, [statusMsg]);

      // Accessible filter menu
      const [filterMenuActive, setFilterMenuActive] = React.useState(false);
      const filterBtnRef = React.useRef(null);

      // Multiple ways to navigate: nav, search, sitemap (footer)
      return (
        <ThemeContext.Provider value={{ theme, setTheme }}>
          <header>
            <h1 style={{fontSize: '2.1rem', margin: 0, letterSpacing: '0.02em'}}>Accessible Task Manager</h1>
            <p style={{fontSize: '1.1rem', margin: '0.5em 0 0 0', color: '#fffbe6'}}>
              <strong>Personal Dashboard & Task Management</strong> (WCAG 2.2 AAA Compliant)
            </p>
          </header>
          <nav aria-label="Main navigation">
            <ul>
              <li>
                <a
                  href="#"
                  aria-current={user ? "page" : undefined}
                  tabIndex="0"
                  onClick={e => {e.preventDefault();}}
                >Dashboard</a>
              </li>
              <li>
                <DropdownMenu
                  label="Tasks"
                  id="nav-tasks"
                  menuId="nav-tasks-menu"
                  active={filterMenuActive}
                  setActive={setFilterMenuActive}
                  buttonRef={filterBtnRef}
                >
                  <li>
                    <a
                      href="#"
                      tabIndex="0"
                      aria-current={taskFilter === 'all' ? "page" : undefined}
                      onClick={e => {e.preventDefault(); setTaskFilter('all'); setFilterMenuActive(false);}}
                    >All Tasks</a>
                  </li>
                  <li>
                    <a
                      href="#"
                      tabIndex="0"
                      aria-current={taskFilter === 'completed' ? "page" : undefined}
                      onClick={e => {e.preventDefault(); setTaskFilter('completed'); setFilterMenuActive(false);}}
                    >Completed</a>
                  </li>
                  <li>
                    <a
                      href="#"
                      tabIndex="0"
                      aria-current={taskFilter === 'incomplete' ? "page" : undefined}
                      onClick={e => {e.preventDefault(); setTaskFilter('incomplete'); setFilterMenuActive(false);}}
                    >Incomplete</a>
                  </li>
                  <li>
                    <a
                      href="#"
                      tabIndex="0"
                      aria-current={taskFilter === 'in-progress' ? "page" : undefined}
                      onClick={e => {e.preventDefault(); setTaskFilter('in-progress'); setFilterMenuActive(false);}}
                    >In Progress</a>
                  </li>
                </DropdownMenu>
              </li>
              <li>
                <button
                  className="btn btn-outline"
                  type="button"
                  aria-label="Color and contrast settings"
                  onClick={() => setShowThemeModal(true)}
                >
                  <span aria-hidden="true">ðŸŽ¨</span> Color/Contrast
                </button>
              </li>
              <li>
                <a
                  href="#help-auth"
                  aria-label="Help and support"
                  tabIndex="0"
                  onClick={e => {e.preventDefault(); setShowHelp(true);}}
                >Help</a>
              </li>
            </ul>
          </nav>
          <Breadcrumbs items={breadcrumbs} />
          <main id="main-content" tabIndex="-1">
            {user ? (
              <div className="dashboard-layout">
                <section className="dashboard-main" aria-labelledby="dashboard-title">
                  <h2 id="dashboard-title">Your Dashboard</h2>
                  <div className="card" style={{marginBottom: '1.5rem'}}>
                    <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap'}}>
                      <h3 style={{margin: 0}}>Your Tasks</h3>
                      <button
                        className="btn btn-success"
                        type="button"
                        aria-label="Add new task"
                        onClick={() => setShowAddModal(true)}
                        style={{marginBottom: 0}}
                      >
                        <span aria-hidden="true">ï¼‹</span> Add Task
                      </button>
                    </div>
                    <SearchBar
                      value={search}
                      onChange={setSearch}
                      ariaLabelledBy="search-label"
                      ariaDescribedBy="search-help"
                    />
                    <span className="form-help" id="search-help">
                      Search by task title or description. Use filter menu above to show only completed, incomplete, or in-progress tasks.
                    </span>
                    <TaskTable
                      tasks={tasks}
                      onToggleComplete={handleToggleComplete}
                      onEdit={task => setEditTask(task)}
                      onDelete={task => { setDeleteTask(task); setShowDeleteModal(true); }}
                      filter={taskFilter}
                      search={search}
                      ariaDescribedBy="task-table-desc"
                    />
                    <span id="task-table-desc" className="form-help">
                      Use the "âœ“" button to mark tasks as complete, "â†º" to mark as incomplete, "âœŽ" to edit, and "ðŸ—‘" to delete.
                    </span>
                    {statusMsg && (
                      <div role="status" aria-live="polite">{statusMsg}</div>
                    )}
                  </div>
                </section>
                <DashboardSidebar user={user} stats={stats} onLogout={handleLogout} />
              </div>
            ) : (
              <section aria-labelledby="signin-title">
                <h2 id="signin-title">Sign In to Your Dashboard</h2>
                <LoginForm
                  onLogin={handleLogin}
                  error={authError}
                  loading={authLoading}
                  help={showHelp}
                />
                <div className="card" style={{marginTop: '2rem'}}>
                  <h3>Demo Account</h3>
                  <p>
                    <strong>Email:</strong> alex@example.com<br />
                    <strong>Password:</strong> Password123!
                  </p>
                  <span className="form-help">
                    You may use the above credentials to sign in and try the demo. Password can be pasted or revealed for assistance.
                  </span>
                </div>
              </section>
            )}
          </main>
          <footer>
            <nav aria-label="Footer sitemap" style={{marginBottom: '0.5em'}}>
              <ul style={{display: 'flex', justifyContent: 'center', gap: '1.5em', listStyle: 'none', padding: 0, margin: 0, flexWrap: 'wrap'}}>
                <li><a href="#" aria-label="Home" style={{color: 'inherit'}}>Home</a></li>
                <li><a href="#help-auth" aria-label="Help and support" style={{color: 'inherit'}}>Help</a></li>
                <li><a href="#" aria-label="Sitemap" style={{color: 'inherit'}}>Sitemap</a></li>
                <li><a href="#" aria-label="Accessibility statement" style={{color: 'inherit'}}>Accessibility</a></li>
              </ul>
            </nav>
            <div>
              <span>
                <strong>Accessible Task Manager SPA</strong> | WCAG 2.2 AAA Compliant | &copy; 2024 Example Corp.
              </span>
            </div>
          </footer>
          {/* Add Task Modal */}
          <Modal
            isOpen={showAddModal}
            onClose={() => setShowAddModal(false)}
            title="Add New Task"
            labelledById={addModalLabelId}
            describedById={addModalDescId}
          >
            <div>
              <h2 id={addModalLabelId}>Add New Task</h2>
              <span id={addModalDescId} className="form-help">
                Fill out the form to add a new task to your dashboard.
              </span>
              <TaskForm
                onSave={handleAddTask}
                onCancel={() => setShowAddModal(false)}
                ariaLabelledBy={addModalLabelId}
                ariaDescribedBy={addModalDescId}
              />
            </div>
          </Modal>
          {/* Edit Task Modal */}
          <Modal
            isOpen={!!editTask}
            onClose={() => setEditTask(null)}
            title="Edit Task"
            labelledById={editModalLabelId}
            describedById={editModalDescId}
          >
            <div>
              <h2 id={editModalLabelId}>Edit Task</h2>
              <span id={editModalDescId} className="form-help">
                Update the details for your task below.
              </span>
              <TaskForm
                onSave={handleEditTask}
                onCancel={() => setEditTask(null)}
                initial={editTask}
                ariaLabelledBy={editModalLabelId}
                ariaDescribedBy={editModalDescId}
              />
            </div>
          </Modal>
          {/* Delete Task Confirmation Modal */}
          <Modal
            isOpen={showDeleteModal}
            onClose={() => { setShowDeleteModal(false); setDeleteTask(null); }}
            title="Delete Task"
            labelledById={deleteModalLabelId}
            describedById={deleteModalDescId}
          >
            <div>
              <h2 id={deleteModalLabelId}>Delete Task</h2>
              <span id={deleteModalDescId} className="form-help">
                Are you sure you want to delete this task? This action cannot be undone.
              </span>
              <div style={{margin: '1.5em 0'}}>
                <strong>Task:</strong> {deleteTask?.title}
              </div>
              <button
                className="btn btn-danger"
                onClick={() => { handleDeleteTask(deleteTask); }}
                aria-label="Confirm delete"
              >
                Delete
              </button>
              <button
                className="btn btn-outline"
                onClick={() => { setShowDeleteModal(false); setDeleteTask(null); }}
                aria-label="Cancel"
              >
                Cancel
              </button>
            </div>
          </Modal>
          {/* Theme Selector Modal */}
          <Modal
            isOpen={showThemeModal}
            onClose={() => setShowThemeModal(false)}
            title="Color and Contrast Settings"
            labelledById="theme-modal-label"
            describedById="theme-modal-desc"
          >
            <div>
              <h2 id="theme-modal-label">Color and Contrast Settings</h2>
              <span id="theme-modal-desc" className="form-help">
                Choose your preferred foreground and background color scheme for optimal readability and comfort.
              </span>
              <ThemeSelector />
              <button
                className="btn btn-success"
                onClick={() => setShowThemeModal(false)}
                aria-label="Close color and contrast settings"
              >
                Done
              </button>
            </div>
          </Modal>
          {/* Help Modal */}
          <Modal
            isOpen={showHelp}
            onClose={() => setShowHelp(false)}
            title="Help and Support"
            labelledById="help-modal-label"
            describedById="help-modal-desc"
          >
            <div>
              <h2 id="help-modal-label">Help and Support</h2>
              <span id="help-modal-desc" className="form-help">
                Get assistance with signing in, using the dashboard, or accessibility features.
              </span>
              <section aria-labelledby="help-auth-title">
                <h3 id="help-auth-title">Authentication Help</h3>
                <ul>
                  <li>
                    You may <strong>copy and paste</strong> your password or use the <strong>Show password</strong> option for assistance.
                  </li>
                  <li>
                    If you forget your password, please contact <a href="mailto:support@example.com">support@example.com</a>.
                  </li>
                  <li>
                    Authentication does <strong>not require solving puzzles, remembering images, or other cognitive tests</strong>. If you need further help, contact support.
                  </li>
                </ul>
              </section>
              <section aria-labelledby="help-accessibility-title">
                <h3 id="help-accessibility-title">Accessibility Features</h3>
                <ul>
                  <li>
                    All interactive elements are keyboard accessible and have enhanced focus indicators.
                  </li>
                  <li>
                    Color and contrast settings are user-selectable for readability.
                  </li>
                  <li>
                    Skip links and headings provide efficient navigation.
                  </li>
                  <li>
                    Error messages are clearly described and linked to their fields.
                  </li>
                </ul>
              </section>
              <section aria-labelledby="help-tasks-title">
                <h3 id="help-tasks-title">Task Management</h3>
                <ul>
                  <li>
                    Add, edit, complete, or delete tasks using the dashboard controls.
                  </li>
                  <li>
                    Use the search and filter features to locate tasks quickly.
                  </li>
                </ul>
              </section>
              <button
                className="btn btn-success"
                onClick={() => setShowHelp(false)}
                aria-label="Close help"
              >
                Close
              </button>
            </div>
          </Modal>
        </ThemeContext.Provider>
      );
    }

    // Render App
    ReactDOM.createRoot(document.getElementById('app-root')).render(<App />);

  </script>
</body>
</html>