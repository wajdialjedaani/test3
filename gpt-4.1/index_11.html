<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Showcase Your Pets ‚Äì Accessible Pet Gallery for Owners</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- User-selectable color scheme -->
  <meta name="color-scheme" content="light dark">
  <style>
    :root {
      /* Vibrant, high-contrast color palette (7:1+) */
      --bg-light: #ffffff;
      --bg-dark: #1a1a2e;
      --primary: #0a369d;
      --secondary: #ff7f11;
      --accent: #16db93;
      --danger: #b00020;
      --focus: #ffcb05;
      --card-bg: #f7f7fa;
      --card-bg-dark: #232946;
      --text: #19181a;
      --text-dark: #f6f6f6;
      --border: #0a369d;
      --shadow: rgba(10,54,157,0.1);
      --nav-bg: #f2f2f2;
      --nav-bg-dark: #232946;
      --skip-link-bg: #16db93;
      --skip-link-color: #19181a;
      --help-bg: #eaf6ff;
      --help-bg-dark: #2d3250;
      --help-border: #0a369d;
      --focus-outline: 4px solid var(--focus);
      --form-bg: #f8fafc;
      --form-bg-dark: #232946;
      --form-border: #0a369d;
      --form-error: #b00020;
      --form-success: #16db93;
      --breadcrumb-bg: #e0e8f0;
      --breadcrumb-bg-dark: #2d3250;
      --sitemap-bg: #eaf6ff;
      --sitemap-bg-dark: #2d3250;
      --input-min-size: 44px;
      /* Enhanced spacing and sizing */
      --line-height: 1.6;
      --para-spacing: 1.5em;
      --heading-spacing: 2em;
      --max-line-length: 80ch;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-light: #1a1a2e;
        --bg-dark: #11111a;
        --primary: #3a86ff;
        --secondary: #ffbe0b;
        --accent: #06d6a0;
        --danger: #ff006e;
        --focus: #ffcb05;
        --card-bg: #232946;
        --card-bg-dark: #1a1a2e;
        --text: #f6f6f6;
        --text-dark: #19181a;
        --border: #3a86ff;
        --shadow: rgba(58,134,255,0.1);
        --nav-bg: #232946;
        --nav-bg-dark: #11111a;
        --skip-link-bg: #06d6a0;
        --skip-link-color: #19181a;
        --help-bg: #2d3250;
        --help-bg-dark: #232946;
        --help-border: #3a86ff;
        --focus-outline: 4px solid var(--focus);
        --form-bg: #232946;
        --form-bg-dark: #11111a;
        --form-border: #3a86ff;
        --form-error: #ff006e;
        --form-success: #06d6a0;
        --breadcrumb-bg: #2d3250;
        --breadcrumb-bg-dark: #232946;
        --sitemap-bg: #2d3250;
        --sitemap-bg-dark: #232946;
      }
    }

    html {
      background: var(--bg-light);
      color: var(--text);
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 1.1rem;
      line-height: var(--line-height);
      max-width: 100vw;
      scroll-behavior: smooth;
      /* Respect user font-size preferences */
    }

    body {
      margin: 0;
      background: var(--bg-light);
      color: var(--text);
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
      max-width: 100vw;
    }

    [data-theme="dark"] {
      background: var(--bg-dark);
      color: var(--text);
    }

    /* Skip link styles */
    .skip-link {
      position: absolute;
      left: 8px;
      top: 8px;
      background: var(--skip-link-bg);
      color: var(--skip-link-color);
      padding: 8px 18px;
      border-radius: 6px;
      font-weight: bold;
      z-index: 1000;
      min-width: 44px;
      min-height: 44px;
      box-shadow: 0 2px 8px var(--shadow);
      border: 2px solid var(--border);
      transition: transform 0.2s;
      transform: translateY(-150%);
    }
    .skip-link:focus, .skip-link:active {
      transform: translateY(0);
      outline: var(--focus-outline);
      box-shadow: 0 2px 12px var(--shadow);
    }

    /* Header and navigation */
    header {
      background: linear-gradient(90deg, var(--primary) 70%, var(--secondary) 100%);
      color: var(--text-dark);
      padding: 0;
      border-bottom: 3px solid var(--accent);
      box-shadow: 0 2px 8px var(--shadow);
    }
    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.2em 1em 0.6em 1em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .logo {
      display: flex;
      align-items: center;
      font-size: 2rem;
      font-weight: bold;
      letter-spacing: 0.04em;
      color: var(--text-dark);
      text-decoration: none;
      gap: 0.7em;
    }
    .logo-icon {
      width: 48px;
      height: 48px;
      min-width: 44px;
      min-height: 44px;
      display: inline-block;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 4px var(--accent), 0 2px 8px var(--shadow);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
    }

    /* Navigation */
    nav[aria-label] {
      margin-top: 0.5em;
    }
    .main-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5em;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .main-nav > li {
      position: relative;
      min-width: 44px;
      min-height: 44px;
    }
    .main-nav > li > a, .main-nav > li > button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--nav-bg);
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      border-radius: 8px;
      border: 2px solid transparent;
      padding: 0.7em 1.2em;
      font-size: 1rem;
      min-width: 44px;
      min-height: 44px;
      transition: background 0.15s, border 0.15s, color 0.15s;
      cursor: pointer;
      position: relative;
      outline-offset: 2px;
    }
    .main-nav > li > a:focus,
    .main-nav > li > button:focus {
      outline: var(--focus-outline);
      border: 2px solid var(--focus);
      background: var(--accent);
      color: var(--text-dark);
      z-index: 1;
    }
    .main-nav > li > a[aria-current="page"] {
      background: var(--accent);
      color: var(--text-dark);
      border: 2px solid var(--primary);
    }
    .main-nav > li > button[aria-expanded="true"] {
      background: var(--accent);
      color: var(--text-dark);
      border: 2px solid var(--primary);
    }
    /* Dropdown Menu */
    .dropdown-menu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: var(--nav-bg);
      border: 2px solid var(--primary);
      border-radius: 8px;
      box-shadow: 0 4px 12px var(--shadow);
      min-width: 180px;
      z-index: 100;
      padding: 0.5em 0;
      margin-top: 2px;
    }
    .dropdown-menu[aria-hidden="false"] {
      display: block;
    }
    .dropdown-menu li {
      min-width: 44px;
      min-height: 44px;
    }
    .dropdown-menu a {
      display: flex;
      align-items: center;
      padding: 0.7em 1.2em;
      color: var(--primary);
      text-decoration: none;
      border-radius: 6px;
      font-size: 1rem;
      background: transparent;
      transition: background 0.12s, color 0.12s;
      min-width: 44px;
      min-height: 44px;
    }
    .dropdown-menu a:focus,
    .dropdown-menu a:hover {
      background: var(--accent);
      color: var(--text-dark);
      outline: var(--focus-outline);
    }

    /* Breadcrumbs */
    nav[aria-label="Breadcrumb"] {
      background: var(--breadcrumb-bg);
      padding: 0.6em 1em;
      font-size: 1rem;
      margin: 0;
      border-bottom: 1px solid var(--border);
    }
    .breadcrumb-list {
      list-style: none;
      display: flex;
      gap: 0.5em;
      flex-wrap: wrap;
      margin: 0;
      padding: 0;
    }
    .breadcrumb-list li {
      display: flex;
      align-items: center;
    }
    .breadcrumb-list li:not(:last-child)::after {
      content: "‚Ä∫";
      margin: 0 0.5em;
      color: var(--primary);
    }
    .breadcrumb-list a {
      color: var(--primary);
      text-decoration: underline;
      border-radius: 6px;
      padding: 0.2em 0.6em;
      min-width: 44px;
      min-height: 44px;
      font-weight: 600;
      background: none;
      transition: background 0.12s, color 0.12s;
    }
    .breadcrumb-list a:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }
    .breadcrumb-list li[aria-current="page"] {
      font-weight: bold;
      color: var(--primary);
    }

    /* Main content */
    main {
      display: flex;
      flex-direction: row;
      gap: 2.5em;
      max-width: 1200px;
      margin: 2em auto 2em auto;
      padding: 1em;
      min-height: 60vh;
    }
    @media (max-width: 950px) {
      main {
        flex-direction: column;
        gap: 1.5em;
      }
    }

    /* Sidebar */
    aside {
      flex: 0 0 300px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 2px 8px var(--shadow);
      padding: 1.5em 1em;
      min-width: 260px;
      max-width: 350px;
      margin-bottom: 2em;
      color: var(--text);
      border: 2px solid var(--border);
      align-self: flex-start;
    }
    aside h2 {
      margin-top: 0;
      margin-bottom: 0.8em;
      font-size: 1.2em;
      color: var(--primary);
    }
    .help-box {
      background: var(--help-bg);
      border: 2px solid var(--help-border);
      border-radius: 10px;
      padding: 1em;
      margin-bottom: 1.2em;
      color: var(--text);
      font-size: 1rem;
      box-shadow: 0 1px 6px var(--shadow);
    }
    .help-box ul {
      margin-top: 0.5em;
      margin-bottom: 0;
      padding-left: 1.5em;
    }
    .color-picker-group {
      margin-bottom: 1.2em;
    }
    .color-picker-label {
      font-weight: 600;
      display: block;
      margin-bottom: 0.5em;
      color: var(--primary);
    }
    .color-picker {
      width: 44px;
      height: 44px;
      border: 2px solid var(--border);
      border-radius: 6px;
      cursor: pointer;
      background: none;
      margin-right: 0.5em;
    }
    .color-picker:focus {
      outline: var(--focus-outline);
      border: 2px solid var(--focus);
    }
    .sitemap-box {
      background: var(--sitemap-bg);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 1em;
      color: var(--text);
      font-size: 1rem;
      box-shadow: 0 1px 6px var(--shadow);
      margin-bottom: 1.2em;
    }
    .sitemap-box ul {
      margin: 0.3em 0 0.5em 1.2em;
      padding: 0;
    }
    .sitemap-box a {
      color: var(--primary);
      text-decoration: underline;
      font-size: 1em;
      min-width: 44px;
      min-height: 44px;
      display: inline-block;
    }
    .sitemap-box a:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }

    /* Pet Gallery Section */
    .gallery-section {
      flex: 1 1 0;
      min-width: 0;
      max-width: 100%;
    }
    .gallery-section h1 {
      margin-top: 0;
      font-size: 2.2em;
      color: var(--primary);
      margin-bottom: 0.5em;
      letter-spacing: 0.02em;
      max-width: var(--max-line-length);
    }
    .gallery-section h2 {
      font-size: 1.4em;
      margin-bottom: 0.8em;
      color: var(--secondary);
      max-width: var(--max-line-length);
    }

    /* Search and Filter Bar */
    .search-filter-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      margin-bottom: 1.5em;
      align-items: flex-end;
      max-width: 100%;
    }
    .search-group,
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.3em;
      min-width: 200px;
      max-width: 300px;
    }
    .search-group label,
    .filter-group label {
      font-weight: 600;
      color: var(--primary);
    }
    .search-group input,
    .filter-group select {
      background: var(--form-bg);
      border: 2px solid var(--form-border);
      border-radius: 6px;
      font-size: 1em;
      padding: 0.7em 1em;
      color: var(--text);
      min-width: 44px;
      min-height: 44px;
      transition: border 0.12s;
      margin-bottom: 0.1em;
    }
    .search-group input:focus,
    .filter-group select:focus {
      outline: var(--focus-outline);
      border: 2px solid var(--focus);
    }
    .clear-filters-btn {
      background: var(--danger);
      color: var(--text-dark);
      border: none;
      border-radius: 6px;
      font-size: 1em;
      font-weight: 600;
      padding: 0.7em 1.4em;
      min-width: 44px;
      min-height: 44px;
      margin-left: 0.8em;
      cursor: pointer;
      transition: background 0.15s;
    }
    .clear-filters-btn:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }

    /* Pet Cards Grid */
    .pet-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2em;
      width: 100%;
      margin-bottom: 2em;
    }
    @media (max-width: 650px) {
      .pet-gallery {
        grid-template-columns: 1fr;
        gap: 1.2em;
      }
    }
    .pet-card {
      background: var(--card-bg);
      border-radius: 18px;
      box-shadow: 0 4px 14px var(--shadow);
      border: 2px solid var(--border);
      display: flex;
      flex-direction: column;
      min-width: 0;
      min-height: 340px;
      transition: transform 0.12s, box-shadow 0.12s;
      max-width: 430px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
    }
    .pet-card:focus-within,
    .pet-card:focus-visible {
      outline: var(--focus-outline);
      box-shadow: 0 0 0 4px var(--focus), 0 4px 14px var(--shadow);
      z-index: 2;
    }
    .pet-photo-wrapper {
      position: relative;
      width: 100%;
      min-height: 180px;
      background: var(--secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 2px solid var(--border);
    }
    .pet-photo {
      width: 100%;
      max-width: 430px;
      height: 180px;
      object-fit: cover;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      border-bottom: 2px solid var(--border);
      background: var(--secondary);
    }
    .pet-info {
      padding: 1.1em 1em 1em 1em;
      display: flex;
      flex-direction: column;
      gap: 0.6em;
      color: var(--text);
      max-width: var(--max-line-length);
    }
    .pet-name {
      font-size: 1.3em;
      font-weight: bold;
      color: var(--primary);
      margin: 0;
      margin-bottom: 0.2em;
      letter-spacing: 0.01em;
    }
    .pet-meta {
      font-size: 1em;
      color: var(--secondary);
      margin-bottom: 0.2em;
      display: flex;
      gap: 1.2em;
      flex-wrap: wrap;
    }
    .pet-meta span {
      display: flex;
      align-items: center;
      gap: 0.4em;
    }
    .pet-fact {
      font-size: 1em;
      color: var(--accent);
      margin-bottom: 0.2em;
      font-style: italic;
    }
    .pet-details-btn {
      align-self: flex-start;
      margin-top: 0.6em;
      background: var(--primary);
      color: var(--text-dark);
      border: none;
      border-radius: 6px;
      font-size: 1em;
      font-weight: 600;
      padding: 0.7em 1.4em;
      min-width: 44px;
      min-height: 44px;
      cursor: pointer;
      transition: background 0.15s;
      text-decoration: none;
    }
    .pet-details-btn:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }

    /* No results */
    .no-results {
      color: var(--danger);
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 2em;
      text-align: center;
      background: var(--help-bg);
      border-radius: 10px;
      padding: 1em;
      border: 2px solid var(--danger);
      max-width: 430px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      overflow: auto;
      background: rgba(26,26,46,0.7);
      align-items: center;
      justify-content: center;
      transition: opacity 0.15s;
    }
    .modal[aria-hidden="false"] {
      display: flex;
    }
    .modal-dialog {
      background: var(--card-bg);
      color: var(--text);
      border-radius: 18px;
      box-shadow: 0 8px 24px var(--shadow);
      max-width: 95vw;
      width: 420px;
      padding: 2em 1.5em 1.5em 1.5em;
      position: relative;
      border: 2px solid var(--primary);
      outline: none;
    }
    .modal-close-btn {
      position: absolute;
      top: 1em;
      right: 1em;
      background: var(--danger);
      color: var(--text-dark);
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.15s;
      z-index: 2;
    }
    .modal-close-btn:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }
    .modal-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1em;
    }
    .modal-photo {
      width: 100%;
      max-width: 340px;
      height: 180px;
      object-fit: cover;
      border-radius: 12px;
      border: 2px solid var(--border);
      background: var(--secondary);
    }
    .modal-pet-name {
      font-size: 1.4em;
      font-weight: bold;
      color: var(--primary);
      margin: 0.2em 0 0.2em 0;
    }
    .modal-meta {
      color: var(--secondary);
      font-size: 1em;
      margin-bottom: 0.2em;
      display: flex;
      gap: 1.2em;
      flex-wrap: wrap;
    }
    .modal-fact {
      color: var(--accent);
      font-size: 1em;
      font-style: italic;
      margin-bottom: 0.3em;
    }
    .modal-description {
      font-size: 1em;
      color: var(--text);
      text-align: left;
      max-width: 340px;
      margin-bottom: 0.5em;
    }
    /* Modal focus trap outline */
    .modal-dialog:focus {
      outline: var(--focus-outline);
    }

    /* Responsive Modal */
    @media (max-width: 500px) {
      .modal-dialog {
        width: 98vw;
        padding: 1em 0.5em 1em 0.5em;
      }
      .modal-photo {
        max-width: 90vw;
      }
    }

    /* Footer */
    footer {
      background: linear-gradient(90deg, var(--primary) 60%, var(--secondary) 100%);
      color: var(--text-dark);
      padding: 1.2em 1em 1.2em 1em;
      border-top: 3px solid var(--accent);
      text-align: center;
      font-size: 1em;
      letter-spacing: 0.01em;
      margin-top: 2em;
    }
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1.2em;
      flex-wrap: wrap;
      margin-bottom: 0.7em;
    }
    .footer-links a {
      color: var(--accent);
      text-decoration: underline;
      font-weight: 600;
      padding: 0.2em 0.6em;
      border-radius: 6px;
      min-width: 44px;
      min-height: 44px;
      background: none;
      transition: background 0.12s, color 0.12s;
    }
    .footer-links a:focus {
      outline: var(--focus-outline);
      background: var(--accent);
      color: var(--text-dark);
    }
    .footer-copy {
      color: var(--text-dark);
      margin-top: 0.3em;
      font-size: 0.95em;
    }

    /* Enhanced focus indicators */
    :focus-visible {
      outline: var(--focus-outline) !important;
      z-index: 2;
    }

    /* Paragraph, heading, and line/para spacing */
    p, ul, ol, dl {
      margin-top: 0.8em;
      margin-bottom: var(--para-spacing);
      line-height: var(--line-height);
      max-width: var(--max-line-length);
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: var(--heading-spacing);
      margin-bottom: 0.6em;
      line-height: 1.25;
      max-width: var(--max-line-length);
      font-family: inherit;
      font-weight: bold;
    }
    h1 { font-size: 2.2em; }
    h2 { font-size: 1.4em; }
    h3 { font-size: 1.1em; }
    h4, h5, h6 { font-size: 1em; }

    /* User-selectable colors for AAA */
    .user-custom-bg {
      background: var(--bg-light) !important;
      color: var(--text) !important;
    }
    .user-custom-fg {
      color: var(--text) !important;
    }

    /* Hide visually but keep accessible */
    .sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0,0,0,0) !important;
      border: 0 !important;
    }

    /* Enhanced contrast for icons and color indicators */
    .color-indicator {
      display: inline-block;
      width: 1.2em;
      height: 1.2em;
      border-radius: 50%;
      border: 2px solid var(--border);
      margin-right: 0.4em;
      vertical-align: middle;
    }

    /* Hide default select arrow for custom style, keep accessible */
    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg width='18' height='12' viewBox='0 0 18 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L9 11L17 1' stroke='%230a369d' stroke-width='2'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 1em center;
      background-size: 1em;
    }

    /* Respect prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <!-- Skip to main content link -->
  <a href="#main-content" class="skip-link" id="skip-link">Skip to main content</a>

  <!-- Header and Main Navigation -->
  <header>
    <div class="header-inner">
      <a href="/" class="logo" aria-label="Home: Pet Gallery">
        <span class="logo-icon" aria-hidden="true" style="background: linear-gradient(135deg, #16db93 60%, #ffbe0b 100%);">
          üêæ
        </span>
        <span>Pet Gallery</span>
      </a>
      <nav aria-label="Main navigation" id="main-navigation">
        <ul class="main-nav" role="menubar">
          <li role="none">
            <a href="#main-content" aria-current="page" role="menuitem" tabindex="0">Home</a>
          </li>
          <li role="none">
            <a href="#submit-pet" role="menuitem" tabindex="0">Submit a Pet</a>
          </li>
          <li role="none">
            <button
              aria-haspopup="true"
              aria-expanded="false"
              aria-controls="more-menu"
              id="more-menu-btn"
              role="menuitem"
              tabindex="0"
              type="button"
            >
              More
              <span aria-hidden="true" style="margin-left:0.5em;">‚ñº</span>
            </button>
            <ul class="dropdown-menu" id="more-menu" aria-label="More menu" aria-hidden="true" role="menu">
              <li role="none">
                <a href="#about" role="menuitem" tabindex="-1">About This Site</a>
              </li>
              <li role="none">
                <a href="#accessibility" role="menuitem" tabindex="-1">Accessibility Info</a>
              </li>
              <li role="none">
                <a href="#contact" role="menuitem" tabindex="-1">Contact</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Breadcrumb navigation -->
  <nav aria-label="Breadcrumb">
    <ol class="breadcrumb-list">
      <li>
        <a href="/" aria-label="Home page">Home</a>
      </li>
      <li aria-current="page">
        Pet Gallery
      </li>
    </ol>
  </nav>

  <main id="main-content" tabindex="-1">
    <!-- Sidebar -->
    <aside aria-labelledby="sidebar-heading">
      <h2 id="sidebar-heading">Help &amp; Site Tools</h2>
      <section class="help-box" aria-labelledby="help-section-heading">
        <h3 id="help-section-heading">How to Use the Gallery</h3>
        <ul>
          <li>Browse the pet cards to see each pet's photo and details.</li>
          <li>Use the <strong>search</strong> and <strong>filter</strong> options to find pets by name or breed.</li>
          <li>Click "More Details" on a pet card to see a detailed view in a modal dialog.</li>
          <li>Use keyboard navigation: <kbd>Tab</kbd> to move, <kbd>Enter</kbd>/<kbd>Space</kbd> to activate, <kbd>Esc</kbd> to close dialogs or menus.</li>
          <li>Submit your own pet using the <a href="#submit-pet">Submit a Pet</a> form.</li>
        </ul>
      </section>
      <section class="color-picker-group" aria-labelledby="color-picker-heading">
        <h3 id="color-picker-heading">Customize Colors</h3>
        <label for="bg-color-picker" class="color-picker-label">Background color:</label>
        <input type="color" id="bg-color-picker" class="color-picker" aria-label="Pick background color" value="#ffffff">
        <label for="fg-color-picker" class="color-picker-label">Text color:</label>
        <input type="color" id="fg-color-picker" class="color-picker" aria-label="Pick text color" value="#19181a">
      </section>
      <section class="sitemap-box" aria-labelledby="sitemap-heading">
        <h3 id="sitemap-heading">Sitemap</h3>
        <ul>
          <li><a href="#main-content">Pet Gallery Home</a></li>
          <li><a href="#submit-pet">Submit a Pet</a></li>
          <li><a href="#about">About This Site</a></li>
          <li><a href="#accessibility">Accessibility Info</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </section>
    </aside>

    <!-- Pet Gallery Section -->
    <section class="gallery-section" aria-labelledby="gallery-heading">
      <h1 id="gallery-heading">Showcase Your Pets</h1>
      <h2 id="gallery-subheading">Browse the adorable pets submitted by our community!</h2>
      <!-- Search and Filter Bar -->
      <form class="search-filter-bar" role="search" aria-label="Search and filter pets" autocomplete="off" id="search-filter-form">
        <div class="search-group">
          <label for="search-input">Search by name</label>
          <input
            type="search"
            id="search-input"
            name="search"
            autocomplete="off"
            placeholder="e.g. Luna"
            aria-describedby="search-help"
            aria-label="Search pets by name"
            minlength="1"
            maxlength="40"
            inputmode="text"
            pattern="[A-Za-z\s]*"
          >
          <span id="search-help" class="sr-only">Type a pet's name to search. Only letters and spaces allowed.</span>
        </div>
        <div class="filter-group">
          <label for="breed-filter">Filter by breed</label>
          <select id="breed-filter" name="breed" aria-label="Filter pets by breed">
            <option value="">All breeds</option>
            <!-- Populated by JS -->
          </select>
        </div>
        <div class="filter-group">
          <label for="age-filter">Filter by age</label>
          <select id="age-filter" name="age" aria-label="Filter pets by age group">
            <option value="">All ages</option>
            <option value="young">Under 2 years</option>
            <option value="adult">2-7 years</option>
            <option value="senior">8+ years</option>
          </select>
        </div>
        <button type="button" class="clear-filters-btn" id="clear-filters-btn">Clear Filters</button>
      </form>
      <div id="search-error" role="alert" aria-live="polite" style="color: var(--danger); margin-bottom: 1em; display:none;"></div>
      <!-- Pet Gallery Grid -->
      <section aria-labelledby="pet-gallery-heading" id="pet-gallery-section">
        <h2 id="pet-gallery-heading" class="sr-only">Pet Gallery</h2>
        <div class="pet-gallery" id="pet-gallery" role="list">
          <!-- Pet cards injected by JS -->
        </div>
        <div class="no-results" id="no-results" role="status" aria-live="polite" style="display:none;">
          No pets found matching your criteria. Try adjusting your search or filters.
        </div>
      </section>
    </section>
  </main>

  <!-- Modal for Pet Details -->
  <div class="modal" id="pet-modal" aria-modal="true" role="dialog" aria-labelledby="modal-pet-name" aria-describedby="modal-description" aria-hidden="true">
    <div class="modal-dialog" tabindex="0">
      <button type="button" class="modal-close-btn" id="modal-close-btn" aria-label="Close pet details dialog">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="modal-content" id="modal-content">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Submit a Pet Form (for demonstration, not functional submission) -->
  <section id="submit-pet" aria-labelledby="submit-pet-heading" style="max-width: 900px; margin: 3em auto 2em auto; padding: 2em 1em; background: var(--form-bg); border-radius: 18px; border: 2px solid var(--form-border); box-shadow: 0 2px 12px var(--shadow);">
    <h2 id="submit-pet-heading">Submit Your Pet</h2>
    <form id="pet-form" novalidate aria-describedby="pet-form-help">
      <fieldset>
        <legend>Pet Information</legend>
        <div style="display: flex; flex-wrap: wrap; gap: 1.5em;">
          <div style="flex: 1 1 260px; min-width: 200px;">
            <label for="pet-name">Pet Name <span aria-hidden="true" style="color: var(--danger);">*</span></label>
            <input type="text" id="pet-name" name="pet-name" required aria-required="true" autocomplete="name" minlength="2" maxlength="40" aria-describedby="pet-name-help" inputmode="text" pattern="[A-Za-z\s\-']*" style="width:100%; min-width:44px; min-height:44px;">
            <span id="pet-name-help" class="sr-only">Enter your pet's name. Only letters, spaces, hyphens, and apostrophes allowed.</span>
          </div>
          <div style="flex: 1 1 260px; min-width: 200px;">
            <label for="pet-breed">Breed <span aria-hidden="true" style="color: var(--danger);">*</span></label>
            <input type="text" id="pet-breed" name="pet-breed" required aria-required="true" autocomplete="off" minlength="2" maxlength="40" aria-describedby="pet-breed-help" inputmode="text" pattern="[A-Za-z\s\-']*" style="width:100%; min-width:44px; min-height:44px;">
            <span id="pet-breed-help" class="sr-only">Enter the breed. Only letters, spaces, hyphens, and apostrophes allowed.</span>
          </div>
        </div>
        <div style="display: flex; flex-wrap: wrap; gap: 1.5em; margin-top:1em;">
          <div style="flex: 1 1 120px; min-width: 120px;">
            <label for="pet-age">Age (years) <span aria-hidden="true" style="color: var(--danger);">*</span></label>
            <input type="number" id="pet-age" name="pet-age" required aria-required="true" autocomplete="off" min="0" max="40" aria-describedby="pet-age-help" style="width:100%; min-width:44px; min-height:44px;">
            <span id="pet-age-help" class="sr-only">Enter the pet's age in years (0-40).</span>
          </div>
          <div style="flex: 1 1 120px; min-width: 120px;">
            <label for="pet-photo">Photo URL <span aria-hidden="true" style="color: var(--danger);">*</span></label>
            <input type="url" id="pet-photo" name="pet-photo" required aria-required="true" autocomplete="off" aria-describedby="pet-photo-help" style="width:100%; min-width:44px; min-height:44px;">
            <span id="pet-photo-help" class="sr-only">Paste a link to your pet's photo (public image URL, no text in image).</span>
          </div>
        </div>
        <div style="margin-top:1em;">
          <label for="pet-fact">Fun Fact <span aria-hidden="true" style="color: var(--danger);">*</span></label>
          <input type="text" id="pet-fact" name="pet-fact" required aria-required="true" autocomplete="off" minlength="5" maxlength="100" aria-describedby="pet-fact-help" style="width:100%; min-width:44px; min-height:44px;">
          <span id="pet-fact-help" class="sr-only">Share a fun or unique fact about your pet.</span>
        </div>
      </fieldset>
      <div id="pet-form-error" role="alert" aria-live="polite" style="color: var(--danger); margin-top:1em; display:none;"></div>
      <div id="pet-form-success" role="status" aria-live="polite" style="color: var(--form-success); margin-top:1em; display:none;"></div>
      <button type="submit" style="margin-top:1.2em; background: var(--primary); color: var(--text-dark); border:none; border-radius:6px; font-size:1.1em; font-weight:600; padding:0.7em 1.6em; min-width:44px; min-height:44px; cursor:pointer;">Submit Pet</button>
      <span id="pet-form-help" style="display:block; margin-top:0.8em; color:var(--primary); font-size:0.97em;">All fields are required. Your submission will be reviewed for accessibility before appearing in the gallery.</span>
    </form>
  </section>

  <!-- About Section -->
  <section id="about" aria-labelledby="about-heading" style="max-width: 900px; margin: 2em auto 2em auto; padding: 2em 1em; background: var(--card-bg); border-radius: 18px; border: 2px solid var(--border); box-shadow: 0 2px 12px var(--shadow);">
    <h2 id="about-heading">About This Site</h2>
    <p>
      <strong>Pet Gallery</strong> is a fully accessible platform for pet owners to share and celebrate their beloved companions. Our site is designed to be inclusive for all users, meeting <abbr title="Web Content Accessibility Guidelines">WCAG</abbr> 2.2 <abbr title="Triple A">AAA</abbr> standards. We ensure all pet photos have descriptive text, all forms are accessible, and navigation is possible via keyboard, mouse, or touch. 
    </p>
    <p>
      If you have suggestions for improving accessibility, please <a href="#contact">contact us</a>.
    </p>
  </section>

  <!-- Accessibility Info Section -->
  <section id="accessibility" aria-labelledby="accessibility-heading" style="max-width: 900px; margin: 2em auto 2em auto; padding: 2em 1em; background: var(--card-bg); border-radius: 18px; border: 2px solid var(--border); box-shadow: 0 2px 12px var(--shadow);">
    <h2 id="accessibility-heading">Accessibility Information</h2>
    <ul>
      <li>All images have meaningful <strong>alt text</strong> describing the pet.</li>
      <li>All interactive elements are fully keyboard accessible and have visible focus indicators.</li>
      <li>Color contrast ratios exceed <strong>7:1</strong> for text and <strong>3:1</strong> for UI components.</li>
      <li>Navigation menus use ARIA attributes and provide full keyboard support.</li>
      <li>Forms have clear labels, required indicators, error messages, and context-sensitive help.</li>
      <li>Multiple ways to find content: navigation, search, and sitemap.</li>
      <li>All content is readable at a lower secondary education level, and jargon/abbreviations are defined.</li>
      <li>Animations respect user preferences for reduced motion.</li>
      <li>Touch targets are at least 44x44 pixels.</li>
      <li>Users can customize foreground and background colors.</li>
    </ul>
    <p>
      For detailed information on our accessibility practices, please <a href="#contact">contact us</a>.
    </p>
  </section>

  <!-- Contact Section -->
  <section id="contact" aria-labelledby="contact-heading" style="max-width: 900px; margin: 2em auto 2em auto; padding: 2em 1em; background: var(--card-bg); border-radius: 18px; border: 2px solid var(--border); box-shadow: 0 2px 12px var(--shadow);">
    <h2 id="contact-heading">Contact</h2>
    <p>
      For questions, suggestions, or accessibility feedback, email us at
      <a href="mailto:accessibility@petgallery.example" aria-label="Email accessibility at pet gallery dot example">accessibility@petgallery.example</a>.
    </p>
  </section>

  <!-- Footer -->
  <footer>
    <nav aria-label="Footer navigation">
      <ul class="footer-links">
        <li><a href="#main-content">Pet Gallery</a></li>
        <li><a href="#submit-pet">Submit a Pet</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#accessibility">Accessibility Info</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
    <div class="footer-copy">
      &copy; 2024 Pet Gallery. All rights reserved. | Designed for <abbr title="Web Content Accessibility Guidelines">WCAG</abbr> 2.2 <abbr title="Triple A">AAA</abbr> compliance.
    </div>
  </footer>

  <script>
    // PET DATA
    const pets = [
      {
        id: 1,
        name: "Luna",
        breed: "Siberian Husky",
        age: 3,
        photo: "https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=800&q=80",
        alt: "A smiling Siberian Husky with blue eyes sitting on grass",
        fact: "Luna loves howling along with the piano!",
        description: "Luna is a playful Siberian Husky who enjoys long walks and making new friends at the dog park. Her favorite activity is howling whenever someone plays music."
      },
      {
        id: 2,
        name: "Milo",
        breed: "Domestic Shorthair Cat",
        age: 2,
        photo: "https://images.unsplash.com/photo-1518715308788-30057527ade5?auto=format&fit=crop&w=800&q=80",
        alt: "A grey and white domestic shorthair cat lying on a soft blanket",
        fact: "Milo can open doors by jumping and pulling the handle!",
        description: "Milo is a curious and clever cat. He has learned how to open doors in his house and loves to watch birds from the window."
      },
      {
        id: 3,
        name: "Bella",
        breed: "Golden Retriever",
        age: 7,
        photo: "https://images.unsplash.com/photo-1507146426996-ef05306b995a?auto=format&fit=crop&w=800&q=80",
        alt: "A happy Golden Retriever running in a field with a ball in her mouth",
        fact: "Bella can catch three tennis balls at once!",
        description: "Bella is a gentle Golden Retriever who loves playing fetch. She is friendly with everyone and is known for her impressive tennis ball juggling skills."
      },
      {
        id: 4,
        name: "Charlie",
        breed: "Cockatiel",
        age: 5,
        photo: "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=800&q=80",
        alt: "A yellow and grey cockatiel perched on a wooden branch",
        fact: "Charlie whistles the tune of 'Happy Birthday'!",
        description: "Charlie is a sociable cockatiel who enjoys mimicking tunes and sitting on his owner's shoulder. He brings joy with his cheerful whistling."
      },
      {
        id: 5,
        name: "Max",
        breed: "Labrador Retriever",
        age: 9,
        photo: "https://images.unsplash.com/photo-1518715308788-30057527ade5?auto=format&fit=crop&w=800&q=80",
        alt: "A black Labrador Retriever with a shiny coat sitting in the sun",
        fact: "Max is a certified therapy dog.",
        description: "Max has helped many people as a therapy dog. He loves gentle cuddles and enjoys visiting hospitals and schools."
      },
      {
        id: 6,
        name: "Cleo",
        breed: "Persian Cat",
        age: 4,
        photo: "https://images.unsplash.com/photo-1518715308788-30057527ade5?auto=format&fit=crop&w=800&q=80",
        alt: "A fluffy white Persian cat with blue eyes sitting on a sofa",
        fact: "Cleo sleeps 16 hours a day!",
        description: "Cleo is a regal Persian cat who enjoys lounging in sunny spots. She loves being pampered and purrs loudly when brushed."
      },
      {
        id: 7,
        name: "Oliver",
        breed: "Rabbit",
        age: 1,
        photo: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80",
        alt: "A small brown rabbit with long ears sitting in green grass",
        fact: "Oliver can do a 360-degree jump called a 'binky'!",
        description: "Oliver is a lively rabbit who loves hopping around the garden. He often surprises his family with joyful binkies."
      },
      {
        id: 8,
        name: "Ruby",
        breed: "Border Collie",
        age: 6,
        photo: "https://images.unsplash.com/photo-1518715308788-30057527ade5?auto=format&fit=crop&w=800&q=80",
        alt: "A black and white Border Collie with alert ears sitting in a field",
        fact: "Ruby can herd a flock of ducks with gentle precision.",
        description: "Ruby is an energetic Border Collie who loves agility courses and herding games. She is quick, smart, and loves to learn new tricks."
      }
    ];

    // Populate breed filter options dynamically (unique breeds)
    function populateBreedFilter() {
      const breedSet = new Set(pets.map(p => p.breed));
      const breedFilter = document.getElementById('breed-filter');
      breedSet.forEach(breed => {
        const opt = document.createElement('option');
        opt.value = breed;
        opt.textContent = breed;
        breedFilter.appendChild(opt);
      });
    }

    // Render pet cards
    function renderPets(filteredPets) {
      const gallery = document.getElementById('pet-gallery');
      const noResults = document.getElementById('no-results');
      gallery.innerHTML = '';
      if (!filteredPets.length) {
        noResults.style.display = '';
        return;
      }
      noResults.style.display = 'none';
      filteredPets.forEach(pet => {
        const card = document.createElement('article');
        card.className = 'pet-card';
        card.tabIndex = 0;
        card.setAttribute('role', 'listitem');
        card.setAttribute('aria-labelledby', `pet-card-title-${pet.id}`);
        card.setAttribute('aria-describedby', `pet-card-meta-${pet.id} pet-card-fact-${pet.id}`);
        // Photo
        const photoWrap = document.createElement('div');
        photoWrap.className = 'pet-photo-wrapper';
        const img = document.createElement('img');
        img.className = 'pet-photo';
        img.src = pet.photo;
        img.alt = pet.alt;
        img.width = 430;
        img.height = 180;
        photoWrap.appendChild(img);
        // Info
        const info = document.createElement('div');
        info.className = 'pet-info';
        // Name
        const name = document.createElement('h3');
        name.className = 'pet-name';
        name.id = `pet-card-title-${pet.id}`;
        name.textContent = pet.name;
        info.appendChild(name);
        // Meta (breed, age)
        const meta = document.createElement('div');
        meta.className = 'pet-meta';
        meta.id = `pet-card-meta-${pet.id}`;
        meta.innerHTML =
          `<span><span class="color-indicator" style="background: var(--primary);"></span><span>${pet.breed}</span></span>` +
          `<span><span class="color-indicator" style="background: var(--secondary);"></span><span>${pet.age} year${pet.age === 1 ? '' : 's'} old</span></span>`;
        info.appendChild(meta);
        // Fun Fact
        const fact = document.createElement('div');
        fact.className = 'pet-fact';
        fact.id = `pet-card-fact-${pet.id}`;
        fact.textContent = pet.fact;
        info.appendChild(fact);
        // More Details Button
        const btn = document.createElement('button');
        btn.className = 'pet-details-btn';
        btn.type = 'button';
        btn.textContent = 'More Details';
        btn.setAttribute('aria-label', `View more details about ${pet.name}`);
        btn.setAttribute('data-pet-id', pet.id);
        btn.addEventListener('click', openPetModal);
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openPetModal.call(this, e);
          }
        });
        info.appendChild(btn);
        // Assemble card
        card.appendChild(photoWrap);
        card.appendChild(info);
        gallery.appendChild(card);
      });
    }

    // Filter pets by search/filter criteria
    function filterPets() {
      const searchInput = document.getElementById('search-input').value.trim().toLowerCase();
      const breed = document.getElementById('breed-filter').value;
      const ageGroup = document.getElementById('age-filter').value;
      let filtered = pets.filter(pet => {
        let matches = true;
        if (searchInput && !pet.name.toLowerCase().includes(searchInput)) matches = false;
        if (breed && pet.breed !== breed) matches = false;
        if (ageGroup) {
          if (ageGroup === 'young' && pet.age >= 2) matches = false;
          if (ageGroup === 'adult' && (pet.age < 2 || pet.age > 7)) matches = false;
          if (ageGroup === 'senior' && pet.age < 8) matches = false;
        }
        return matches;
      });
      renderPets(filtered);
    }

    // Clear filters and search
    function clearFilters() {
      document.getElementById('search-input').value = '';
      document.getElementById('breed-filter').selectedIndex = 0;
      document.getElementById('age-filter').selectedIndex = 0;
      document.getElementById('search-error').style.display = 'none';
      filterPets();
      document.getElementById('search-input').focus();
    }

    // Pet Modal logic
    function openPetModal(e) {
      const petId = parseInt(this.getAttribute('data-pet-id'), 10);
      const pet = pets.find(p => p.id === petId);
      if (!pet) return;
      const modal = document.getElementById('pet-modal');
      const modalContent = document.getElementById('modal-content');
      modalContent.innerHTML = '';
      // Modal photo
      const img = document.createElement('img');
      img.className = 'modal-photo';
      img.src = pet.photo;
      img.alt = pet.alt;
      img.width = 340;
      img.height = 180;
      modalContent.appendChild(img);
      // Name
      const name = document.createElement('div');
      name.className = 'modal-pet-name';
      name.id = 'modal-pet-name';
      name.textContent = pet.name;
      modalContent.appendChild(name);
      // Meta
      const meta = document.createElement('div');
      meta.className = 'modal-meta';
      meta.innerHTML =
        `<span><span class="color-indicator" style="background: var(--primary);"></span><span>${pet.breed}</span></span>` +
        `<span><span class="color-indicator" style="background: var(--secondary);"></span><span>${pet.age} year${pet.age === 1 ? '' : 's'} old</span></span>`;
      modalContent.appendChild(meta);
      // Fun Fact
      const fact = document.createElement('div');
      fact.className = 'modal-fact';
      fact.textContent = pet.fact;
      modalContent.appendChild(fact);
      // Description
      const desc = document.createElement('div');
      desc.className = 'modal-description';
      desc.id = 'modal-description';
      desc.textContent = pet.description;
      modalContent.appendChild(desc);
      // Show modal
      modal.setAttribute('aria-hidden', 'false');
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      // Focus trap
      setTimeout(() => {
        document.querySelector('.modal-dialog').focus();
      }, 10);
    }

    function closePetModal() {
      const modal = document.getElementById('pet-modal');
      modal.setAttribute('aria-hidden', 'true');
      modal.style.display = 'none';
      document.body.style.overflow = '';
      // Restore focus to last opened button
      if (window.lastModalBtn) {
        window.lastModalBtn.focus();
      }
    }

    // Modal focus trap and keyboard controls
    function modalKeyHandler(e) {
      const modal = document.getElementById('pet-modal');
      if (modal.getAttribute('aria-hidden') === 'true') return;
      if (e.key === 'Escape') {
        closePetModal();
      }
      // Focus trap: keep focus inside modal
      const focusable = modal.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
      if (focusable.length) {
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        if (e.key === 'Tab') {
          if (e.shiftKey && document.activeElement === first) {
            e.preventDefault();
            last.focus();
          } else if (!e.shiftKey && document.activeElement === last) {
            e.preventDefault();
            first.focus();
          }
        }
      }
    }

    // Main navigation dropdown menu logic
    function menuToggleHandler(e) {
      const btn = document.getElementById('more-menu-btn');
      const menu = document.getElementById('more-menu');
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      if (e.type === 'click' || e.key === 'Enter' || e.key === ' ') {
        btn.setAttribute('aria-expanded', String(!expanded));
        menu.setAttribute('aria-hidden', String(expanded));
        if (!expanded) {
          // Open: focus first menu item
          setTimeout(() => {
            const firstItem = menu.querySelector('a');
            if (firstItem) firstItem.focus();
          }, 10);
        } else {
          btn.focus();
        }
        e.preventDefault();
      } else if (e.key === 'ArrowDown') {
        // Open and focus first item
        btn.setAttribute('aria-expanded', 'true');
        menu.setAttribute('aria-hidden', 'false');
        setTimeout(() => {
          const firstItem = menu.querySelector('a');
          if (firstItem) firstItem.focus();
        }, 10);
        e.preventDefault();
      } else if (e.key === 'Escape') {
        btn.setAttribute('aria-expanded', 'false');
        menu.setAttribute('aria-hidden', 'true');
        btn.focus();
      }
    }
    // Dropdown menu keyboard navigation
    function menuKeyNav(e) {
      const menu = document.getElementById('more-menu');
      if (menu.getAttribute('aria-hidden') === 'true') return;
      const items = Array.from(menu.querySelectorAll('a'));
      const idx = items.indexOf(document.activeElement);
      if (e.key === 'ArrowDown') {
        if (idx < items.length - 1) {
          items[idx + 1].focus();
        } else {
          items[0].focus();
        }
        e.preventDefault();
      } else if (e.key === 'ArrowUp') {
        if (idx > 0) {
          items[idx - 1].focus();
        } else {
          items[items.length - 1].focus();
        }
        e.preventDefault();
      } else if (e.key === 'Escape') {
        document.getElementById('more-menu-btn').setAttribute('aria-expanded', 'false');
        menu.setAttribute('aria-hidden', 'true');
        document.getElementById('more-menu-btn').focus();
      }
    }
    // Close menu on outside click
    function closeMenuOnClick(e) {
      const btn = document.getElementById('more-menu-btn');
      const menu = document.getElementById('more-menu');
      if (!btn.contains(e.target) && !menu.contains(e.target)) {
        btn.setAttribute('aria-expanded', 'false');
        menu.setAttribute('aria-hidden', 'true');
      }
    }

    // Skip link focus management
    document.getElementById('skip-link').addEventListener('click', function() {
      document.getElementById('main-content').focus();
    });

    // Search and filter event listeners
    document.getElementById('search-input').addEventListener('input', function(e) {
      // Validate input (letters and spaces only)
      const val = this.value;
      if (val && !/^[A-Za-z\s]*$/.test(val)) {
        this.setAttribute('aria-invalid', 'true');
        document.getElementById('search-error').textContent = "Please enter only letters and spaces for search.";
        document.getElementById('search-error').style.display = '';
        return;
      }
      this.removeAttribute('aria-invalid');
      document.getElementById('search-error').style.display = 'none';
      filterPets();
    });
    document.getElementById('breed-filter').addEventListener('change', filterPets);
    document.getElementById('age-filter').addEventListener('change', filterPets);
    document.getElementById('clear-filters-btn').addEventListener('click', clearFilters);

    // Modal event listeners
    document.getElementById('modal-close-btn').addEventListener('click', closePetModal);
    document.getElementById('pet-modal').addEventListener('keydown', modalKeyHandler);
    // Click outside modal dialog closes modal
    document.getElementById('pet-modal').addEventListener('mousedown', function(e) {
      if (e.target === this) closePetModal();
    });

    // Main navigation menu event listeners
    document.getElementById('more-menu-btn').addEventListener('click', menuToggleHandler);
    document.getElementById('more-menu-btn').addEventListener('keydown', menuToggleHandler);
    document.getElementById('more-menu').addEventListener('keydown', menuKeyNav);
    document.addEventListener('mousedown', closeMenuOnClick);

    // Pet details modal: remember last opened button for focus restoration
    document.getElementById('pet-gallery').addEventListener('click', function(e) {
      if (e.target.classList.contains('pet-details-btn')) {
        window.lastModalBtn = e.target;
      }
    });

    // Color pickers for user-customizable colors (AAA)
    document.getElementById('bg-color-picker').addEventListener('input', function() {
      document.documentElement.style.setProperty('--bg-light', this.value);
      document.body.classList.add('user-custom-bg');
    });
    document.getElementById('fg-color-picker').addEventListener('input', function() {
      document.documentElement.style.setProperty('--text', this.value);
      document.body.classList.add('user-custom-fg');
    });

    // Accessible "Submit a Pet" form validation
    document.getElementById('pet-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('pet-name');
      const breed = document.getElementById('pet-breed');
      const age = document.getElementById('pet-age');
      const photo = document.getElementById('pet-photo');
      const fact = document.getElementById('pet-fact');
      let valid = true;
      let errorMsg = '';
      // Name
      if (!name.value.trim() || !/^[A-Za-z\s\-']{2,40}$/.test(name.value.trim())) {
        name.setAttribute('aria-invalid', 'true');
        errorMsg += 'Please enter a valid pet name (letters, spaces, hyphens, apostrophes, 2-40 chars). ';
        valid = false;
      } else {
        name.removeAttribute('aria-invalid');
      }
      // Breed
      if (!breed.value.trim() || !/^[A-Za-z\s\-']{2,40}$/.test(breed.value.trim())) {
        breed.setAttribute('aria-invalid', 'true');
        errorMsg += 'Please enter a valid breed (letters, spaces, hyphens, apostrophes, 2-40 chars). ';
        valid = false;
      } else {
        breed.removeAttribute('aria-invalid');
      }
      // Age
      if (!age.value || isNaN(age.value) || age.value < 0 || age.value > 40) {
        age.setAttribute('aria-invalid', 'true');
        errorMsg += 'Please enter a valid age (0-40 years). ';
        valid = false;
      } else {
        age.removeAttribute('aria-invalid');
      }
      // Photo
      if (!photo.value.trim() || !/^https?:\/\/.+\.(jpg|jpeg|png|webp|gif)$/i.test(photo.value.trim())) {
        photo.setAttribute('aria-invalid', 'true');
        errorMsg += 'Please provide a valid image URL (jpg, png, gif, webp). ';
        valid = false;
      } else {
        photo.removeAttribute('aria-invalid');
      }
      // Fact
      if (!fact.value.trim() || fact.value.trim().length < 5 || fact.value.trim().length > 100) {
        fact.setAttribute('aria-invalid', 'true');
        errorMsg += 'Please enter a fun fact (5-100 characters). ';
        valid = false;
      } else {
        fact.removeAttribute('aria-invalid');
      }
      // Show error or success
      const errorDiv = document.getElementById('pet-form-error');
      const successDiv = document.getElementById('pet-form-success');
      if (!valid) {
        errorDiv.textContent = errorMsg;
        errorDiv.style.display = '';
        successDiv.style.display = 'none';
        if (errorMsg) errorDiv.focus();
        return;
      }
      errorDiv.style.display = 'none';
      successDiv.textContent = 'Thank you! Your pet submission has been received for review.';
      successDiv.style.display = '';
      this.reset();
      setTimeout(() => {
        successDiv.style.display = 'none';
      }, 6000);
    });

    // On page load
    window.addEventListener('DOMContentLoaded', function() {
      populateBreedFilter();
      renderPets(pets);
      // Accessibility: set initial focus to main heading if navigated via skip link
      if (window.location.hash === '#main-content') {
        document.getElementById('main-content').focus();
      }
    });

    // Responsive zoom: ensure no horizontal scroll at 200% zoom
    window.addEventListener('resize', function() {
      document.body.style.maxWidth = window.innerWidth + 'px';
    });

    // Reduce motion: disable transitions if prefers-reduced-motion
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      document.body.classList.add('reduce-motion');
    }
  </script>
</body>
</html>