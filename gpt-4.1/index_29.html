<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Meditation Timer – Accessible, Calming, and Interactive (WCAG 2.2 AAA)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Color palette chosen for high contrast and calming vibrancy -->
  <style>
    :root {
      --bg: #f5fafc;
      --bg-alt: #e0f0f6;
      --primary: #0077b6;
      --primary-dark: #005f87;
      --secondary: #90e0ef;
      --accent: #48cae4;
      --danger: #c1121f;
      --success: #007f5f;
      --text: #14213d;
      --text-light: #ffffff;
      --focus: #f9a826;
      --shadow: rgba(0, 0, 0, 0.07);
      --border: #a5a5a5;
      --icon-contrast: #222;
      --link: #0077b6;
      --link-visited: #4b1e8a;
      --error-bg: #ffe6e6;
      --help-bg: #e9f8e5;
      --audio-bg: #eafaf1;
      --progress-bg: #d6eaff;
      --progress-fg: #0077b6;
      --focus-outline: 2px solid var(--focus);
      --font-size-base: 1.2rem;
      --line-height-base: 1.7;
      --max-line-length: 80ch;
    }

    html {
      background: linear-gradient(120deg, var(--secondary) 0%, var(--bg) 100%);
      font-size: 100%;
      box-sizing: border-box;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }
    body {
      font-family: 'Segoe UI', 'Arial', sans-serif;
      color: var(--text);
      background: transparent;
      margin: 0;
      font-size: var(--font-size-base);
      line-height: var(--line-height-base);
      max-width: 100vw;
      min-height: 100vh;
      padding: 0;
      overflow-x: hidden;
    }
    a {
      color: var(--link);
      text-decoration: underline;
      outline: none;
    }
    a:visited {
      color: var(--link-visited);
    }
    a:focus, button:focus, input:focus, select:focus, textarea:focus {
      outline: var(--focus-outline);
      outline-offset: 2px;
      box-shadow: 0 0 0 3px var(--focus);
      background: #fffbe7;
    }
    /* Enhanced visible focus for all interactive elements */
    .focus-visible {
      outline: var(--focus-outline) !important;
      box-shadow: 0 0 0 3px var(--focus) !important;
      background: #fffbe7 !important;
    }
    /* Skip link styling */
    .skip-link {
      position: absolute;
      left: 8px;
      top: 8px;
      z-index: 1000;
      background: var(--primary);
      color: var(--text-light);
      padding: 10px 18px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 1.1em;
      text-decoration: none;
      box-shadow: 0 2px 8px var(--shadow);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }
    .skip-link:focus {
      opacity: 1;
      pointer-events: auto;
    }
    header {
      background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
      color: var(--text-light);
      padding: 0.5em 0 1.2em 0;
      box-shadow: 0 2px 8px var(--shadow);
      border-bottom: 4px solid var(--primary-dark);
    }
    .site-title {
      margin: 0 0 0.2em 0;
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      text-shadow: 0 2px 8px rgba(0,0,0,0.09);
      line-height: 1.2;
      max-width: var(--max-line-length);
    }
    .site-desc {
      font-size: 1.15rem;
      max-width: var(--max-line-length);
      margin: 0 auto 0.3em auto;
      color: #e0fbfc;
    }
    nav[aria-label] {
      background: var(--primary-dark);
      color: var(--text-light);
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5em;
      padding: 0.5em 0;
      font-size: 1.08em;
      border-bottom: 2px solid var(--primary);
    }
    .nav-list {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 1.5em;
      margin: 0;
      padding: 0;
    }
    .nav-list li {
      display: inline-block;
    }
    .nav-link, .nav-link:visited {
      color: var(--text-light);
      text-decoration: none;
      font-weight: 600;
      padding: 0.6em 1.2em;
      border-radius: 6px;
      transition: background 0.2s, color 0.2s;
      min-width: 44px;
      min-height: 44px;
      display: inline-block;
      text-align: center;
    }
    .nav-link:focus, .nav-link:hover {
      background: var(--accent);
      color: var(--primary-dark);
      outline: var(--focus-outline);
    }
    .nav-link[aria-current="page"] {
      background: var(--success);
      color: var(--text-light);
      border: 2px solid var(--accent);
    }
    /* Breadcrumbs */
    nav[aria-label="Breadcrumb"] {
      background: var(--bg-alt);
      padding: 0.3em 1em;
      font-size: 1em;
      margin-top: 0.3em;
      border-bottom: 1px solid var(--primary);
    }
    .breadcrumb-list {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5em;
      margin: 0;
      padding: 0;
      align-items: center;
    }
    .breadcrumb-list li {
      display: flex;
      align-items: center;
    }
    .breadcrumb-separator {
      margin: 0 0.5em;
      color: var(--primary-dark);
      font-size: 1.1em;
    }
    .breadcrumb-link, .breadcrumb-link:visited {
      color: var(--primary-dark);
      text-decoration: underline;
      font-weight: 500;
      background: none;
      padding: 0.1em 0.5em;
      border-radius: 4px;
      min-width: 44px;
      min-height: 44px;
      display: inline-block;
    }
    .breadcrumb-link:focus, .breadcrumb-link:hover {
      background: var(--secondary);
      outline: var(--focus-outline);
      color: var(--primary);
    }
    .breadcrumb-current {
      font-weight: 700;
      color: var(--primary);
      background: var(--secondary);
      border-radius: 4px;
      padding: 0.1em 0.5em;
    }

    main {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      gap: 2.5em;
      margin: 2em auto 0 auto;
      max-width: 1100px;
      min-height: 60vh;
      padding: 1em;
      background: var(--bg);
      border-radius: 16px;
      box-shadow: 0 2px 16px var(--shadow);
    }
    .main-content {
      flex: 2 1 420px;
      max-width: 600px;
      min-width: 320px;
    }
    aside {
      flex: 1 1 260px;
      min-width: 260px;
      max-width: 350px;
      background: var(--bg-alt);
      border-radius: 12px;
      padding: 1.2em 1em 1em 1em;
      box-shadow: 0 2px 8px var(--shadow);
      margin-top: 0.7em;
      align-self: flex-start;
    }
    /* Meditation Timer Card */
    .timer-card {
      background: var(--secondary);
      border-radius: 16px;
      box-shadow: 0 2px 12px var(--shadow);
      padding: 2em 2em 1.5em 2em;
      margin-bottom: 2em;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 100%;
    }
    .timer-heading {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 1.2em;
      text-align: center;
      letter-spacing: 0.01em;
    }
    .timer-display {
      font-size: 2.7rem;
      font-weight: 700;
      color: var(--primary);
      background: var(--progress-bg);
      border-radius: 12px;
      padding: 0.7em 1.5em;
      margin-bottom: 1.1em;
      border: 2px solid var(--primary-dark);
      letter-spacing: 0.04em;
      min-width: 190px;
      text-align: center;
      box-shadow: 0 1px 4px var(--shadow);
      line-height: 1.2;
    }
    .timer-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1.2em;
      justify-content: center;
      margin-bottom: 1.3em;
    }
    .timer-btn {
      font-size: 1.15em;
      font-weight: 600;
      background: var(--primary);
      color: var(--text-light);
      border: none;
      border-radius: 8px;
      padding: 0.9em 1.7em;
      min-width: 44px;
      min-height: 44px;
      margin: 0.2em 0;
      cursor: pointer;
      box-shadow: 0 1px 4px var(--shadow);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      outline: none;
      position: relative;
    }
    .timer-btn:focus, .timer-btn:hover {
      background: var(--focus);
      color: var(--primary-dark);
      outline: var(--focus-outline);
      box-shadow: 0 2px 8px var(--shadow);
    }
    .timer-btn[aria-pressed="true"] {
      background: var(--success);
      color: var(--text-light);
      border: 2px solid var(--accent);
    }
    .timer-btn[disabled], .timer-btn[aria-disabled="true"] {
      background: #b8b8b8;
      color: #444;
      cursor: not-allowed;
      border: 1px solid #a5a5a5;
    }
    /* Timer progress bar */
    .progress-container {
      width: 100%;
      background: var(--progress-bg);
      border-radius: 8px;
      height: 18px;
      margin: 1em 0 0.8em 0;
      position: relative;
      border: 2px solid var(--primary-dark);
      box-shadow: 0 1px 4px var(--shadow);
      overflow: hidden;
    }
    .progress-bar {
      background: linear-gradient(90deg, var(--accent), var(--primary));
      height: 100%;
      width: 0%;
      border-radius: 8px 0 0 8px;
      transition: width 0.5s cubic-bezier(0.4,0.2,0.2,1);
    }
    .progress-label {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -55%);
      font-size: 1em;
      color: var(--primary-dark);
      font-weight: 600;
      pointer-events: none;
      z-index: 2;
      text-shadow: 0 1px 4px #fff, 0 1px 4px #e0f0f6;
    }
    /* Session Settings Form */
    .settings-form {
      background: var(--bg-alt);
      border-radius: 10px;
      padding: 1.2em 1em 1em 1em;
      box-shadow: 0 1px 4px var(--shadow);
      margin-bottom: 1.7em;
      width: 100%;
      max-width: 100%;
    }
    .settings-legend {
      font-size: 1.12em;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.7em;
    }
    .form-row {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-end;
      gap: 1.5em;
      margin-bottom: 1.2em;
    }
    .form-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 0.8em;
      min-width: 140px;
      max-width: 220px;
      flex: 1 1 140px;
    }
    label {
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.4em;
      font-size: 1em;
      letter-spacing: 0.01em;
    }
    input[type="number"], select {
      font-size: 1.1em;
      padding: 0.5em 0.7em;
      border-radius: 7px;
      border: 2px solid var(--primary-dark);
      color: var(--text);
      background: var(--bg);
      min-width: 44px;
      min-height: 44px;
      transition: border-color 0.2s;
      outline: none;
    }
    input[type="number"]:focus, select:focus {
      border-color: var(--focus);
      background: #fffbe7;
    }
    .required-indicator {
      color: var(--danger);
      font-size: 1.1em;
      margin-left: 0.2em;
      vertical-align: middle;
      font-weight: bold;
    }
    .help-text {
      font-size: 0.97em;
      color: #444;
      background: var(--help-bg);
      border-radius: 5px;
      padding: 0.3em 0.7em;
      margin-top: 0.2em;
      margin-bottom: 0.3em;
      display: inline-block;
      line-height: 1.5;
      max-width: 95%;
    }
    .error-message {
      color: var(--danger);
      background: var(--error-bg);
      font-size: 1em;
      border-radius: 5px;
      padding: 0.3em 0.7em;
      margin-top: 0.2em;
      margin-bottom: 0.3em;
      display: inline-block;
      line-height: 1.5;
      max-width: 95%;
    }
    .settings-actions {
      display: flex;
      gap: 1.2em;
      margin-top: 0.7em;
    }
    .settings-btn {
      font-size: 1.08em;
      font-weight: 600;
      background: var(--primary-dark);
      color: var(--text-light);
      border: none;
      border-radius: 8px;
      padding: 0.8em 1.5em;
      min-width: 44px;
      min-height: 44px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      outline: none;
    }
    .settings-btn:focus, .settings-btn:hover {
      background: var(--focus);
      color: var(--primary-dark);
      outline: var(--focus-outline);
    }
    /* Soothing Sounds */
    .sound-section {
      background: var(--audio-bg);
      border-radius: 12px;
      padding: 1.3em 1em 1.2em 1em;
      margin-bottom: 2em;
      box-shadow: 0 1px 4px var(--shadow);
      width: 100%;
      max-width: 100%;
    }
    .sound-heading {
      font-size: 1.18em;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 0.8em;
      text-align: left;
    }
    .sound-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 1.3em;
    }
    .sound-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: var(--secondary);
      border-radius: 8px;
      padding: 0.7em 1em;
      min-width: 120px;
      min-height: 120px;
      box-shadow: 0 1px 4px var(--shadow);
      position: relative;
      border: 2px solid var(--primary-dark);
      transition: border-color 0.2s;
    }
    .sound-item.selected {
      border-color: var(--success);
      box-shadow: 0 2px 8px var(--shadow);
    }
    .sound-btn {
      background: var(--primary);
      color: var(--text-light);
      border: none;
      border-radius: 8px;
      padding: 0.6em 1.2em;
      font-size: 1em;
      font-weight: 600;
      margin-top: 0.7em;
      min-width: 44px;
      min-height: 44px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      outline: none;
    }
    .sound-btn:focus, .sound-btn:hover {
      background: var(--focus);
      color: var(--primary-dark);
      outline: var(--focus-outline);
    }
    .sound-icon {
      font-size: 2.3em;
      margin-bottom: 0.3em;
      color: var(--icon-contrast);
      display: block;
      text-align: center;
    }
    /* Progress Tracker */
    .progress-section {
      background: var(--progress-bg);
      border-radius: 12px;
      padding: 1.3em 1em 1.2em 1em;
      box-shadow: 0 1px 4px var(--shadow);
      margin-bottom: 1.5em;
      width: 100%;
      max-width: 100%;
    }
    .progress-heading {
      font-size: 1.18em;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 0.8em;
      text-align: left;
    }
    .progress-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg);
      border-radius: 8px;
      overflow: hidden;
      font-size: 1em;
      margin-bottom: 0.8em;
    }
    .progress-table th, .progress-table td {
      padding: 0.7em 0.5em;
      border-bottom: 1px solid var(--primary-dark);
      text-align: center;
    }
    .progress-table th {
      background: var(--primary-dark);
      color: var(--text-light);
      font-weight: 700;
      font-size: 1.08em;
    }
    .progress-table tr:last-child td {
      border-bottom: none;
    }
    .progress-table tr.completed {
      background: var(--audio-bg);
    }
    .progress-table tr.incomplete {
      background: var(--bg-alt);
    }
    .no-sessions {
      color: #333;
      font-size: 1em;
      margin: 1em 0;
      text-align: center;
    }
    /* Settings: color scheme picker */
    .color-picker-section {
      background: var(--bg-alt);
      border-radius: 12px;
      padding: 1.2em 1em 1em 1em;
      margin-bottom: 1.2em;
      box-shadow: 0 1px 4px var(--shadow);
    }
    .color-picker-label {
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.4em;
      font-size: 1em;
    }
    .color-picker-group {
      display: flex;
      gap: 1em;
      align-items: center;
      margin-bottom: 0.7em;
    }
    .color-picker {
      width: 44px;
      height: 44px;
      border-radius: 8px;
      border: 2px solid var(--primary-dark);
      background: #fff;
      cursor: pointer;
      margin-right: 0.5em;
      box-shadow: 0 1px 4px var(--shadow);
      transition: border-color 0.2s;
      outline: none;
    }
    .color-picker:focus, .color-picker:hover {
      border-color: var(--focus);
      outline: var(--focus-outline);
    }
    /* Accessibility: enhanced focus for color pickers */
    .color-picker.selected {
      border-color: var(--success);
      box-shadow: 0 2px 8px var(--shadow);
    }
    /* Responsive Design */
    @media (max-width: 900px) {
      main {
        flex-direction: column;
        align-items: stretch;
        gap: 1.5em;
        padding: 0.5em;
      }
      aside {
        margin-top: 0;
      }
    }
    @media (max-width: 600px) {
      .timer-card, .settings-form, .sound-section, .progress-section, aside {
        padding-left: 0.5em;
        padding-right: 0.5em;
      }
      .timer-display {
        font-size: 2.1rem;
        min-width: 120px;
      }
    }
    /* Line and paragraph spacing */
    p, ul, ol, dl {
      line-height: 1.7;
      margin-bottom: 1.3em;
      max-width: var(--max-line-length);
    }
    h1, h2, h3, h4, h5, h6 {
      line-height: 1.3;
      margin-top: 1.1em;
      margin-bottom: 0.7em;
      max-width: var(--max-line-length);
    }
    /* Status messages */
    [role="status"], [role="alert"] {
      font-size: 1.08em;
      margin-top: 0.8em;
      margin-bottom: 0.7em;
      background: var(--help-bg);
      color: var(--success);
      border-radius: 6px;
      padding: 0.5em 1em;
      font-weight: 600;
      min-width: 44px;
      min-height: 44px;
      display: inline-block;
    }
    [role="alert"] {
      background: var(--error-bg);
      color: var(--danger);
    }
    /* Micro-interactions for buttons (reduced motion) */
    @media (prefers-reduced-motion: reduce) {
      *, *:before, *:after {
        transition: none !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
      }
      .progress-bar {
        transition: none !important;
      }
    }
    /* Hide visually but keep accessible for screen readers */
    .sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0,0,0,0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }
    /* Prevent horizontal scroll at 200% zoom */
    html, body {
      max-width: 100vw;
      overflow-x: hidden;
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link" id="skip-link">Skip to main content</a>
  <header>
    <h1 class="site-title">Meditation Timer: Accessible, Calming, and Interactive</h1>
    <p class="site-desc">A serene, fully accessible meditation timer with soothing sounds and progress tracking. Designed for everyone, meeting the highest accessibility standards (WCAG 2.2 AAA).</p>
    <nav aria-label="Main navigation">
      <ul class="nav-list">
        <li><a href="#main-content" class="nav-link" aria-current="page">Timer</a></li>
        <li><a href="#sounds" class="nav-link">Soothing Sounds</a></li>
        <li><a href="#progress" class="nav-link">Progress Tracker</a></li>
        <li><a href="#settings" class="nav-link">Settings</a></li>
        <li><a href="#help" class="nav-link">Help</a></li>
        <li><a href="#sitemap" class="nav-link">Sitemap</a></li>
        <li><a href="#search" class="nav-link">Search</a></li>
      </ul>
    </nav>
    <nav aria-label="Breadcrumb">
      <ol class="breadcrumb-list">
        <li><a href="#" class="breadcrumb-link">Home</a></li>
        <li><span class="breadcrumb-separator" aria-hidden="true">›</span></li>
        <li><span class="breadcrumb-current" aria-current="page">Meditation Timer</span></li>
      </ol>
    </nav>
  </header>
  <main id="main-content" tabindex="-1">
    <section class="main-content" aria-labelledby="timer-section-heading">
      <article class="timer-card" aria-labelledby="timer-section-heading">
        <h2 id="timer-section-heading" class="timer-heading">Meditation Timer</h2>
        <div class="timer-display" id="timer-display" aria-live="polite" aria-atomic="true">00:00</div>
        <div class="progress-container" aria-label="Session progress">
          <div class="progress-bar" id="progress-bar" style="width:0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" role="progressbar"></div>
          <span class="progress-label" id="progress-label">0%</span>
        </div>
        <div class="timer-controls" role="group" aria-label="Timer controls">
          <button type="button" class="timer-btn" id="start-btn" aria-pressed="false">Start</button>
          <button type="button" class="timer-btn" id="pause-btn" aria-pressed="false" disabled aria-disabled="true">Pause</button>
          <button type="button" class="timer-btn" id="reset-btn" aria-pressed="false" disabled aria-disabled="true">Reset</button>
        </div>
        <div id="timer-status" role="status" aria-live="polite" class="sr-only"></div>
      </article>
      <form class="settings-form" id="settings-form" aria-labelledby="settings-section-heading" autocomplete="off" novalidate>
        <fieldset>
          <legend id="settings-section-heading" class="settings-legend">Session Settings</legend>
          <div class="form-row">
            <div class="form-group">
              <label for="minutes" id="minutes-label">Minutes
                <span class="required-indicator" aria-hidden="true">*</span>
              </label>
              <input type="number" id="minutes" name="minutes" min="1" max="120" step="1" required aria-required="true"
                aria-describedby="minutes-help" autocomplete="off" inputmode="numeric" pattern="[0-9]*" />
              <span id="minutes-help" class="help-text">Set session length in minutes (1–120).</span>
              <span id="minutes-error" class="error-message" role="alert" aria-live="assertive" style="display:none;"></span>
            </div>
            <div class="form-group">
              <label for="seconds" id="seconds-label">Seconds
                <span class="required-indicator" aria-hidden="true">*</span>
              </label>
              <input type="number" id="seconds" name="seconds" min="0" max="59" step="1" required aria-required="true"
                aria-describedby="seconds-help" autocomplete="off" inputmode="numeric" pattern="[0-9]*" />
              <span id="seconds-help" class="help-text">Set additional seconds (0–59).</span>
              <span id="seconds-error" class="error-message" role="alert" aria-live="assertive" style="display:none;"></span>
            </div>
          </div>
          <div class="settings-actions">
            <button type="submit" class="settings-btn" id="apply-settings-btn">Apply</button>
            <button type="button" class="settings-btn" id="reset-settings-btn">Reset to Default</button>
          </div>
          <div id="settings-status" role="status" aria-live="polite" class="sr-only"></div>
        </fieldset>
      </form>
      <section class="sound-section" id="sounds" aria-labelledby="sound-section-heading">
        <h3 id="sound-section-heading" class="sound-heading">Soothing Sounds</h3>
        <ul class="sound-list" role="listbox" aria-label="Available soothing sounds">
          <li class="sound-item" id="sound-item-0" data-sound="none" tabindex="0" aria-selected="true" role="option">
            <span class="sound-icon" aria-hidden="true">🔇</span>
            <span id="sound-label-0">No Sound</span>
            <button type="button" class="sound-btn" aria-pressed="false" aria-label="Select no sound" tabindex="-1">Select</button>
          </li>
          <li class="sound-item" id="sound-item-1" data-sound="rain" tabindex="0" aria-selected="false" role="option">
            <span class="sound-icon" aria-hidden="true">🌧️</span>
            <span id="sound-label-1">Gentle Rain</span>
            <button type="button" class="sound-btn" aria-pressed="false" aria-label="Play gentle rain sound" tabindex="-1">Play</button>
          </li>
          <li class="sound-item" id="sound-item-2" data-sound="waves" tabindex="0" aria-selected="false" role="option">
            <span class="sound-icon" aria-hidden="true">🌊</span>
            <span id="sound-label-2">Ocean Waves</span>
            <button type="button" class="sound-btn" aria-pressed="false" aria-label="Play ocean waves sound" tabindex="-1">Play</button>
          </li>
          <li class="sound-item" id="sound-item-3" data-sound="forest" tabindex="0" aria-selected="false" role="option">
            <span class="sound-icon" aria-hidden="true">🌲</span>
            <span id="sound-label-3">Forest Birds</span>
            <button type="button" class="sound-btn" aria-pressed="false" aria-label="Play forest birds sound" tabindex="-1">Play</button>
          </li>
        </ul>
        <div id="sound-status" role="status" aria-live="polite" class="sr-only"></div>
        <div id="audio-transcript" class="help-text" aria-describedby="audio-transcript-desc" style="margin-top:1em;">
          <strong id="audio-transcript-desc">Audio Transcript:</strong>
          <ul>
            <li><strong>Gentle Rain:</strong> [Soft rain falls, gentle water drops patter, no speech.]</li>
            <li><strong>Ocean Waves:</strong> [Slow, rhythmic ocean waves roll and crash softly, no speech.]</li>
            <li><strong>Forest Birds:</strong> [Calm forest ambiance, distant bird calls and soft wind, no speech.]</li>
          </ul>
          <span class="sr-only">All audio is low background sound, contains no speech, and is safe for all users.</span>
        </div>
      </section>
      <section class="progress-section" id="progress" aria-labelledby="progress-section-heading">
        <h3 id="progress-section-heading" class="progress-heading">Progress Tracker</h3>
        <table class="progress-table" id="progress-table" aria-describedby="progress-table-desc">
          <caption id="progress-table-desc" class="sr-only">
            Table of your last 10 meditation sessions, showing date, session length, and completion status.
          </caption>
          <thead>
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Session Length</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody id="progress-table-body">
            <tr><td colspan="3" class="no-sessions">No sessions recorded yet.</td></tr>
          </tbody>
        </table>
        <button type="button" class="settings-btn" id="clear-progress-btn" aria-label="Clear all progress" style="background:var(--danger);color:var(--text-light);margin-top:0.3em;">Clear Progress</button>
        <div id="progress-status" role="status" aria-live="polite" class="sr-only"></div>
      </section>
    </section>
    <aside aria-labelledby="settings-aside-heading">
      <h2 id="settings-aside-heading" style="font-size:1.18em;margin-bottom:0.7em;color:var(--primary-dark);">Settings & Personalization</h2>
      <section class="color-picker-section" id="settings" aria-labelledby="color-picker-section-heading">
        <h3 id="color-picker-section-heading" class="color-picker-label">Color Scheme</h3>
        <div class="color-picker-group" role="radiogroup" aria-label="Select color scheme">
          <label>
            <input type="radio" name="color-scheme" class="color-picker" id="color-default" value="default" checked aria-checked="true" aria-label="Default color scheme" />
            <span class="sr-only">Default</span>
          </label>
          <label>
            <input type="radio" name="color-scheme" class="color-picker" id="color-dark" value="dark" aria-checked="false" aria-label="Dark color scheme" />
            <span class="sr-only">Dark</span>
          </label>
          <label>
            <input type="radio" name="color-scheme" class="color-picker" id="color-high-contrast" value="high-contrast" aria-checked="false" aria-label="High contrast color scheme" />
            <span class="sr-only">High Contrast</span>
          </label>
        </div>
        <div class="help-text" id="color-picker-help">
          Choose a color scheme for best readability and comfort. Default is calming and accessible; Dark is for low-light; High Contrast maximizes text clarity.
        </div>
      </section>
      <section aria-labelledby="accessibility-section-heading" style="margin-bottom:1.2em;">
        <h3 id="accessibility-section-heading" style="font-size:1.08em;margin-bottom:0.4em;color:var(--primary-dark);">Accessibility Options</h3>
        <ul>
          <li>All features are fully keyboard accessible.</li>
          <li>All colors meet or exceed 7:1 contrast ratio.</li>
          <li>Focus indicators are bold and always visible.</li>
          <li>All controls are at least 44x44px for touch and pointer accessibility.</li>
          <li>All audio has transcripts and is low background only.</li>
        </ul>
      </section>
      <section aria-labelledby="help-section-heading" id="help">
        <h3 id="help-section-heading" style="font-size:1.08em;margin-bottom:0.4em;color:var(--primary-dark);">Context-Sensitive Help</h3>
        <ul>
          <li><strong>Timer:</strong> Use Start, Pause, and Reset to control your session. The timer is fully keyboard accessible.</li>
          <li><strong>Session Settings:</strong> Set your preferred session length. Error messages will guide you if values are out of range.</li>
          <li><strong>Soothing Sounds:</strong> Select a sound to play during your session. You can stop sounds anytime.</li>
          <li><strong>Progress Tracker:</strong> View your last 10 sessions. Clear progress with the button below the table.</li>
          <li><strong>Color Scheme:</strong> Change the page’s color scheme for your needs.</li>
        </ul>
      </section>
    </aside>
  </main>
  <footer style="background:var(--primary-dark);color:var(--text-light);padding:1.2em 0 1.1em 0;text-align:center;margin-top:2em;">
    <nav aria-label="Footer navigation" style="margin-bottom:0.7em;">
      <ul class="nav-list" style="justify-content:center;gap:1em;">
        <li><a href="#main-content" class="nav-link">Timer</a></li>
        <li><a href="#sounds" class="nav-link">Soothing Sounds</a></li>
        <li><a href="#progress" class="nav-link">Progress Tracker</a></li>
        <li><a href="#settings" class="nav-link">Settings</a></li>
        <li><a href="#help" class="nav-link">Help</a></li>
        <li><a href="#sitemap" class="nav-link">Sitemap</a></li>
      </ul>
    </nav>
    <div style="margin-bottom:0.5em;">
      <strong>Meditation Timer</strong> &mdash; <span lang="en">Accessible, Calming, and Interactive</span>
    </div>
    <div>
      <a href="#main-content" style="color:var(--accent);text-decoration:underline;">Back to top</a>
    </div>
    <div style="margin-top:0.6em;font-size:0.97em;">
      <span>© 2024 Meditation Timer. All rights reserved.</span>
    </div>
  </footer>
  <!-- Hidden audio elements for soothing sounds (low background, no speech) -->
  <audio id="audio-rain" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa4e5b.mp3" preload="none" aria-label="Gentle Rain sound" tabindex="-1"></audio>
  <audio id="audio-waves" src="https://cdn.pixabay.com/audio/2022/02/23/audio_115b4b2d2e.mp3" preload="none" aria-label="Ocean Waves sound" tabindex="-1"></audio>
  <audio id="audio-forest" src="https://cdn.pixabay.com/audio/2022/02/23/audio_115b6c2b2d.mp3" preload="none" aria-label="Forest Birds sound" tabindex="-1"></audio>
  <script>
    // Accessibility: Focus management for skip link
    document.getElementById('skip-link').addEventListener('click', function(e) {
      setTimeout(function() {
        document.getElementById('main-content').focus();
      }, 0);
    });

    // Color scheme switching (user-selectable, accessible)
    const colorSchemes = {
      default: {
        '--bg': '#f5fafc',
        '--bg-alt': '#e0f0f6',
        '--primary': '#0077b6',
        '--primary-dark': '#005f87',
        '--secondary': '#90e0ef',
        '--accent': '#48cae4',
        '--danger': '#c1121f',
        '--success': '#007f5f',
        '--text': '#14213d',
        '--text-light': '#ffffff',
        '--focus': '#f9a826',
        '--shadow': 'rgba(0, 0, 0, 0.07)',
        '--border': '#a5a5a5',
        '--icon-contrast': '#222',
        '--link': '#0077b6',
        '--link-visited': '#4b1e8a',
        '--error-bg': '#ffe6e6',
        '--help-bg': '#e9f8e5',
        '--audio-bg': '#eafaf1',
        '--progress-bg': '#d6eaff',
        '--progress-fg': '#0077b6',
        '--focus-outline': '2px solid #f9a826'
      },
      dark: {
        '--bg': '#192734',
        '--bg-alt': '#253545',
        '--primary': '#90e0ef',
        '--primary-dark': '#0077b6',
        '--secondary': '#023e8a',
        '--accent': '#48cae4',
        '--danger': '#ff5757',
        '--success': '#43d18a',
        '--text': '#f5fafc',
        '--text-light': '#ffffff',
        '--focus': '#f9a826',
        '--shadow': 'rgba(0,0,0,0.17)',
        '--border': '#5b8ab8',
        '--icon-contrast': '#fff',
        '--link': '#90e0ef',
        '--link-visited': '#e0aaff',
        '--error-bg': '#2b1e1e',
        '--help-bg': '#25443b',
        '--audio-bg': '#1e2e2e',
        '--progress-bg': '#0b243b',
        '--progress-fg': '#90e0ef',
        '--focus-outline': '2px solid #f9a826'
      },
      'high-contrast': {
        '--bg': '#fff',
        '--bg-alt': '#f2f2f2',
        '--primary': '#000',
        '--primary-dark': '#000',
        '--secondary': '#fff700',
        '--accent': '#00f',
        '--danger': '#d00',
        '--success': '#008000',
        '--text': '#000',
        '--text-light': '#fff',
        '--focus': '#f9a826',
        '--shadow': 'rgba(0,0,0,0.17)',
        '--border': '#000',
        '--icon-contrast': '#000',
        '--link': '#0000ee',
        '--link-visited': '#551a8b',
        '--error-bg': '#ffe6e6',
        '--help-bg': '#e9f8e5',
        '--audio-bg': '#eafaf1',
        '--progress-bg': '#d6eaff',
        '--progress-fg': '#000',
        '--focus-outline': '2px solid #f9a826'
      }
    };
    function setColorScheme(scheme) {
      if (!colorSchemes[scheme]) scheme = 'default';
      for (const key in colorSchemes[scheme]) {
        document.documentElement.style.setProperty(key, colorSchemes[scheme][key]);
      }
      // Update aria-checked and selected class
      document.querySelectorAll('.color-picker').forEach(el => {
        el.setAttribute('aria-checked', el.value === scheme ? 'true' : 'false');
        if (el.value === scheme) el.classList.add('selected');
        else el.classList.remove('selected');
      });
      localStorage.setItem('meditation-timer-color-scheme', scheme);
    }
    document.querySelectorAll('.color-picker').forEach(el => {
      el.addEventListener('change', function() {
        setColorScheme(this.value);
      });
      el.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          this.checked = true;
          setColorScheme(this.value);
        }
      });
    });
    // Load preferred color scheme
    const storedScheme = localStorage.getItem('meditation-timer-color-scheme');
    if (storedScheme && colorSchemes[storedScheme]) setColorScheme(storedScheme);

    // Timer logic
    let timer = {
      duration: 5 * 60, // default 5 min
      remaining: 5 * 60,
      running: false,
      interval: null,
      startTimestamp: null,
      pausedAt: null,
      completed: false
    };
    const timerDisplay = document.getElementById('timer-display');
    const progressBar = document.getElementById('progress-bar');
    const progressLabel = document.getElementById('progress-label');
    const startBtn = document.getElementById('start-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const resetBtn = document.getElementById('reset-btn');
    const timerStatus = document.getElementById('timer-status');

    function formatTime(secs) {
      const m = Math.floor(secs / 60);
      const s = secs % 60;
      return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }
    function updateTimerDisplay() {
      timerDisplay.textContent = formatTime(timer.remaining);
      const percent = Math.round(100 * (1 - timer.remaining / timer.duration));
      progressBar.style.width = percent + '%';
      progressBar.setAttribute('aria-valuenow', percent);
      progressLabel.textContent = percent + '%';
    }
    function setTimerControls(state) {
      // state: 'idle', 'running', 'paused', 'completed'
      switch(state) {
        case 'idle':
          startBtn.disabled = false; startBtn.setAttribute('aria-disabled', 'false');
          pauseBtn.disabled = true; pauseBtn.setAttribute('aria-disabled', 'true');
          resetBtn.disabled = true; resetBtn.setAttribute('aria-disabled', 'true');
          startBtn.setAttribute('aria-pressed', 'false');
          pauseBtn.setAttribute('aria-pressed', 'false');
          resetBtn.setAttribute('aria-pressed', 'false');
          break;
        case 'running':
          startBtn.disabled = true; startBtn.setAttribute('aria-disabled', 'true');
          pauseBtn.disabled = false; pauseBtn.setAttribute('aria-disabled', 'false');
          resetBtn.disabled = false; resetBtn.setAttribute('aria-disabled', 'false');
          startBtn.setAttribute('aria-pressed', 'true');
          pauseBtn.setAttribute('aria-pressed', 'false');
          resetBtn.setAttribute('aria-pressed', 'false');
          break;
        case 'paused':
          startBtn.disabled = false; startBtn.setAttribute('aria-disabled', 'false');
          pauseBtn.disabled = true; pauseBtn.setAttribute('aria-disabled', 'true');
          resetBtn.disabled = false; resetBtn.setAttribute('aria-disabled', 'false');
          startBtn.setAttribute('aria-pressed', 'false');
          pauseBtn.setAttribute('aria-pressed', 'true');
          resetBtn.setAttribute('aria-pressed', 'false');
          break;
        case 'completed':
          startBtn.disabled = true; startBtn.setAttribute('aria-disabled', 'true');
          pauseBtn.disabled = true; pauseBtn.setAttribute('aria-disabled', 'true');
          resetBtn.disabled = false; resetBtn.setAttribute('aria-disabled', 'false');
          startBtn.setAttribute('aria-pressed', 'false');
          pauseBtn.setAttribute('aria-pressed', 'false');
          resetBtn.setAttribute('aria-pressed', 'true');
          break;
      }
    }
    function startTimer() {
      if (timer.running || timer.remaining <= 0) return;
      timer.running = true;
      timer.completed = false;
      timer.startTimestamp = Date.now() - ((timer.pausedAt || 0) * 1000);
      timer.interval = setInterval(() => {
        const elapsed = Math.floor((Date.now() - timer.startTimestamp) / 1000);
        timer.remaining = Math.max(timer.duration - elapsed, 0);
        updateTimerDisplay();
        if (timer.remaining <= 0) {
          stopTimer(true);
        }
      }, 1000);
      setTimerControls('running');
      timerStatus.textContent = 'Timer started. Focus on your breath.';
    }
    function pauseTimer() {
      if (!timer.running) return;
      timer.running = false;
      clearInterval(timer.interval);
      timer.pausedAt = timer.duration - timer.remaining;
      setTimerControls('paused');
      timerStatus.textContent = 'Timer paused. Press Start to resume.';
    }
    function resetTimer() {
      timer.running = false;
      clearInterval(timer.interval);
      timer.remaining = timer.duration;
      timer.pausedAt = null;
      timer.completed = false;
      updateTimerDisplay();
      setTimerControls('idle');
      timerStatus.textContent = 'Timer reset.';
    }
    function stopTimer(completed) {
      timer.running = false;
      clearInterval(timer.interval);
      timer.remaining = 0;
      timer.completed = completed;
      updateTimerDisplay();
      setTimerControls('completed');
      if (completed) {
        timerStatus.textContent = 'Session complete! Great job!';
        saveSession(true);
        playSound('none'); // Stop sound
        // Play a soft bell sound (ARIA: "Session completed bell", low volume)
        playBell();
      } else {
        timerStatus.textContent = 'Timer stopped.';
      }
    }
    function playBell() {
      // Bell sound (short, low volume, safe for all)
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      o.frequency.value = 660;
      g.gain.value = 0.1;
      o.connect(g).connect(ctx.destination);
      o.start();
      setTimeout(() => { o.stop(); ctx.close(); }, 800);
    }
    startBtn.addEventListener('click', startTimer);
    pauseBtn.addEventListener('click', pauseTimer);
    resetBtn.addEventListener('click', resetTimer);
    // Keyboard accessibility for timer controls
    [startBtn, pauseBtn, resetBtn].forEach(btn => {
      btn.addEventListener('keydown', function(e) {
        if ((e.key === ' ' || e.key === 'Enter') && !btn.disabled) {
          e.preventDefault();
          btn.click();
        }
      });
    });
    // Initialize timer display
    updateTimerDisplay();
    setTimerControls('idle');

    // Session settings form
    const settingsForm = document.getElementById('settings-form');
    const minutesInput = document.getElementById('minutes');
    const secondsInput = document.getElementById('seconds');
    const applySettingsBtn = document.getElementById('apply-settings-btn');
    const resetSettingsBtn = document.getElementById('reset-settings-btn');
    const minutesError = document.getElementById('minutes-error');
    const secondsError = document.getElementById('seconds-error');
    const settingsStatus = document.getElementById('settings-status');

    // Default session: 5 min 0 sec
    function loadSettings() {
      const stored = JSON.parse(localStorage.getItem('meditation-timer-settings') || '{}');
      let m = 5, s = 0;
      if (typeof stored.minutes === 'number') m = stored.minutes;
      if (typeof stored.seconds === 'number') s = stored.seconds;
      minutesInput.value = m;
      secondsInput.value = s;
      timer.duration = m * 60 + s;
      timer.remaining = timer.duration;
      updateTimerDisplay();
    }
    function saveSettings(m, s) {
      localStorage.setItem('meditation-timer-settings', JSON.stringify({minutes: m, seconds: s}));
    }
    function validateSettingsForm() {
      let valid = true;
      minutesError.style.display = 'none';
      secondsError.style.display = 'none';
      minutesInput.setAttribute('aria-invalid', 'false');
      secondsInput.setAttribute('aria-invalid', 'false');
      const m = parseInt(minutesInput.value, 10);
      const s = parseInt(secondsInput.value, 10);
      if (isNaN(m) || m < 1 || m > 120) {
        minutesError.textContent = 'Please enter minutes between 1 and 120.';
        minutesError.style.display = 'inline-block';
        minutesInput.setAttribute('aria-invalid', 'true');
        valid = false;
      }
      if (isNaN(s) || s < 0 || s > 59) {
        secondsError.textContent = 'Please enter seconds between 0 and 59.';
        secondsError.style.display = 'inline-block';
        secondsInput.setAttribute('aria-invalid', 'true');
        valid = false;
      }
      if (valid && m === 1 && s === 0) {
        // Encourage longer sessions but allow 1 min
        settingsStatus.textContent = 'Tip: Try longer sessions for deeper relaxation.';
      }
      return valid;
    }
    settingsForm.addEventListener('submit', function(e) {
      e.preventDefault();
      if (!validateSettingsForm()) {
        settingsStatus.textContent = 'Please fix errors above before applying settings.';
        return;
      }
      const m = parseInt(minutesInput.value, 10);
      const s = parseInt(secondsInput.value, 10);
      timer.duration = m * 60 + s;
      timer.remaining = timer.duration;
      timer.pausedAt = null;
      timer.completed = false;
      updateTimerDisplay();
      setTimerControls('idle');
      saveSettings(m, s);
      settingsStatus.textContent = 'Session settings applied.';
    });
    resetSettingsBtn.addEventListener('click', function() {
      minutesInput.value = 5;
      secondsInput.value = 0;
      timer.duration = 5 * 60;
      timer.remaining = timer.duration;
      timer.pausedAt = null;
      timer.completed = false;
      updateTimerDisplay();
      setTimerControls('idle');
      saveSettings(5, 0);
      settingsStatus.textContent = 'Session settings reset to default.';
    });
    // Keyboard accessibility for form buttons
    [applySettingsBtn, resetSettingsBtn].forEach(btn => {
      btn.addEventListener('keydown', function(e) {
        if ((e.key === ' ' || e.key === 'Enter') && !btn.disabled) {
          e.preventDefault();
          btn.click();
        }
      });
    });
    // Prevent horizontal scroll at 200% zoom
    window.addEventListener('resize', function() {
      document.body.style.maxWidth = window.innerWidth + 'px';
    });

    // Soothing sounds logic
    const soundList = [
      {id: 'none', label: 'No Sound', audio: null},
      {id: 'rain', label: 'Gentle Rain', audio: document.getElementById('audio-rain')},
      {id: 'waves', label: 'Ocean Waves', audio: document.getElementById('audio-waves')},
      {id: 'forest', label: 'Forest Birds', audio: document.getElementById('audio-forest')}
    ];
    let currentSound = 'none';
    let soundPlaying = false;
    const soundStatus = document.getElementById('sound-status');
    function playSound(id) {
      // Stop all sounds first
      soundList.forEach(s => {
        if (s.audio) {
          s.audio.pause();
          s.audio.currentTime = 0;
        }
      });
      if (id === 'none') {
        currentSound = 'none';
        soundPlaying = false;
        updateSoundSelection();
        soundStatus.textContent = 'No sound selected.';
        return;
      }
      const sound = soundList.find(s => s.id === id);
      if (sound && sound.audio) {
        sound.audio.volume = 0.25; // low background
        sound.audio.loop = true;
        sound.audio.currentTime = 0;
        sound.audio.play();
        currentSound = id;
        soundPlaying = true;
        updateSoundSelection();
        soundStatus.textContent = `${sound.label} is now playing.`;
      }
    }
    function updateSoundSelection() {
      soundList.forEach((s, idx) => {
        const item = document.getElementById(`sound-item-${idx}`);
        const btn = item.querySelector('.sound-btn');
        if (s.id === currentSound && soundPlaying) {
          item.classList.add('selected');
          item.setAttribute('aria-selected', 'true');
          btn.textContent = 'Stop';
          btn.setAttribute('aria-label', `Stop ${s.label.toLowerCase()} sound`);
          btn.setAttribute('aria-pressed', 'true');
        } else {
          item.classList.remove('selected');
          item.setAttribute('aria-selected', s.id === currentSound ? 'true' : 'false');
          btn.textContent = s.id === 'none' ? 'Select' : 'Play';
          btn.setAttribute('aria-label', s.id === 'none' ? 'Select no sound' : `Play ${s.label.toLowerCase()} sound`);
          btn.setAttribute('aria-pressed', 'false');
        }
      });
    }
    // Sound item click/keyboard handlers
    document.querySelectorAll('.sound-item').forEach((item, idx) => {
      item.addEventListener('click', function(e) {
        if (e.target.classList.contains('sound-btn')) {
          // Button: play/stop
          const soundId = this.getAttribute('data-sound');
          if (soundId === currentSound && soundPlaying) {
            playSound('none');
          } else {
            playSound(soundId);
          }
        } else {
          // Item: select and play
          const soundId = this.getAttribute('data-sound');
          if (soundId !== 'none') playSound(soundId);
          else playSound('none');
        }
      });
      item.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          const soundId = this.getAttribute('data-sound');
          if (soundId !== 'none') playSound(soundId);
          else playSound('none');
        }
        // Arrow navigation for listbox
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
          e.preventDefault();
          const next = document.querySelectorAll('.sound-item')[(idx+1)%soundList.length];
          next.focus();
        }
        if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
          e.preventDefault();
          const prev = document.querySelectorAll('.sound-item')[(idx-1+soundList.length)%soundList.length];
          prev.focus();
        }
      });
      // Make sure focus is visible
      item.addEventListener('focus', function() {
        item.classList.add('focus-visible');
      });
      item.addEventListener('blur', function() {
        item.classList.remove('focus-visible');
      });
    });
    // Keyboard accessibility for sound buttons
    document.querySelectorAll('.sound-btn').forEach(btn => {
      btn.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    });
    // Stop sound when navigating away
    window.addEventListener('beforeunload', function() {
      playSound('none');
    });
    updateSoundSelection();

    // Progress Tracker logic
    function loadProgress() {
      const progress = JSON.parse(localStorage.getItem('meditation-timer-progress') || '[]');
      return progress;
    }
    function saveSession(completed) {
      const progress = loadProgress();
      const now = new Date();
      const dateStr = now.toLocaleDateString(undefined, {year:'numeric',month:'short',day:'numeric'});
      const lengthStr = formatTime(timer.duration);
      progress.unshift({
        date: dateStr,
        length: lengthStr,
        completed: completed
      });
      if (progress.length > 10) progress.length = 10;
      localStorage.setItem('meditation-timer-progress', JSON.stringify(progress));
      renderProgress();
    }
    function renderProgress() {
      const tbody = document.getElementById('progress-table-body');
      const progress = loadProgress();
      tbody.innerHTML = '';
      if (!progress.length) {
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 3;
        td.className = 'no-sessions';
        td.textContent = 'No sessions recorded yet.';
        tr.appendChild(td);
        tbody.appendChild(tr);
        return;
      }
      progress.forEach(sess => {
        const tr = document.createElement('tr');
        tr.className = sess.completed ? 'completed' : 'incomplete';
        const tdDate = document.createElement('td');
        tdDate.textContent = sess.date;
        const tdLength = document.createElement('td');
        tdLength.textContent = sess.length;
        const tdStatus = document.createElement('td');
        tdStatus.textContent = sess.completed ? 'Completed' : 'Stopped';
        tdStatus.style.color = sess.completed ? 'var(--success)' : 'var(--danger)';
        tr.appendChild(tdDate);
        tr.appendChild(tdLength);
        tr.appendChild(tdStatus);
        tbody.appendChild(tr);
      });
    }
    document.getElementById('clear-progress-btn').addEventListener('click', function() {
      if (confirm('Are you sure you want to clear all progress? This cannot be undone.')) {
        localStorage.removeItem('meditation-timer-progress');
        renderProgress();
        document.getElementById('progress-status').textContent = 'Progress cleared.';
      }
    });
    // Search functionality (multiple ways to find content)
    function showSearchDialog() {
      if (document.getElementById('search-modal')) return;
      const modal = document.createElement('div');
      modal.id = 'search-modal';
      modal.setAttribute('role', 'dialog');
      modal.setAttribute('aria-modal', 'true');
      modal.setAttribute('aria-labelledby', 'search-modal-title');
      modal.style.position = 'fixed';
      modal.style.left = '0';
      modal.style.top = '0';
      modal.style.width = '100vw';
      modal.style.height = '100vh';
      modal.style.background = 'rgba(0,0,0,0.55)';
      modal.style.zIndex = '9999';
      modal.style.display = 'flex';
      modal.style.alignItems = 'center';
      modal.style.justifyContent = 'center';
      modal.innerHTML = `
        <div style="background:var(--bg);border-radius:12px;padding:2em 1.5em;max-width:90vw;box-shadow:0 2px 16px var(--shadow);width:400px;position:relative;">
          <h2 id="search-modal-title" style="margin-top:0;color:var(--primary-dark);font-size:1.3em;">Search Meditation Timer</h2>
          <form id="search-form" autocomplete="off">
            <label for="search-input" style="font-weight:600;color:var(--primary-dark);">What are you looking for?</label>
            <input type="text" id="search-input" name="search-input" style="width:100%;font-size:1.1em;padding:0.6em;border-radius:7px;border:2px solid var(--primary-dark);margin-bottom:1em;" aria-describedby="search-help" required aria-required="true" />
            <span id="search-help" class="help-text">Type keywords like "timer", "sound", "progress", or "settings".</span>
            <div style="margin-top:1em;display:flex;gap:1em;">
              <button type="submit" class="settings-btn" style="flex:1;">Search</button>
              <button type="button" class="settings-btn" id="close-search-btn" style="flex:1;background:var(--danger);color:var(--text-light);">Close</button>
            </div>
          </form>
          <div id="search-results" role="status" aria-live="polite" style="margin-top:1em;"></div>
        </div>
      `;
      document.body.appendChild(modal);
      const searchInput = modal.querySelector('#search-input');
      setTimeout(() => searchInput.focus(), 200);
      modal.querySelector('#close-search-btn').addEventListener('click', closeSearchDialog);
      modal.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeSearchDialog();
        }
      });
      modal.querySelector('#search-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const val = searchInput.value.trim().toLowerCase();
        const results = modal.querySelector('#search-results');
        if (!val) {
          results.textContent = 'Please enter a search term.';
          return;
        }
        // Simple keyword search
        let found = [];
        if (val.includes('timer')) found.push('<a href="#main-content">Meditation Timer</a>');
        if (val.includes('sound')) found.push('<a href="#sounds">Soothing Sounds</a>');
        if (val.includes('progress')) found.push('<a href="#progress">Progress Tracker</a>');
        if (val.includes('settings')) found.push('<a href="#settings">Settings & Personalization</a>');
        if (val.includes('help')) found.push('<a href="#help">Help</a>');
        if (val.includes('sitemap')) found.push('<a href="#sitemap">Sitemap</a>');
        if (!found.length) {
          results.textContent = 'No matching sections found. Try "timer", "sound", "progress", "settings", or "help".';
        } else {
          results.innerHTML = 'Jump to section: <ul>' + found.map(f => `<li>${f}</li>`).join('') + '</ul>';
        }
      });
    }
    function closeSearchDialog() {
      const modal = document.getElementById('search-modal');
      if (modal) modal.parentNode.removeChild(modal);
    }
    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === '#search') {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          showSearchDialog();
        });
        link.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            showSearchDialog();
          }
        });
      }
    });

    // Sitemap (multiple ways to find content)
    function showSitemap() {
      if (document.getElementById('sitemap-modal')) return;
      const modal = document.createElement('div');
      modal.id = 'sitemap-modal';
      modal.setAttribute('role', 'dialog');
      modal.setAttribute('aria-modal', 'true');
      modal.setAttribute('aria-labelledby', 'sitemap-modal-title');
      modal.style.position = 'fixed';
      modal.style.left = '0';
      modal.style.top = '0';
      modal.style.width = '100vw';
      modal.style.height = '100vh';
      modal.style.background = 'rgba(0,0,0,0.55)';
      modal.style.zIndex = '9999';
      modal.style.display = 'flex';
      modal.style.alignItems = 'center';
      modal.style.justifyContent = 'center';
      modal.innerHTML = `
        <div style="background:var(--bg);border-radius:12px;padding:2em 1.5em;max-width:90vw;box-shadow:0 2px 16px var(--shadow);width:380px;position:relative;">
          <h2 id="sitemap-modal-title" style="margin-top:0;color:var(--primary-dark);font-size:1.3em;">Sitemap</h2>
          <ul style="font-size:1.1em;line-height:1.7;">
            <li><a href="#main-content">Meditation Timer</a></li>
            <li><a href="#sounds">Soothing Sounds</a></li>
            <li><a href="#progress">Progress Tracker</a></li>
            <li><a href="#settings">Settings & Personalization</a></li>
            <li><a href="#help">Help</a></li>
          </ul>
          <button type="button" class="settings-btn" id="close-sitemap-btn" style="background:var(--danger);color:var(--text-light);margin-top:1em;">Close</button>
        </div>
      `;
      document.body.appendChild(modal);
      setTimeout(() => modal.querySelector('a').focus(), 200);
      modal.querySelector('#close-sitemap-btn').addEventListener('click', closeSitemap);
      modal.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeSitemap();
      });
    }
    function closeSitemap() {
      const modal = document.getElementById('sitemap-modal');
      if (modal) modal.parentNode.removeChild(modal);
    }
    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === '#sitemap') {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          showSitemap();
        });
        link.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            showSitemap();
          }
        });
      }
    });

    // On page load
    loadSettings();
    renderProgress();

    // Responsive: prevent horizontal scroll at 200% zoom
    document.body.style.maxWidth = window.innerWidth + 'px';

    // Reduced motion: Pause/disable animation if user prefers
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      document.body.classList.add('reduced-motion');
    }
  </script>
</body>
</html>