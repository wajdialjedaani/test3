<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Travel Map | Share Your Adventures</title>
    <style>
        /* Reset and Base Styles */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --text-light: #fff;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: var(--text-light);
            padding: 8px;
            z-index: 100;
            transition: var(--transition);
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header */
        header {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 1rem 2rem;
            box-shadow: var(--box-shadow);
            position: relative;
            z-index: 10;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-light);
            text-decoration: none;
        }

        /* Navigation */
        nav {
            display: flex;
            align-items: center;
        }

        .nav-list {
            display: flex;
            list-style: none;
        }

        .nav-item {
            margin-left: 1.5rem;
        }

        .nav-link {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .nav-link:hover,
        .nav-link:focus {
            background-color: rgba(255, 255, 255, 0.2);
            outline: 2px solid var(--text-light);
        }

        .mobile-menu-button {
            display: none;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        /* Main Content */
        main {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 2.2rem;
        }

        h2 {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--dark-color);
            margin: 1rem 0;
            font-size: 1.4rem;
        }

        /* Map Container */
        .map-container {
            position: relative;
            height: 500px;
            width: 100%;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            margin-bottom: 2rem;
            background-color: #e8f4f8;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #travelMap {
            height: 100%;
            width: 100%;
        }

        .map-placeholder {
            text-align: center;
            padding: 2rem;
            color: var(--dark-color);
        }

        .map-placeholder p {
            margin-bottom: 1rem;
        }

        /* Map Controls */
        .map-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .map-control-button {
            background-color: var(--light-color);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .map-control-button:hover,
        .map-control-button:focus {
            background-color: var(--secondary-color);
            color: var(--text-light);
            outline: 2px solid var(--primary-color);
        }

        /* Pin Form */
        .pin-form-container {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--light-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1001;
            width: 90%;
            max-width: 500px;
        }

        .pin-form-container.visible {
            display: block;
        }

        .pin-form h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input[type="text"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            min-width: 44px;
            min-height: 44px;
        }

        .primary-button {
            background-color: var(--secondary-color);
            color: var(--text-light);
        }

        .primary-button:hover,
        .primary-button:focus {
            background-color: #2980b9;
            outline: 2px solid var(--primary-color);
        }

        .secondary-button {
            background-color: var(--light-color);
            border: 1px solid var(--secondary-color);
            color: var(--secondary-color);
        }

        .secondary-button:hover,
        .secondary-button:focus {
            background-color: #f0f8ff;
            outline: 2px solid var(--primary-color);
        }

        .danger-button {
            background-color: var(--error-color);
            color: var(--text-light);
        }

        .danger-button:hover,
        .danger-button:focus {
            background-color: #c0392b;
            outline: 2px solid var(--primary-color);
        }

        /* Pins List */
        .pins-section {
            margin-top: 2rem;
        }

        .pins-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .pin-card {
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .pin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .pin-card-header {
            background-color: var(--secondary-color);
            color: var(--text-light);
            padding: 1rem;
            position: relative;
        }

        .pin-card-title {
            margin: 0;
            font-size: 1.2rem;
        }

        .pin-card-location {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 0.25rem;
        }

        .pin-card-date {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.25rem 0.5rem;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
        }

        .pin-card-body {
            padding: 1rem;
        }

        .pin-card-description {
            margin-bottom: 1rem;
        }

        .pin-card-category {
            display: inline-block;
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .pin-card-actions {
            display: flex;
            justify-content: flex-end;
            padding: 0 1rem 1rem;
            gap: 0.5rem;
        }

        .pin-card-button {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* No Pins Message */
        .no-pins-message {
            text-align: center;
            padding: 2rem;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            grid-column: 1 / -1;
        }

        /* Footer */
        footer {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0;
        }

        .footer-link {
            color: var(--text-light);
            text-decoration: none;
        }

        .footer-link:hover,
        .footer-link:focus {
            text-decoration: underline;
            outline: none;
        }

        .copyright {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.visible {
            display: flex;
        }

        .modal-content {
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .modal-close:hover,
        .modal-close:focus {
            color: var(--accent-color);
            outline: 2px solid var(--accent-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }

            nav {
                width: 100%;
                margin-top: 1rem;
            }

            .nav-list {
                display: none;
                flex-direction: column;
                width: 100%;
            }

            .nav-list.visible {
                display: flex;
            }

            .nav-item {
                margin: 0;
            }

            .nav-link {
                display: block;
                padding: 0.75rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .mobile-menu-button {
                display: block;
                position: absolute;
                top: 1rem;
                right: 1rem;
            }

            .pins-list {
                grid-template-columns: 1fr;
            }

            .filter-controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Accessibility Focus Styles */
        *:focus {
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        button:focus,
        input:focus,
        select:focus,
        textarea:focus,
        a:focus {
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">TravelMap</a>
            <nav>
                <button class="mobile-menu-button" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-list">
                    ☰
                </button>
                <ul class="nav-list" id="nav-list">
                    <li class="nav-item"><a href="#" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="#map" class="nav-link">Map</a></li>
                    <li class="nav-item"><a href="#pins" class="nav-link">My Pins</a></li>
                    <li class="nav-item"><a href="#about" class="nav-link">About</a></li>
                    <li class="nav-item"><a href="#contact" class="nav-link">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <h1>Interactive Travel Map</h1>
        <p>Create and share your travel experiences by adding pins to locations you've visited. Click on the map to add a new pin or view existing ones.</p>

        <!-- Map Section -->
        <section id="map" aria-labelledby="map-heading">
            <h2 id="map-heading">Explore the Map</h2>
            <div class="map-container">
                <div id="travelMap" role="application" aria-label="Interactive travel map">
                    <div class="map-placeholder">
                        <h3>Interactive Map Loading</h3>
                        <p>This area will display an interactive map where you can add and view location pins.</p>
                        <button class="primary-button" id="addPinButton">Add a Pin</button>
                    </div>
                </div>

                <div class="map-controls">
                    <button class="map-control-button" id="zoomInButton" aria-label="Zoom in">+</button>
                    <button class="map-control-button" id="zoomOutButton" aria-label="Zoom out">-</button>
                    <button class="map-control-button" id="currentLocationButton" aria-label="Find my location">📍</button>
                </div>

                <!-- Pin Form (hidden by default) -->
                <div class="pin-form-container" id="pinFormContainer" role="dialog" aria-labelledby="pinFormHeading" aria-modal="true">
                    <form class="pin-form" id="pinForm">
                        <h3 id="pinFormHeading">Add Travel Pin</h3>
                        <div class="form-group">
                            <label for="pinTitle">Title *</label>
                            <input type="text" id="pinTitle" name="pinTitle" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="pinLocation">Location *</label>
                            <input type="text" id="pinLocation" name="pinLocation" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="pinDate">Date Visited *</label>
                            <input type="date" id="pinDate" name="pinDate" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="pinCategory">Category *</label>
                            <select id="pinCategory" name="pinCategory" required aria-required="true">
                                <option value="">Select a category</option>
                                <option value="adventure">Adventure</option>
                                <option value="beach">Beach</option>
                                <option value="city">City</option>
                                <option value="culture">Culture</option>
                                <option value="food">Food</option>
                                <option value="nature">Nature</option>
                                <option value="shopping">Shopping</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pinDescription">Description</label>
                            <textarea id="pinDescription" name="pinDescription" rows="4"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="secondary-button" id="cancelPinButton">Cancel</button>
                            <button type="submit" class="primary-button">Save Pin</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Pins Section -->
        <section class="pins-section" id="pins" aria-labelledby="pins-heading">
            <h2 id="pins-heading">My Travel Pins</h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label for="filterCategory">Filter by Category:</label>
                    <select id="filterCategory">
                        <option value="all">All Categories</option>
                        <option value="adventure">Adventure</option>
                        <option value="beach">Beach</option>
                        <option value="city">City</option>
                        <option value="culture">Culture</option>
                        <option value="food">Food</option>
                        <option value="nature">Nature</option>
                        <option value="shopping">Shopping</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sortBy">Sort By:</label>
                    <select id="sortBy">
                        <option value="date-desc">Date (Newest First)</option>
                        <option value="date-asc">Date (Oldest First)</option>
                        <option value="title-asc">Title (A-Z)</option>
                        <option value="title-desc">Title (Z-A)</option>
                    </select>
                </div>
            </div>

            <div class="pins-list" id="pinsList">
                <!-- Sample Pin (will be populated by JavaScript) -->
                <div class="pin-card">
                    <div class="pin-card-header">
                        <h3 class="pin-card-title">Sample Travel Location</h3>
                        <p class="pin-card-location">Paris, France</p>
                        <span class="pin-card-date">May 15, 2023</span>
                    </div>
                    <div class="pin-card-body">
                        <p class="pin-card-description">This is a sample description of a travel experience in Paris. The Eiffel Tower was amazing at sunset!</p>
                        <span class="pin-card-category">City</span>
                    </div>
                    <div class="pin-card-actions">
                        <button class="pin-card-button secondary-button">View on Map</button>
                        <button class="pin-card-button danger-button">Delete</button>
                    </div>
                </div>
            </div>

            <div class="no-pins-message" id="noPinsMessage" style="display: none;">
                <h3>No Pins Yet</h3>
                <p>You haven't added any travel pins yet. Click on the map to add your first pin!</p>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" aria-labelledby="about-heading">
            <h2 id="about-heading">About TravelMap</h2>
            <p>TravelMap is an interactive platform that allows you to document and share your travel experiences. Create pins on locations you've visited, add details about your experiences, and share them with friends and family.</p>
            <p>Our mission is to help travelers preserve their memories and inspire others to explore the world.</p>
        </section>

        <!-- Contact Section -->
        <section id="contact" aria-labelledby="contact-heading">
            <h2 id="contact-heading">Contact Us</h2>
            <p>Have questions or feedback? We'd love to hear from you!</p>
            <form id="contactForm">
                <div class="form-group">
                    <label for="contactName">Name *</label>
                    <input type="text" id="contactName" name="contactName" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="contactEmail">Email *</label>
                    <input type="email" id="contactEmail" name="contactEmail" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="contactMessage">Message *</label>
                    <textarea id="contactMessage" name="contactMessage" rows="5" required aria-required="true"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-button">Send Message</button>
                </div>
            </form>
        </section>
    </main>

    <!-- Modal for Pin Details -->
    <div class="modal" id="pinDetailsModal" role="dialog" aria-labelledby="pinModalTitle" aria-modal="true">
        <div class="modal-content">
            <button class="modal-close" id="closeModalButton" aria-label="Close modal">×</button>
            <h2 id="pinModalTitle">Pin Details</h2>
            <div id="pinModalContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#" class="footer-link">Home</a>
                <a href="#map" class="footer-link">Map</a>
                <a href="#pins" class="footer-link">My Pins</a>
                <a href="#about" class="footer-link">About</a>
                <a href="#contact" class="footer-link">Contact</a>
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Terms of Service</a>
            </div>
            <p class="copyright">© 2023 TravelMap. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            const navList = document.querySelector('.nav-list');

            mobileMenuButton.addEventListener('click', function() {
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                navList.classList.toggle('visible');
            });

            // Pin management
            const pins = JSON.parse(localStorage.getItem('travelPins')) || [];
            const pinsList = document.getElementById('pinsList');
            const noPinsMessage = document.getElementById('noPinsMessage');
            const pinFormContainer = document.getElementById('pinFormContainer');
            const pinForm = document.getElementById('pinForm');
            const cancelPinButton = document.getElementById('cancelPinButton');
            const addPinButton = document.getElementById('addPinButton');
            const filterCategory = document.getElementById('filterCategory');
            const sortBy = document.getElementById('sortBy');
            const pinDetailsModal = document.getElementById('pinDetailsModal');
            const closeModalButton = document.getElementById('closeModalButton');
            const pinModalContent = document.getElementById('pinModalContent');

            // Update pins display
            function updatePinsDisplay() {
                const categoryFilter = filterCategory.value;
                const sortOption = sortBy.value;

                // Filter pins
                let filteredPins = pins;
                if (categoryFilter !== 'all') {
                    filteredPins = pins.filter(pin => pin.category === categoryFilter);
                }

                // Sort pins
                filteredPins = [...filteredPins].sort((a, b) => {
                    if (sortOption === 'date-desc') {
                        return new Date(b.date) - new Date(a.date);
                    } else if (sortOption === 'date-asc') {
                        return new Date(a.date) - new Date(b.date);
                    } else if (sortOption === 'title-asc') {
                        return a.title.localeCompare(b.title);
                    } else if (sortOption === 'title-desc') {
                        return b.title.localeCompare(a.title);
                    }
                    return 0;
                });

                // Display pins or no pins message
                if (filteredPins.length === 0) {
                    pinsList.style.display = 'none';
                    noPinsMessage.style.display = 'block';
                } else {
                    pinsList.style.display = 'grid';
                    noPinsMessage.style.display = 'none';
                    renderPins(filteredPins);
                }
            }

            // Render pins to the DOM
            function renderPins(pinsToRender) {
                pinsList.innerHTML = '';

                pinsToRender.forEach((pin, index) => {
                    const pinElement = document.createElement('div');
                    pinElement.className = 'pin-card';
                    pinElement.innerHTML = `
                        <div class="pin-card-header">
                            <h3 class="pin-card-title">${pin.title}</h3>
                            <p class="pin-card-location">${pin.location}</p>
                            <span class="pin-card-date">${new Date(pin.date).toLocaleDateString()}</span>
                        </div>
                        <div class="pin-card-body">
                            <p class="pin-card-description">${pin.description || 'No description provided.'}</p>
                            <span class="pin-card-category">${pin.category}</span>
                        </div>
                        <div class="pin-card-actions">
                            <button class="pin-card-button secondary-button view-pin-button" data-index="${index}" aria-label="View ${pin.title} on map">View on Map</button>
                            <button class="pin-card-button danger-button delete-pin-button" data-index="${index}" aria-label="Delete ${pin.title} pin">Delete</button>
                        </div>
                    `;
                    pinsList.appendChild(pinElement);
                });

                // Add event listeners to the new buttons
                document.querySelectorAll('.view-pin-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        viewPinOnMap(index);
                    });
                });

                document.querySelectorAll('.delete-pin-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        deletePin(index);
                    });
                });
            }

            // View pin on map (placeholder for map functionality)
            function viewPinOnMap(index) {
                const pin = pins[index];
                pinModalContent.innerHTML = `
                    <h3>${pin.title}</h3>
                    <p><strong>Location:</strong> ${pin.location}</p>
                    <p><strong>Date:</strong> ${new Date(pin.date).toLocaleDateString()}</p>
                    <p><strong>Category:</strong> ${pin.category}</p>
                    <p><strong>Description:</strong> ${pin.description || 'No description provided.'}</p>
                `;
                pinDetailsModal.classList.add('visible');
                document.getElementById('pinModalTitle').textContent = pin.title;
            }

            // Delete a pin
            function deletePin(index) {
                if (confirm('Are you sure you want to delete this pin?')) {
                    pins.splice(index, 1);
                    localStorage.setItem('travelPins', JSON.stringify(pins));
                    updatePinsDisplay();
                }
            }

            // Show pin form
            function showPinForm() {
                pinFormContainer.classList.add('visible');
                document.getElementById('pinTitle').focus();
            }

            // Hide pin form
            function hidePinForm() {
                pinFormContainer.classList.remove('visible');
                pinForm.reset();
            }

            // Save new pin
            pinForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const newPin = {
                    title: document.getElementById('pinTitle').value,
                    location: document.getElementById('pinLocation').value,
                    date: document.getElementById('pinDate').value,
                    category: document.getElementById('pinCategory').value,
                    description: document.getElementById('pinDescription').value,
                    lat: 0, // Placeholder for actual map coordinates
                    lng: 0  // Placeholder for actual map coordinates
                };

                pins.push(newPin);
                localStorage.setItem('travelPins', JSON.stringify(pins));
                hidePinForm();
                updatePinsDisplay();
            });

            // Close modal
            closeModalButton.addEventListener('click', function() {
                pinDetailsModal.classList.remove('visible');
            });

            // Close modal when clicking outside content
            pinDetailsModal.addEventListener('click', function(e) {
                if (e.target === pinDetailsModal) {
                    pinDetailsModal.classList.remove('visible');
                }
            });

            // Filter and sort event listeners
            filterCategory.addEventListener('change', updatePinsDisplay);
            sortBy.addEventListener('change', updatePinsDisplay);

            // Button event listeners
            addPinButton.addEventListener('click', showPinForm);
            cancelPinButton.addEventListener('click', hidePinForm);

            // Initialize pins display
            updatePinsDisplay();

            // Contact form submission
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Thank you for your message! We will get back to you soon.');
                this.reset();
            });

            // Map controls (placeholder functionality)
            document.getElementById('zoomInButton').addEventListener('click', function() {
                alert('Zoom in functionality would be implemented with a real map API.');
            });

            document.getElementById('zoomOutButton').addEventListener('click', function() {
                alert('Zoom out functionality would be implemented with a real map API.');
            });

            document.getElementById('currentLocationButton').addEventListener('click', function() {
                alert('Current location functionality would be implemented with geolocation API.');
            });

            // Keyboard navigation for modal
            document.addEventListener('keydown', function(e) {
                if (pinDetailsModal.classList.contains('visible') && e.key === 'Escape') {
                    pinDetailsModal.classList.remove('visible');
                }
            });
        });
    </script>
</body>
</html>